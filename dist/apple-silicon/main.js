
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ImportAttachments
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/ImportAttachmentsModal.ts
var import_obsidian = require("obsidian");

// src/types.ts
var ImportActionType = /* @__PURE__ */ ((ImportActionType2) => {
  ImportActionType2["MOVE"] = "MOVE";
  ImportActionType2["COPY"] = "COPY";
  ImportActionType2["LINK"] = "LINK";
  ImportActionType2["ASK_USER"] = "ASK_USER";
  return ImportActionType2;
})(ImportActionType || {});
var YesNoTypes = /* @__PURE__ */ ((YesNoTypes2) => {
  YesNoTypes2["YES"] = "YES";
  YesNoTypes2["NO"] = "NO";
  YesNoTypes2["ASK_USER"] = "ASK_USER";
  return YesNoTypes2;
})(YesNoTypes || {});
var MultipleFilesImportTypes = /* @__PURE__ */ ((MultipleFilesImportTypes2) => {
  MultipleFilesImportTypes2["BULLETED"] = "BULLETED";
  MultipleFilesImportTypes2["NUMBERED"] = "NUMBERED";
  MultipleFilesImportTypes2["INLINE"] = "INLINE";
  return MultipleFilesImportTypes2;
})(MultipleFilesImportTypes || {});
var RelativeLocation = /* @__PURE__ */ ((RelativeLocation2) => {
  RelativeLocation2["SAME"] = "SAME";
  RelativeLocation2["VAULT"] = "VAULT";
  return RelativeLocation2;
})(RelativeLocation || {});
var LinkFormat = /* @__PURE__ */ ((LinkFormat2) => {
  LinkFormat2["RELATIVE"] = "RELATIVE";
  LinkFormat2["ABSOLUTE"] = "ABSOLUTE";
  return LinkFormat2;
})(LinkFormat || {});

// src/utils.ts
var import_fs = require("fs");
var path = __toESM(require("path"));
var crypto2 = __toESM(require("crypto"));

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

// node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  const rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// src/utils.ts
function getFilename(filepath) {
  return path.parse(filepath).name;
}
async function arePathsSameFile(file1, file2) {
  try {
    const realpath1 = await import_fs.promises.realpath(file1);
    const realpath2 = await import_fs.promises.realpath(file2);
    return path.relative(realpath1, realpath2) == "";
  } catch (error) {
    console.error("Error resolving paths:", error);
    return false;
  }
}
async function hashFile(filePath) {
  const hash = crypto2.createHash("md5");
  let fileHandle = null;
  try {
    fileHandle = await import_fs.promises.open(filePath, "r");
    const stream = fileHandle.createReadStream();
    for await (const chunk of stream) {
      hash.update(chunk);
    }
    return hash.digest("hex");
  } finally {
    if (fileHandle) {
      await fileHandle.close();
    }
  }
}
function formatDateTime(dateFormat) {
  try {
    const dateTime = window.moment().format(dateFormat);
    return dateTime;
  } catch (error) {
    if (error instanceof Error) {
      console.error("Error formatting date:", error.message);
    } else {
      console.error("Error formatting date:", error);
    }
    return "DATE_ERROR";
  }
}
async function createAttachmentName(namePattern, dateFormat, originalFilePath) {
  const originalFilePath_parsed = path.parse(originalFilePath);
  const fileToImportName = originalFilePath_parsed.name;
  let attachmentName = namePattern.replace(/\$\{original\}/g, fileToImportName).replace(/\$\{uuid\}/g, v4_default()).replace(/\$\{date\}/g, formatDateTime(dateFormat));
  if (namePattern.includes("${md5}")) {
    let hash = "";
    try {
      hash = await hashFile(originalFilePath);
    } catch (err) {
      console.error("Error hashing the file:", err);
    }
    attachmentName = attachmentName.replace(/\$\{md5\}/g, hash);
  }
  attachmentName += originalFilePath_parsed.ext;
  return attachmentName;
}
async function findNewFilename(destFilePath) {
  const destFilePath_parse = path.parse(destFilePath);
  let counter = 1;
  let fileExists;
  let newFilename = null;
  do {
    newFilename = path.join(destFilePath_parse.dir, `${destFilePath_parse.name} (${counter})${destFilePath_parse.ext}`);
    fileExists = await checkFileExists(newFilename);
    counter += 1;
  } while (fileExists);
  return newFilename;
}
async function isFileInVault(vaultPath, filePath) {
  try {
    const realFilePath = await import_fs.promises.realpath(filePath);
    const realVaultFolderPath = await import_fs.promises.realpath(vaultPath);
    const normalizedFilePath = path.normalize(realFilePath);
    const normalizedVaultFolderPath = path.normalize(realVaultFolderPath);
    if (normalizedFilePath.startsWith(`${normalizedVaultFolderPath}${path.sep}`)) {
      return normalizedFilePath;
    } else {
      return false;
    }
  } catch (error) {
    console.error("Error resolving paths:", error);
    return false;
  }
}
async function checkFileExists(filePath) {
  try {
    const stats = await import_fs.promises.stat(filePath);
    return stats.isFile();
  } catch (error) {
    if (error && typeof error === "object" && "code" in error && error.code === "ENOENT") {
      return false;
    }
    throw error;
  }
}
async function checkDirectoryExists(dirPath) {
  try {
    const stats = await import_fs.promises.stat(dirPath);
    return stats.isDirectory();
  } catch (error) {
    if (error && typeof error === "object" && "code" in error && error.code === "ENOENT") {
      return false;
    }
    throw error;
  }
}
async function ensureDirectoryExists(path5) {
  const doExist = await checkDirectoryExists(path5);
  if (!doExist) {
    await import_fs.promises.mkdir(path5, { recursive: true });
  }
  return true;
}

// src/ImportAttachmentsModal.ts
var path2 = __toESM(require("path"));
var ImportActionTypeModal = class extends import_obsidian.Modal {
  // Private variable to store the checkbox state
  constructor(app, plugin, lastActionFilesOnImport, lastEmbedOnImport) {
    super(app);
    this.plugin = plugin;
    this.lastActionFilesOnImport = lastActionFilesOnImport;
    this.lastEmbedOnImport = lastEmbedOnImport;
    this.resolveChoice = () => {
    };
    this.rememberChoice = false;
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
    this.selectedAction = lastActionFilesOnImport;
    this.selectedEmbedOption = lastEmbedOnImport;
  }
  createToggle(table, questionText, optionA, optionB, initialOption, callback, withSeparator = false) {
    const tr = table.createEl("tr");
    if (withSeparator) {
      tr.addClass("sep");
    }
    tr.createEl("td", { text: questionText, cls: "action-question" });
    tr.createEl("td", { text: optionA, cls: "toggle-option-A" });
    const td = tr.createEl("td");
    const switchLabel = td.createEl("label", { cls: "switch" });
    const input = switchLabel.createEl("input", { type: "checkbox" });
    if (initialOption == 0 /* A */) {
      input.checked = false;
    } else {
      input.checked = true;
    }
    switchLabel.createEl("span", { cls: "slider" });
    tr.createEl("td", { text: optionB, cls: "toggle-option-B" });
    input.addEventListener("change", () => {
      if (callback) {
        callback(input.checked ? 1 /* B */ : 0 /* A */);
      }
    });
  }
  onOpen() {
    let initialOption;
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    container.createEl("p", { text: "Configure the import options and then press either enter or the import button." });
    const table = container.createEl("table");
    switch (this.lastActionFilesOnImport) {
      case "MOVE" /* MOVE */:
        initialOption = 0 /* A */;
        break;
      case "COPY" /* COPY */:
      default:
        initialOption = 1 /* B */;
        break;
    }
    this.createToggle(table, "Do you want to move or copy the files to the vault?", "Move", "Copy", initialOption, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.selectedAction = "MOVE" /* MOVE */;
      } else {
        this.selectedAction = "COPY" /* COPY */;
      }
    }, true);
    switch (this.lastEmbedOnImport) {
      case "YES" /* YES */:
        initialOption = 0 /* A */;
        break;
      case "NO" /* NO */:
      default:
        initialOption = 1 /* B */;
        break;
    }
    this.createToggle(table, "Do you want to embed or link the files to the vault?", "Embed", "Link", initialOption, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.selectedEmbedOption = "YES" /* YES */;
      } else {
        this.selectedEmbedOption = "NO" /* NO */;
      }
    }, true);
    this.createToggle(table, "Save this answer in the settings for the future?", "Yes", "No", 1 /* B */, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.rememberChoice = true;
      } else {
        this.rememberChoice = false;
      }
    }, true);
    const importButtonContainer = container.createDiv({ cls: "import-buttons" });
    const importButton = importButtonContainer.createEl("button", {
      text: "Import",
      cls: "mod-cta"
    });
    importButton.addEventListener("click", () => {
      this.import();
    });
    setTimeout(() => {
      importButton.focus();
    }, 0);
  }
  async import() {
    this.resolveChoice({
      action: this.selectedAction,
      embed: this.selectedEmbedOption,
      rememberChoice: this.rememberChoice
    });
    this.close();
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};
var OverwriteChoiceModal = class extends import_obsidian.Modal {
  constructor(app, plugin, originalFilePath, destFilePath) {
    super(app);
    this.plugin = plugin;
    this.originalFilePath = originalFilePath;
    this.destFilePath = destFilePath;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
    this.filename = getFilename(destFilePath);
  }
  onOpen() {
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('You are trying to copy the file "');
    const origFileLink = paragraph.createEl("a", {
      text: this.originalFilePath,
      href: "#"
    });
    origFileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.originalFilePath);
    });
    paragraph.append('" into the vault, where a "');
    const vaultFileLink = paragraph.createEl("a", {
      text: "file",
      href: "#"
    });
    vaultFileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.destFilePath);
    });
    paragraph.append('" with the same name is already present.');
    container.createEl("p", { text: "How do you want to proceed?" });
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const keepButton = buttonContainer.createEl("button", {
      text: "Keep both",
      cls: "mod-cta"
    });
    keepButton.addEventListener("click", () => {
      this.resolveChoice(1 /* KEEPBOTH */);
      this.close();
    });
    const overwriteButton = buttonContainer.createEl("button", {
      text: "Overwrite",
      cls: "mod-warning"
    });
    overwriteButton.addEventListener("click", () => {
      this.resolveChoice(0 /* OVERWRITE */);
      this.close();
    });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    skipButton.addEventListener("click", () => {
      this.resolveChoice(2 /* SKIP */);
      this.close();
    });
    setTimeout(() => {
      keepButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};
var DeleteAttachmentFolderModal = class extends import_obsidian.Modal {
  // To resolve the promise. Initialize with a no-op function
  constructor(app, plugin, attachmentFolderPath) {
    super(app);
    this.plugin = plugin;
    this.attachmentFolderPath = attachmentFolderPath;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
  }
  onOpen() {
    const attachmentFolderPath_parsed = path2.parse(this.attachmentFolderPath);
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('Do you want to move the attachment folder "');
    const fileLink = paragraph.createEl("a", {
      text: attachmentFolderPath_parsed.name,
      href: "#"
    });
    fileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.openPath(this.attachmentFolderPath);
    });
    paragraph.append('" to the system trash?');
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const deleteButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    deleteButton.addEventListener("click", () => {
      this.resolveChoice(true);
      this.close();
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    cancelButton.addEventListener("click", () => {
      this.resolveChoice(false);
      this.close();
    });
    setTimeout(() => {
      cancelButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(false);
  }
};
var ImportFromVaultChoiceModal = class extends import_obsidian.Modal {
  // To resolve the promise. Initialize with a no-op function
  constructor(app, plugin, vaultPath, originalFilePath, importAction) {
    super(app);
    this.plugin = plugin;
    this.vaultPath = vaultPath;
    this.originalFilePath = originalFilePath;
    this.importAction = importAction;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
  }
  onOpen() {
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('The file you are trying to import "');
    const fileLink = paragraph.createEl("a", {
      text: path2.relative(this.vaultPath, this.originalFilePath),
      href: "#"
    });
    fileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.originalFilePath);
    });
    paragraph.append('" is already stored in the vault.');
    if (this.importAction == "MOVE" /* MOVE */) {
      container.createEl("p", { text: "You intended to move the file. 					However, moving a file that is already in the vault to a new 					destination in the same vault is not supported; 					only copying and linking operations are allowed." });
    }
    container.createEl("p", { text: "Do you want to make a copy or refer to the original file in the vault through a relative path?" });
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const linkButton = buttonContainer.createEl("button", {
      text: "Relative path",
      cls: "mod-cta"
    });
    linkButton.addEventListener("click", () => {
      this.resolveChoice(1 /* LINK */);
      this.close();
    });
    const copyButton = buttonContainer.createEl("button", {
      text: "Copy",
      cls: "mod-warning"
    });
    copyButton.addEventListener("click", () => {
      this.resolveChoice(0 /* COPY */);
      this.close();
    });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    skipButton.addEventListener("click", () => {
      this.resolveChoice(2 /* SKIP */);
      this.close();
    });
    setTimeout(() => {
      linkButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};

// src/main.ts
var import_fs2 = require("fs");
var path4 = __toESM(require("path"));

// src/patchOpenFile.ts
var import_obsidian2 = require("obsidian");
var path3 = __toESM(require("path"));
var metaKeyPressed = false;
var altKeyPressed = false;
var keyListenersInstalled = false;
var originalOpenFile = null;
function keydownHandler(event) {
  if (event.metaKey) {
    metaKeyPressed = true;
  }
  if (event.altKey) {
    altKeyPressed = true;
  }
}
function keyupHandler(event) {
  if (event.key === "Meta") {
    metaKeyPressed = false;
  }
  if (event.key === "Alt") {
    altKeyPressed = false;
  }
}
function mouseHandler(event) {
  if (event.metaKey) {
    metaKeyPressed = true;
  } else {
    metaKeyPressed = false;
  }
  if (event.altKey) {
    altKeyPressed = true;
  } else {
    altKeyPressed = false;
  }
}
function addKeyListeners() {
  document.addEventListener("keydown", keydownHandler);
  document.addEventListener("keyup", keyupHandler);
  document.addEventListener("mousedown", mouseHandler, { capture: true });
  keyListenersInstalled = true;
}
function removeKeyListeners() {
  if (keyListenersInstalled) {
    document.removeEventListener("keydown", keydownHandler);
    document.removeEventListener("keyup", keyupHandler);
    document.removeEventListener("mousedown", mouseHandler, { capture: true });
    keyListenersInstalled = false;
  }
}
function unpatchOpenFile() {
  if (originalOpenFile) {
    import_obsidian2.WorkspaceLeaf.prototype.openFile = originalOpenFile;
    originalOpenFile = null;
  }
}
function patchOpenFile(plugin) {
  originalOpenFile = import_obsidian2.WorkspaceLeaf.prototype.openFile;
  import_obsidian2.WorkspaceLeaf.prototype.openFile = async function patchedOpenFile(file, openState) {
    var _a;
    if (file.extension === "md" && originalOpenFile) {
      return originalOpenFile.call(this, file, openState);
    }
    const newEmptyLeave = ((_a = this.getViewState()) == null ? void 0 : _a.type) == "empty";
    if (plugin.settings.revealAttachment && metaKeyPressed && altKeyPressed) {
      window.require("electron").remote.shell.showItemInFolder(path3.join(plugin.vaultPath, file.path));
    } else if (plugin.settings.openAttachmentExternal && metaKeyPressed && !altKeyPressed) {
      plugin.app.openWithDefaultApp(file.path);
    } else {
      if (originalOpenFile) {
        return originalOpenFile.call(this, file, openState);
      }
    }
    if (newEmptyLeave) {
      this.detach();
    }
    return;
  };
}

// src/main.ts
var DEFAULT_SETTINGS = {
  actionDroppedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to asking the user
  actionPastedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to asking the user
  embedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to linking files
  lastActionPastedFilesOnImport: "COPY" /* COPY */,
  // Default to copying files
  lastActionDroppedFilesOnImport: "COPY" /* COPY */,
  // Default to copying files
  lastEmbedFilesOnImport: "NO" /* NO */,
  // Default to linking
  multipleFilesImportType: "BULLETED" /* BULLETED */,
  // Default to bulleted list when importing multiple files
  relativeLocation: "SAME" /* SAME */,
  // Default to vault
  folderPath: "${notename} (attachments)",
  // Default to a folder in the vault
  linkFormat: "RELATIVE" /* RELATIVE */,
  attachmentName: "${original}",
  // Default to the original name of the attachment
  dateFormat: "YYYY_MM_DDTHH_mm_ss",
  customDisplayText: true,
  // Default to true
  autoRenameAttachmentFolder: true,
  // Default to true
  autoDeleteAttachmentFolder: true,
  // Default to true
  confirmDeleteAttachmentFolder: true,
  // Default to true
  hideAttachmentFolders: true,
  // Default to true
  revealAttachment: true,
  // Default to true
  openAttachmentExternal: true
  // Default to true
};
var ImportAttachments = class extends import_obsidian3.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.settings = { ...DEFAULT_SETTINGS };
    this.renameCallbackEnabled = true;
    this.deleteCallbackEnabled = true;
    this.observer = null;
    this.hideFolderNames = [];
    const adapter = this.app.vault.adapter;
    if (!(adapter instanceof import_obsidian3.FileSystemAdapter)) {
      throw new Error("The vault folder could not be determined.");
    }
    this.vaultPath = adapter.getBasePath();
  }
  setupObserver() {
    this.configureHideFolderNames();
    const callback = (mutationsList, observer) => {
      mutationsList.forEach((record) => {
        var _a, _b;
        if ((_b = (_a = record.target) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("nav-folder")) {
          this.hideAttachmentFolders();
        }
      });
    };
    const targetNode = document.body;
    this.observer = new MutationObserver(callback);
    const config = {
      childList: true,
      subtree: true
    };
    this.observer.observe(targetNode, config);
  }
  async hideAttachmentFolders(recheckPreviouslyHiddenFolders) {
    if (recheckPreviouslyHiddenFolders) {
      document.querySelectorAll(".import-attach-hidden").forEach((folder) => {
        if (folder.parentElement) {
          folder.parentElement.style.height = "";
        }
        if (folder.parentElement) {
          folder.parentElement.style.overflow = "";
        }
        folder.removeClass(".import-attach-hidden");
      });
    }
    this.hideFolderNames.forEach((folderPattern) => {
      if (folderPattern === "")
        return;
      const folderElements = document.querySelectorAll(folderPattern);
      folderElements.forEach((folder) => {
        if (!folder || !folder.parentElement) {
          return;
        }
        folder.addClass("import-attach-hidden");
        folder.parentElement.style.height = this.settings.hideAttachmentFolders ? "0" : "";
        folder.parentElement.style.overflow = this.settings.hideAttachmentFolders ? "hidden" : "";
      });
    });
  }
  splitAroundOriginal(input, placeholder) {
    const firstIndex = input.indexOf(placeholder);
    if (firstIndex === -1) {
      return [input, ""];
    }
    const lastIndex = input.lastIndexOf(placeholder);
    const endOfPlaceholderIndex = lastIndex + placeholder.length;
    const beforeFirst = input.substring(0, firstIndex);
    const afterLast = input.substring(endOfPlaceholderIndex);
    return [beforeFirst, afterLast];
  }
  configureHideFolderNames() {
    const placeholder = "${notename}";
    if (this.settings.folderPath.includes(placeholder)) {
      const [startsWith, endsWith] = this.splitAroundOriginal(this.settings.folderPath, placeholder);
      if (endsWith != "") {
        this.hideFolderNames = [
          `[data-path$="${endsWith}"]`
        ];
      } else if (startsWith != "") {
        this.hideFolderNames = [
          `.nav-folder-title[data-path^="${startsWith}"], .nav-folder-title[data-path*="/${startsWith}"]`
        ];
      }
    } else {
      this.hideFolderNames = [
        `[data-path$="/${this.settings.folderPath}"], [data-path="${this.settings.folderPath}"]`
      ];
    }
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ImportAttachmentsSettingTab(this.app, this));
    this.setupObserver();
    patchOpenFile(this);
    addKeyListeners();
    this.addCommand({
      id: "move-file-to-vault-link",
      name: "Move File to Vault as Link",
      callback: () => this.chooseFileToImport({
        embed: false,
        action: "MOVE" /* MOVE */
      })
    });
    this.addCommand({
      id: "move-file-to-vault-embed",
      name: "Move File to Vault as Embedded",
      callback: () => this.chooseFileToImport({
        embed: true,
        action: "MOVE" /* MOVE */
      })
    });
    this.addCommand({
      id: "copy-file-to-vault-link",
      name: "Copy File to Vault as Link",
      callback: () => this.chooseFileToImport({
        embed: false,
        action: "COPY" /* COPY */
      })
    });
    this.addCommand({
      id: "copy-file-to-vault-embed",
      name: "Copy File to Vault as Embedded",
      callback: () => this.chooseFileToImport({
        embed: true,
        action: "COPY" /* COPY */
      })
    });
    this.addCommand({
      id: "open-attachments-folder",
      name: "Open Attachments Folder",
      callback: () => this.openAttachmentsFolder()
    });
    this.registerEvent(
      // check obsidian.d.ts for other types of events
      this.app.workspace.on("editor-drop", async (evt, editor, view) => {
        var _a;
        if (evt.defaultPrevented)
          return;
        if (!(view instanceof import_obsidian3.MarkdownView)) {
          console.error("No view provided");
          return;
        }
        const altKeyPressed2 = evt.altKey;
        if (altKeyPressed2) {
          return;
        } else {
          evt.preventDefault();
        }
        const doForceAsking = evt.shiftKey;
        const files = (_a = evt == null ? void 0 : evt.dataTransfer) == null ? void 0 : _a.files;
        if (files && files.length > 0) {
          await this.handleFiles(files, editor, view, doForceAsking, 1 /* DRAG_AND_DROP */);
        } else {
          console.error("No files dropped");
        }
      })
    );
    this.registerEvent(
      // check obsidian.d.ts for other types of events
      this.app.workspace.on("editor-paste", async (evt, editor, view) => {
        if (evt.defaultPrevented)
          return;
        if (!(view instanceof import_obsidian3.MarkdownView)) {
          console.error("No view provided");
          return;
        }
        const clipboardData = evt.clipboardData;
        if (clipboardData) {
          const files = clipboardData.files;
          if (files && files.length > 0) {
            evt.preventDefault();
            const doToggleEmbedPreference = false;
            await this.handleFiles(files, editor, view, doToggleEmbedPreference, 0 /* PASTE */);
          } else {
          }
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (newFile, oldPath) => {
        if (!this.settings.autoRenameAttachmentFolder) {
          return;
        }
        if (this.renameCallbackEnabled) {
          const oldPath_parsed = path4.parse(oldPath);
          if (oldPath_parsed.ext != ".md") {
            return;
          }
          const oldAttachmentFolderPath = this.getAttachmentFolder(oldPath_parsed);
          if (!oldAttachmentFolderPath) {
            return;
          }
          if (await checkDirectoryExists(oldAttachmentFolderPath.attachmentsFolderPath)) {
            const newAttachmentFolderPath = this.getAttachmentFolder(path4.parse(newFile.path));
            if (!newAttachmentFolderPath) {
              return;
            }
            const oldPath2 = path4.relative(this.vaultPath, oldAttachmentFolderPath.attachmentsFolderPath);
            const newPath = path4.relative(this.vaultPath, newAttachmentFolderPath.attachmentsFolderPath);
            try {
              this.renameCallbackEnabled = false;
              await this.renameFile(oldPath2, newPath);
            } catch (error) {
              const msg = "Failed to rename the attachment folder";
              console.error(msg);
              console.error("Original attachment folder:", oldPath2);
              console.error("New attachment folder:", newPath);
              console.error("Error msg:", error);
              new import_obsidian3.Notice(msg + ".");
            } finally {
              this.renameCallbackEnabled = true;
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!this.settings.autoDeleteAttachmentFolder) {
          return;
        }
        if (!this.settings.folderPath.includes("${notename}")) {
          return;
        }
        if (this.deleteCallbackEnabled) {
          const file_parsed = path4.parse(file.path);
          if (file_parsed.ext != ".md") {
            return;
          }
          const attachmentFolderPath = this.getAttachmentFolder(file_parsed);
          if (!attachmentFolderPath) {
            return;
          }
          if (await checkDirectoryExists(attachmentFolderPath.attachmentsFolderPath)) {
            const modal = new DeleteAttachmentFolderModal(this.app, this, attachmentFolderPath.attachmentsFolderPath);
            modal.open();
            const choice = await modal.promise;
            if (!choice)
              return;
            const filePath = path4.relative(this.vaultPath, attachmentFolderPath.attachmentsFolderPath);
            try {
              this.deleteCallbackEnabled = false;
              await this.trashFile(filePath);
            } catch (error) {
              const msg = "Failed to remove the attachment folder";
              console.error(msg + ":", filePath);
              console.error("Error msg:", error);
              new import_obsidian3.Notice(msg + ".");
            } finally {
              this.deleteCallbackEnabled = true;
            }
          }
        }
      })
    );
    console.log("Loaded plugin Import Attachments+");
  }
  onunload() {
    unpatchOpenFile();
    removeKeyListeners();
    if (this.observer) {
      this.observer.disconnect();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async renameFile(oldFilePath, newFilePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(oldFilePath);
      if (file instanceof import_obsidian3.TAbstractFile) {
        await this.app.fileManager.renameFile(file, newFilePath);
        new import_obsidian3.Notice("Attachment folder renamed successfully.");
      } else {
        new import_obsidian3.Notice("Attachment folder could not be found at the given location.");
      }
    } catch (error) {
      const msg = "Failed to rename file";
      console.error(msg + ":", error);
      new import_obsidian3.Notice(msg + ".");
    }
  }
  async trashFile(filePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian3.TAbstractFile) {
        await await this.app.vault.adapter.trashSystem(filePath);
        new import_obsidian3.Notice("Attachment folder moved to system trash successfully.");
      } else {
        new import_obsidian3.Notice("Attachment folder could not be found at the given location.");
      }
    } catch (error) {
      const msg = "Failed to rename file";
      console.error(msg + ":", error);
      new import_obsidian3.Notice(msg + ".");
    }
  }
  async handleFiles(files, editor, view, doForceAsking, importType) {
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath, currentNoteFolderPath } = attachmentsFolder;
    let actionFilesOnImport = "COPY" /* COPY */;
    let lastActionFilesOnImport = "COPY" /* COPY */;
    switch (importType) {
      case 1 /* DRAG_AND_DROP */:
        actionFilesOnImport = this.settings.actionDroppedFilesOnImport;
        lastActionFilesOnImport = this.settings.lastActionDroppedFilesOnImport;
        break;
      case 0 /* PASTE */:
        actionFilesOnImport = this.settings.actionPastedFilesOnImport;
        lastActionFilesOnImport = this.settings.lastActionPastedFilesOnImport;
        break;
    }
    let embedOption = this.settings.embedFilesOnImport;
    const lastEmbedOption = this.settings.lastEmbedFilesOnImport;
    if (doForceAsking || actionFilesOnImport == "ASK_USER" /* ASK_USER */ || embedOption == "ASK_USER" /* ASK_USER */) {
      const modal = new ImportActionTypeModal(this.app, this, lastActionFilesOnImport, lastEmbedOption);
      modal.open();
      const choice = await modal.promise;
      if (choice == null)
        return;
      actionFilesOnImport = choice.action;
      switch (importType) {
        case 1 /* DRAG_AND_DROP */:
          if (choice.rememberChoice) {
            this.settings.actionDroppedFilesOnImport = actionFilesOnImport;
          }
          this.settings.lastActionDroppedFilesOnImport = actionFilesOnImport;
          break;
        case 0 /* PASTE */:
          if (choice.rememberChoice) {
            this.settings.actionPastedFilesOnImport = actionFilesOnImport;
          }
          this.settings.lastActionPastedFilesOnImport = actionFilesOnImport;
          break;
      }
      embedOption = choice.embed;
      if (choice.rememberChoice) {
        this.settings.embedFilesOnImport = embedOption;
      }
      this.settings.lastEmbedFilesOnImport = embedOption;
      await this.saveSettings();
    }
    const doEmbed = embedOption == "YES" /* YES */;
    const importSettings = {
      embed: doEmbed,
      action: actionFilesOnImport
    };
    this.moveFileToAttachmentsFolder(files, attachmentsFolderPath, currentNoteFolderPath, editor, view, importSettings);
  }
  getAttachmentFolder(noteFilePath = null) {
    try {
      if (!noteFilePath) {
        noteFilePath = (() => {
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile == null) {
            throw new Error("The active note could not be determined.");
          }
          return path4.parse(activeFile.path);
        })();
      }
      if (!noteFilePath || noteFilePath.ext !== ".md") {
        throw new Error("No Markdown file was found.");
      }
      if (!this.vaultPath)
        return null;
      const noteFolderPath = path4.join(this.vaultPath, noteFilePath.dir);
      const notename = noteFilePath.name;
      let referencePath = "";
      switch (this.settings.relativeLocation) {
        case "VAULT" /* VAULT */:
          referencePath = this.vaultPath;
          break;
        case "SAME" /* SAME */:
          referencePath = noteFolderPath;
          break;
      }
      const relativePath = this.settings.folderPath.replace(/\$\{notename\}/g, notename);
      const attachmentsFolderPath = path4.join(referencePath, relativePath);
      return {
        attachmentsFolderPath,
        currentNoteFolderPath: noteFolderPath
      };
    } catch (error) {
      if (error instanceof Error) {
        console.error(error.message);
        new import_obsidian3.Notice(error.message);
      } else {
        console.error("An unknown error occurred:", error);
        new import_obsidian3.Notice("An unknown error occurred");
      }
      return null;
    }
  }
  async chooseFileToImport(importSettings) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    if (!editor) {
      const msg = "No active markdown editor found.";
      console.error(msg);
      new import_obsidian3.Notice(msg);
      return;
    }
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath, currentNoteFolderPath: referencePath } = attachmentsFolder;
    const input = document.createElement("input");
    input.type = "file";
    input.multiple = true;
    input.onchange = async (e) => {
      const target = e.target;
      const files = target.files;
      if (files && files.length > 0) {
        await this.moveFileToAttachmentsFolder(files, attachmentsFolderPath, referencePath, editor, markdownView, importSettings);
      } else {
        const msg = "No files selected or file access error.";
        console.error(msg);
        new import_obsidian3.Notice(msg);
      }
    };
    input.click();
  }
  async moveFileToAttachmentsFolder(filesToImport, attachmentsFolderPath, currentNoteFolderPath, editor, view, importSettings) {
    await ensureDirectoryExists(attachmentsFolderPath);
    const cursor = editor.getCursor();
    if (filesToImport.length > 1 && this.settings.multipleFilesImportType != "INLINE" /* INLINE */) {
      if (cursor.ch !== 0) {
        editor.replaceRange("\n", cursor);
        editor.setCursor({ line: cursor.line + 1, ch: 0 });
      }
    }
    const multipleFiles = filesToImport.length > 1;
    const tasks = Array.from(filesToImport).map(async (fileToImport) => {
      const originalFilePath = fileToImport.path;
      let destFilePath = path4.join(
        attachmentsFolderPath,
        await createAttachmentName(this.settings.attachmentName, this.settings.dateFormat, originalFilePath)
      );
      const existingFile = await checkFileExists(destFilePath);
      if (existingFile && await arePathsSameFile(originalFilePath, destFilePath)) {
        return destFilePath;
      }
      if (!this.vaultPath)
        return null;
      const inVault = await isFileInVault(this.vaultPath, originalFilePath);
      if (inVault) {
        const modal = new ImportFromVaultChoiceModal(this.app, this, this.vaultPath, inVault, importSettings.action);
        modal.open();
        const choice = await modal.promise;
        if (choice == null) {
          return null;
        }
        switch (choice) {
          case 2 /* SKIP */:
            return null;
            break;
          case 1 /* LINK */:
            importSettings.action = "LINK" /* LINK */;
            break;
          case 0 /* COPY */:
            importSettings.action = "COPY" /* COPY */;
            break;
        }
      }
      if (existingFile && importSettings.action != "LINK" /* LINK */) {
        const modal = new OverwriteChoiceModal(this.app, this, originalFilePath, destFilePath);
        modal.open();
        const choice = await modal.promise;
        if (choice == null) {
          return null;
        }
        switch (choice) {
          case 0 /* OVERWRITE */:
            break;
          case 1 /* KEEPBOTH */:
            destFilePath = await findNewFilename(destFilePath);
            if (destFilePath == null) {
              return null;
            }
            break;
          case 2 /* SKIP */:
            return null;
            break;
        }
      }
      try {
        switch (importSettings.action) {
          case "MOVE" /* MOVE */:
            await import_fs2.promises.rename(originalFilePath, destFilePath);
            return destFilePath;
          case "COPY" /* COPY */:
            await import_fs2.promises.copyFile(originalFilePath, destFilePath);
            return destFilePath;
          case "LINK" /* LINK */:
          default:
            return originalFilePath;
        }
      } catch (error) {
        const msg = "Failed to process the file";
        new import_obsidian3.Notice(msg + ".");
        console.error(msg + ":", originalFilePath, error);
        return null;
      }
    });
    const results = await Promise.all(tasks);
    const counter = 0;
    results.forEach((importedFilePath, index) => {
      if (importedFilePath) {
        this.insertLinkToEditor(currentNoteFolderPath, importedFilePath, editor, view, importSettings, multipleFiles ? index + 1 : 0);
      }
    });
    if (counter > 0) {
      let operation = "";
      switch (importSettings.action) {
        case "MOVE" /* MOVE */:
          operation = "Moved";
          break;
        case "COPY" /* COPY */:
          operation = "Copied";
          break;
      }
      new import_obsidian3.Notice(`${operation} successfully ${counter} files to the attachments folder.`);
    }
  }
  async openAttachmentsFolder() {
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath } = attachmentsFolder;
    if (!await checkDirectoryExists(attachmentsFolderPath)) {
      const msg = "This note does not have an attachment folder.";
      console.error(msg + ":", attachmentsFolderPath);
      new import_obsidian3.Notice(msg + ".");
    }
    const { shell } = require("electron");
    shell.openPath(attachmentsFolder.attachmentsFolderPath);
  }
  insertLinkToEditor(currentNoteFolderPath, importedFilePath, editor, view, importSettings, counter) {
    const filename = getFilename(importedFilePath);
    let relativePath;
    switch (this.settings.linkFormat) {
      case "RELATIVE" /* RELATIVE */:
        relativePath = path4.relative(currentNoteFolderPath, importedFilePath);
        break;
      case "ABSOLUTE" /* ABSOLUTE */:
      default:
        relativePath = path4.relative(this.vaultPath, importedFilePath);
        break;
    }
    let prefix = "";
    let postfix = "";
    let customDisplay = "";
    if (counter > 0) {
      switch (this.settings.multipleFilesImportType) {
        case "BULLETED" /* BULLETED */:
          prefix = "- ";
          postfix = "\n";
          break;
        case "NUMBERED" /* NUMBERED */:
          prefix = `${counter}. `;
          postfix = "\n";
          break;
        case "INLINE" /* INLINE */:
          if (counter > 1) {
            prefix = "\n\n";
          }
          break;
      }
    }
    if (this.settings.customDisplayText) {
      customDisplay = "|" + filename;
    }
    if (importSettings.embed) {
      prefix = prefix + "!";
    }
    const linkText = prefix + "[[" + relativePath + customDisplay + "]]" + postfix;
    const cursor = editor.getCursor();
    editor.replaceRange(linkText, cursor);
    if (counter == 0) {
      if (this.settings.customDisplayText) {
        const startCursorPos = {
          line: cursor.line,
          ch: cursor.ch + relativePath.length + prefix.length + 3
        };
        const endCursorPos = {
          line: cursor.line,
          ch: startCursorPos.ch + filename.length
        };
        editor.setSelection(startCursorPos, endCursorPos);
      } else {
        const newCursorPos = {
          line: cursor.line,
          ch: cursor.ch + linkText.length
        };
        editor.setCursor(newCursorPos);
      }
    } else {
      const newCursorPos = {
        line: cursor.line,
        ch: cursor.ch + linkText.length
      };
      editor.setCursor(newCursorPos);
    }
  }
};
var ImportAttachmentsSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for Import Attachments+ Plugin" });
    containerEl.createEl("h3", { text: "Import options" });
    new import_obsidian3.Setting(containerEl).setName("Whether to move or copy files that are drag-and-dropped?").setDesc("Choose whether files that are dragged and dropped into the editor should be moved or copied. Alternatively, the user is asked each time. By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("MOVE" /* MOVE */, "Move");
      dropdown.addOption("COPY" /* COPY */, "Copy");
      dropdown.setValue(this.plugin.settings.actionDroppedFilesOnImport).onChange(async (value) => {
        if (value in ImportActionType) {
          this.plugin.settings.actionDroppedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastActionDroppedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid import action type:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Whether to move or copy files that are copy-and-pasted?").setDesc("Choose whether files that are copy and pasted into the editor should be moved or copied. Alternatively, the user is asked each time.  By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("MOVE" /* MOVE */, "Move");
      dropdown.addOption("COPY" /* COPY */, "Copy");
      dropdown.setValue(this.plugin.settings.actionPastedFilesOnImport).onChange(async (value) => {
        if (value in ImportActionType) {
          this.plugin.settings.actionPastedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastActionPastedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid import action type:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Embed imported documents:").setDesc("If this option is enabled, the files are imported as an embedded document; if it is deactivated, they are imported as a linked document.  By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("YES" /* YES */, "Yes");
      dropdown.addOption("NO" /* NO */, "No");
      dropdown.setValue(this.plugin.settings.embedFilesOnImport).onChange(async (value) => {
        if (Object.values(YesNoTypes).includes(value)) {
          this.plugin.settings.embedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastEmbedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Import multiple files as:").setDesc("Choose how to import multiple files: as a bulleted list, as a numbered list, or inline without using lists.").addDropdown((dropdown) => {
      dropdown.addOption("BULLETED" /* BULLETED */, "Bulleted list");
      dropdown.addOption("NUMBERED" /* NUMBERED */, "Numbered list");
      dropdown.addOption("INLINE" /* INLINE */, "Inline");
      dropdown.setValue(this.plugin.settings.multipleFilesImportType).onChange(async (value) => {
        if (Object.values(MultipleFilesImportTypes).includes(value)) {
          this.plugin.settings.multipleFilesImportType = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Insert display text for links based on filename:").setDesc("If this option is enabled, the basename of the imported document is used as in place of the custom display text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.customDisplayText).onChange(async (value) => {
      this.plugin.settings.customDisplayText = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Attachment folder configuration" });
    new import_obsidian3.Setting(containerEl).setName("Default location for new attachments:").setDesc("The reference folder for importing new attachments.").addDropdown((dropdown) => {
      dropdown.addOption("VAULT" /* VAULT */, "Vault folder");
      dropdown.addOption("SAME" /* SAME */, "Same folder as current file");
      dropdown.setValue(this.plugin.settings.relativeLocation).onChange(async (value) => {
        if (Object.values(RelativeLocation).includes(value)) {
          this.plugin.settings.relativeLocation = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Attachment folder where to import new attachments, relative to the default location:").setDesc("Where newly created notes are placed. Use ${notename} as a placeholder for the name of the note.").addText((text) => {
      text.setPlaceholder("Enter folder path");
      text.setValue(this.plugin.settings.folderPath);
      text.onChange(async (value) => {
        this.plugin.settings.folderPath = value;
        await this.plugin.saveSettings();
        this.plugin.configureHideFolderNames();
        await this.plugin.hideAttachmentFolders(true);
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Attachment link format:").setDesc("What types of links to use for the imported attachments.").addDropdown((dropdown) => {
      dropdown.addOption("RELATIVE" /* RELATIVE */, "With respect to the note's path (relative path)");
      dropdown.addOption("ABSOLUTE" /* ABSOLUTE */, "With respect to the vault's path (absolute path)");
      dropdown.setValue(this.plugin.settings.linkFormat).onChange(async (value) => {
        if (Object.values(LinkFormat).includes(value)) {
          this.plugin.settings.linkFormat = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Name of the imported attachments:").setDesc(createFragment((frag) => {
      frag.appendText("Choose how to name the imported attachments, using the following variables as a placeholder:");
      frag.createEl("ul").createEl("li", { text: "${original} for the name of the original file" }).createEl("li", { text: "${date} for the current date" }).createEl("li", { text: "${uuid} for a 128-bit Universally Unique Identifier" }).createEl("li", { text: "${md5} for a MD5 hash of the imported file" });
    })).addText((text) => {
      text.setPlaceholder("Enter attachment name");
      text.setValue(this.plugin.settings.attachmentName);
      text.onChange(async (value) => {
        if (value.trim() == "") {
          value = "${original}";
        }
        this.plugin.settings.attachmentName = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Date format:").setDesc(createFragment((frag) => {
      frag.appendText("Choose the date format, based on ");
      frag.createEl("a", {
        href: "https://momentjscom.readthedocs.io/en/latest/moment/04-displaying/01-format",
        text: "momentjs"
      });
      frag.appendText(" syntax.");
    })).addText((text) => {
      text.setPlaceholder("Enter date format");
      text.setValue(this.plugin.settings.dateFormat);
      text.onChange(async (value) => {
        this.plugin.settings.dateFormat = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: "Attachment opening" });
    let key;
    const os = navigator.platform.toUpperCase();
    if (os.includes("MAC")) {
      key = "\u2318";
    } else {
      key = "Ctrl";
    }
    new import_obsidian3.Setting(containerEl).setName("Open attachment with default external application:").setDesc(`If this option is enabled, when you open an attachment by holding ${key}, the attachment opens in default external application.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.openAttachmentExternal).onChange(async (value) => {
      this.plugin.settings.openAttachmentExternal = value;
      await this.plugin.saveSettings();
    }));
    if (os.includes("MAC")) {
      key = "\u2318+\u2325";
    } else {
      key = "Ctrl+Alt";
    }
    new import_obsidian3.Setting(containerEl).setName("Reveal attachment in system's file manager:").setDesc(`If this option is enabled, when you open an attachment by holding ${key}, the attachment is shown in the system's file manager.`).addToggle((toggle) => toggle.setValue(this.plugin.settings.revealAttachment).onChange(async (value) => {
      this.plugin.settings.revealAttachment = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Attachment management" });
    new import_obsidian3.Setting(containerEl).setName("Rename the attachment folder automatically and update all links correspondingly:").setDesc("If this option is enabled, when you rename/move an note, if the renamed note has an attachment folder connected to it, 				its attachment folder is renamed/moved to a new name/location corresponding to the new name of the note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoRenameAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.autoRenameAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Delete the attachment folder automatically when the corresponding note is deleted:").setDesc("If this option is enabled, when you delete a note, if the deleted note has an attachment folder connected to it, 				its attachment folder will be deleted as well. 				Note: automatic deletion only works when the name of the attachment folder contains ${notename}.").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoDeleteAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.autoDeleteAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Ask confirmation before deleting the attachment folder:").setDesc("If enabled, the user is asked each time whether to delete the attachment folder.").addToggle((toggle) => toggle.setValue(this.plugin.settings.confirmDeleteAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.confirmDeleteAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Display of attachment folders" });
    new import_obsidian3.Setting(containerEl).setName("Hide attachment folders:").setDesc("If this option is enabled, the attachment folders will not be shown.").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideAttachmentFolders).onChange(async (value) => {
      this.plugin.settings.hideAttachmentFolders = value;
      await this.plugin.saveSettings();
      await this.plugin.hideAttachmentFolders(true);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vc3JjL0ltcG9ydEF0dGFjaG1lbnRzTW9kYWwudHMiLCAiLi4vLi4vc3JjL3R5cGVzLnRzIiwgIi4uLy4uL3NyYy91dGlscy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL25hdGl2ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzIiwgIi4uLy4uL3NyYy9wYXRjaE9wZW5GaWxlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8taW5mZXJyYWJsZS10eXBlcyAqL1xuaW1wb3J0IHtcblx0QXBwLFxuXHRNYXJrZG93blZpZXcsXG5cdE1hcmtkb3duRmlsZUluZm8sXG5cdEVkaXRvcixcblx0Tm90aWNlLFxuXHRGaWxlU3lzdGVtQWRhcHRlcixcblx0UGx1Z2luLFxuXHRQbHVnaW5TZXR0aW5nVGFiLFxuXHRTZXR0aW5nLFxuXHRUQWJzdHJhY3RGaWxlLFxuXHRQbHVnaW5NYW5pZmVzdCxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmltcG9ydCB7SW1wb3J0QWN0aW9uVHlwZU1vZGFsLCBPdmVyd3JpdGVDaG9pY2VNb2RhbCwgSW1wb3J0RnJvbVZhdWx0Q2hvaWNlTW9kYWwsIERlbGV0ZUF0dGFjaG1lbnRGb2xkZXJNb2RhbH0gZnJvbSAnLi9JbXBvcnRBdHRhY2htZW50c01vZGFsJztcbmltcG9ydCB7XG5cdFx0SW1wb3J0QWN0aW9uVHlwZSxcblx0XHRNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMsXG5cdFx0SW1wb3J0T3BlcmF0aW9uVHlwZSxcblx0XHRJbXBvcnRBdHRhY2htZW50c1NldHRpbmdzLFxuXHRcdEF0dGFjaG1lbnRGb2xkZXJQYXRoLFxuXHRcdEltcG9ydFNldHRpbmdzSW50ZXJmYWNlLFxuXHRcdE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMsXG5cdFx0SW1wb3J0RnJvbVZhdWx0T3B0aW9ucyxcblx0XHRZZXNOb1R5cGVzLFxuXHRcdFJlbGF0aXZlTG9jYXRpb24sXG5cdFx0TGlua0Zvcm1hdCxcblx0fSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gXCJ1dGlsc1wiO1xuaW1wb3J0IHsgUGFyc2VkUGF0aCB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnOyAgLy8gVGhpcyBpbXBvcnRzIHRoZSBwcm9taXNlcyBBUEkgZnJvbSBmc1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsgICAgICAgICAvLyBTdGFuZGFyZCBpbXBvcnQgZm9yIHRoZSBwYXRoIG1vZHVsZVxuXG5pbXBvcnQge3BhdGNoT3BlbkZpbGUsIHVucGF0Y2hPcGVuRmlsZSwgYWRkS2V5TGlzdGVuZXJzLCByZW1vdmVLZXlMaXN0ZW5lcnN9IGZyb20gJ3BhdGNoT3BlbkZpbGUnO1xuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBJbXBvcnRBdHRhY2htZW50c1NldHRpbmdzID0ge1xuXHRhY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgLy8gRGVmYXVsdCB0byBhc2tpbmcgdGhlIHVzZXJcblx0YWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgLy8gRGVmYXVsdCB0byBhc2tpbmcgdGhlIHVzZXJcblx0ZW1iZWRGaWxlc09uSW1wb3J0OiBZZXNOb1R5cGVzLkFTS19VU0VSLCAvLyBEZWZhdWx0IHRvIGxpbmtpbmcgZmlsZXNcblx0bGFzdEFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGUuQ09QWSwgLy8gRGVmYXVsdCB0byBjb3B5aW5nIGZpbGVzXG5cdGxhc3RBY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5DT1BZLCAvLyBEZWZhdWx0IHRvIGNvcHlpbmcgZmlsZXNcblx0bGFzdEVtYmVkRmlsZXNPbkltcG9ydDogWWVzTm9UeXBlcy5OTywgLy8gRGVmYXVsdCB0byBsaW5raW5nXG5cdG11bHRpcGxlRmlsZXNJbXBvcnRUeXBlOiBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuQlVMTEVURUQsIC8vIERlZmF1bHQgdG8gYnVsbGV0ZWQgbGlzdCB3aGVuIGltcG9ydGluZyBtdWx0aXBsZSBmaWxlc1xuXHRyZWxhdGl2ZUxvY2F0aW9uOiBSZWxhdGl2ZUxvY2F0aW9uLlNBTUUsIC8vIERlZmF1bHQgdG8gdmF1bHRcblx0Zm9sZGVyUGF0aDogJyR7bm90ZW5hbWV9IChhdHRhY2htZW50cyknLCAvLyBEZWZhdWx0IHRvIGEgZm9sZGVyIGluIHRoZSB2YXVsdFxuXHRsaW5rRm9ybWF0OiBMaW5rRm9ybWF0LlJFTEFUSVZFLFxuXHRhdHRhY2htZW50TmFtZTogJyR7b3JpZ2luYWx9JywgLy8gRGVmYXVsdCB0byB0aGUgb3JpZ2luYWwgbmFtZSBvZiB0aGUgYXR0YWNobWVudFxuXHRkYXRlRm9ybWF0OiAnWVlZWV9NTV9ERFRISF9tbV9zcycsXG5cdGN1c3RvbURpc3BsYXlUZXh0OiB0cnVlLCAgLy8gRGVmYXVsdCB0byB0cnVlXG5cdGF1dG9SZW5hbWVBdHRhY2htZW50Rm9sZGVyOiB0cnVlLCAvLyBEZWZhdWx0IHRvIHRydWVcblx0YXV0b0RlbGV0ZUF0dGFjaG1lbnRGb2xkZXI6IHRydWUsIC8vIERlZmF1bHQgdG8gdHJ1ZVxuXHRjb25maXJtRGVsZXRlQXR0YWNobWVudEZvbGRlcjogdHJ1ZSwgLy8gRGVmYXVsdCB0byB0cnVlXG5cdGhpZGVBdHRhY2htZW50Rm9sZGVyczogdHJ1ZSwgLy8gRGVmYXVsdCB0byB0cnVlXG5cdHJldmVhbEF0dGFjaG1lbnQ6IHRydWUsIC8vIERlZmF1bHQgdG8gdHJ1ZVxuXHRvcGVuQXR0YWNobWVudEV4dGVybmFsOiB0cnVlLCAvLyBEZWZhdWx0IHRvIHRydWVcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltcG9ydEF0dGFjaG1lbnRzIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEltcG9ydEF0dGFjaG1lbnRzU2V0dGluZ3MgPSB7Li4uREVGQVVMVF9TRVRUSU5HU307XG5cdHZhdWx0UGF0aDogc3RyaW5nO1xuXHRwcml2YXRlIHJlbmFtZUNhbGxiYWNrRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG5cdHByaXZhdGUgZGVsZXRlQ2FsbGJhY2tFbmFibGVkOiBib29sZWFuID0gdHJ1ZTtcblx0cHJpdmF0ZSBvYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGhpZGVGb2xkZXJOYW1lcyA6IEFycmF5PHN0cmluZz4gPSBbXTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbWFuaWZlc3Q6IFBsdWdpbk1hbmlmZXN0KSB7XG5cdFx0c3VwZXIoYXBwLCBtYW5pZmVzdCk7XG5cblx0XHQvLyBzdG9yZSB0aGUgdmF1bHQgcGF0aFxuXHRcdGNvbnN0IGFkYXB0ZXIgPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyO1xuXHRcdGlmICghKGFkYXB0ZXIgaW5zdGFuY2VvZiBGaWxlU3lzdGVtQWRhcHRlcikpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRoZSB2YXVsdCBmb2xkZXIgY291bGQgbm90IGJlIGRldGVybWluZWQuXCIpO1xuXHRcdH1cblx0XHR0aGlzLnZhdWx0UGF0aCA9IGFkYXB0ZXIuZ2V0QmFzZVBhdGgoKTtcblx0fVxuXG5cdHNldHVwT2JzZXJ2ZXIoKSB7XG5cdFx0dGhpcy5jb25maWd1cmVIaWRlRm9sZGVyTmFtZXMoKTtcblxuXHRcdGNvbnN0IGNhbGxiYWNrOiBNdXRhdGlvbkNhbGxiYWNrID0gKG11dGF0aW9uc0xpc3QsIG9ic2VydmVyKSA9PiB7XG5cdFx0XHRtdXRhdGlvbnNMaXN0LmZvckVhY2gocmVjb3JkID0+IHtcblx0XHRcdFx0aWYocmVjb3JkLnRhcmdldD8ucGFyZW50RWxlbWVudD8uY2xhc3NMaXN0LmNvbnRhaW5zKFwibmF2LWZvbGRlclwiKSkge1xuXHRcdFx0XHRcdHRoaXMuaGlkZUF0dGFjaG1lbnRGb2xkZXJzKCk7XG5cdFx0XHR9fSk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHRhcmdldE5vZGUgPSBkb2N1bWVudC5ib2R5OyAvLyBPciBhbnkgc3BlY2lmaWMgZWxlbWVudCB5b3UncmUgaW50ZXJlc3RlZCBpblxuXG5cdFx0dGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcblxuXHRcdGNvbnN0IGNvbmZpZyA9IHtcblx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdHN1YnRyZWU6IHRydWUsXG5cdFx0fTtcblxuXHRcdHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXROb2RlLCBjb25maWcpO1xuXHR9XG5cblx0YXN5bmMgaGlkZUF0dGFjaG1lbnRGb2xkZXJzKHJlY2hlY2tQcmV2aW91c2x5SGlkZGVuRm9sZGVycz86IGJvb2xlYW4pIHtcblx0XHRpZiAocmVjaGVja1ByZXZpb3VzbHlIaWRkZW5Gb2xkZXJzKSB7XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmltcG9ydC1hdHRhY2gtaGlkZGVuXCIpLmZvckVhY2goKGZvbGRlcikgPT4ge1xuXHRcdFx0XHRpZihmb2xkZXIucGFyZW50RWxlbWVudCl7IGZvbGRlci5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9IFwiXCIgfVxuXHRcdFx0XHRpZihmb2xkZXIucGFyZW50RWxlbWVudCl7IGZvbGRlci5wYXJlbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJcIiB9XG5cdFx0XHRcdGZvbGRlci5yZW1vdmVDbGFzcyhcIi5pbXBvcnQtYXR0YWNoLWhpZGRlblwiKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuaGlkZUZvbGRlck5hbWVzLmZvckVhY2goZm9sZGVyUGF0dGVybiA9PiB7XG5cdFx0XHRpZihmb2xkZXJQYXR0ZXJuID09PSBcIlwiKSByZXR1cm47XG5cdFx0XHRjb25zdCBmb2xkZXJFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZm9sZGVyUGF0dGVybik7XG5cdFx0XHRcblx0XHRcdGZvbGRlckVsZW1lbnRzLmZvckVhY2goKGZvbGRlcikgPT4ge1xuXHRcdFx0XHRpZiAoIWZvbGRlciB8fCAhZm9sZGVyLnBhcmVudEVsZW1lbnQpIHtcdHJldHVybjsgfVxuXHRcdFx0XHRcblx0XHRcdFx0Zm9sZGVyLmFkZENsYXNzKFwiaW1wb3J0LWF0dGFjaC1oaWRkZW5cIik7XG5cdFx0XHRcdGZvbGRlci5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzID8gXCIwXCIgOiBcIlwiO1xuXHRcdFx0XHRmb2xkZXIucGFyZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IHRoaXMuc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzID8gXCJoaWRkZW5cIiA6IFwiXCI7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHNwbGl0QXJvdW5kT3JpZ2luYWwoaW5wdXQ6IHN0cmluZywgcGxhY2Vob2xkZXI6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZ10ge1xuXHRcdC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIHRoZSBwbGFjZWhvbGRlclxuXHRcdGNvbnN0IGZpcnN0SW5kZXggPSBpbnB1dC5pbmRleE9mKHBsYWNlaG9sZGVyKTtcblxuXHRcdC8vIElmIHRoZSBwbGFjZWhvbGRlciBpcyBub3QgZm91bmQsIHJldHVybiB0aGUgd2hvbGUgc3RyaW5nIGFzIHRoZSBmaXJzdCBwYXJ0IGFuZCBhbiBlbXB0eSBzdHJpbmcgYXMgdGhlIHNlY29uZCBwYXJ0XG5cdFx0aWYgKGZpcnN0SW5kZXggPT09IC0xKSB7XG5cdFx0XHRyZXR1cm4gW2lucHV0LCBcIlwiXTtcblx0XHR9XG5cblx0XHQvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIHRoZSBwbGFjZWhvbGRlclxuXHRcdGNvbnN0IGxhc3RJbmRleCA9IGlucHV0Lmxhc3RJbmRleE9mKHBsYWNlaG9sZGVyKTtcblxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgc3RhcnRpbmcgaW5kZXggb2YgdGhlIHRleHQgYWZ0ZXIgdGhlIHBsYWNlaG9sZGVyXG5cdFx0Y29uc3QgZW5kT2ZQbGFjZWhvbGRlckluZGV4ID0gbGFzdEluZGV4ICsgcGxhY2Vob2xkZXIubGVuZ3RoO1xuXG5cdFx0Ly8gRXh0cmFjdCB0aGUgcGFydHMgYmVmb3JlIHRoZSBmaXJzdCBvY2N1cnJlbmNlIGFuZCBhZnRlciB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIHRoZSBwbGFjZWhvbGRlclxuXHRcdGNvbnN0IGJlZm9yZUZpcnN0ID0gaW5wdXQuc3Vic3RyaW5nKDAsIGZpcnN0SW5kZXgpO1xuXHRcdGNvbnN0IGFmdGVyTGFzdCA9IGlucHV0LnN1YnN0cmluZyhlbmRPZlBsYWNlaG9sZGVySW5kZXgpO1xuXG5cdFx0cmV0dXJuIFtiZWZvcmVGaXJzdCwgYWZ0ZXJMYXN0XTtcblx0fVxuXG5cdGNvbmZpZ3VyZUhpZGVGb2xkZXJOYW1lcygpIHtcblx0XHRjb25zdCBwbGFjZWhvbGRlciA9IFwiJHtub3RlbmFtZX1cIjtcblx0XHRpZih0aGlzLnNldHRpbmdzLmZvbGRlclBhdGguaW5jbHVkZXMocGxhY2Vob2xkZXIpKSB7XG5cdFx0XHRjb25zdCBbc3RhcnRzV2l0aCwgZW5kc1dpdGhdID0gdGhpcy5zcGxpdEFyb3VuZE9yaWdpbmFsKHRoaXMuc2V0dGluZ3MuZm9sZGVyUGF0aCxwbGFjZWhvbGRlcik7XG5cdFx0XHRpZihlbmRzV2l0aCE9XCJcIikge1xuXHRcdFx0XHR0aGlzLmhpZGVGb2xkZXJOYW1lcyA9IFtcblx0XHRcdFx0XHRcdGBbZGF0YS1wYXRoJD1cIiR7ZW5kc1dpdGh9XCJdYFxuXHRcdFx0XHRcdF07XG5cdFx0XHR9IGVsc2UgaWYoc3RhcnRzV2l0aCE9XCJcIikge1xuXHRcdFx0XHR0aGlzLmhpZGVGb2xkZXJOYW1lcyA9IFtcblx0XHRcdFx0XHRcdGAubmF2LWZvbGRlci10aXRsZVtkYXRhLXBhdGhePVwiJHtzdGFydHNXaXRofVwiXSwgLm5hdi1mb2xkZXItdGl0bGVbZGF0YS1wYXRoKj1cIi8ke3N0YXJ0c1dpdGh9XCJdYFxuXHRcdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuaGlkZUZvbGRlck5hbWVzID0gW1xuXHRcdFx0XHRgW2RhdGEtcGF0aCQ9XCIvJHt0aGlzLnNldHRpbmdzLmZvbGRlclBhdGh9XCJdLCBbZGF0YS1wYXRoPVwiJHt0aGlzLnNldHRpbmdzLmZvbGRlclBhdGh9XCJdYFxuXHRcdFx0XHRdO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHQvLyBMb2FkIGFuZCBhZGQgc2V0dGluZ3MgdGFiXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEltcG9ydEF0dGFjaG1lbnRzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0Ly8gc2V0IHVwIHRoZSBtdXRhdGlvbiBvYnNlcnZlciBmb3IgaGlkaW5nIGZvbGRlcnNcblx0XHR0aGlzLnNldHVwT2JzZXJ2ZXIoKTtcblxuXHRcdC8vIG1vbmtleSBwYXRjaCBvZiB0aGUgb3BlbkZpbGUgZnVuY3Rpb25cblx0XHRwYXRjaE9wZW5GaWxlKHRoaXMpO1xuXHRcdC8vIGFkZCBrZXkgbGlzdGVuZXJzIGZvciBtb2RpZnlpbmcgdGhlIGJlaGF2aW9yIHdoZW4gb3BlbmluZyBmaWxlc1xuICAgICAgICBhZGRLZXlMaXN0ZW5lcnMoKTtcblxuXHRcdC8vIENvbW1hbmQgZm9yIGltcG9ydGluZyBhcyBhIHN0YW5kYXJkIGxpbmtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwibW92ZS1maWxlLXRvLXZhdWx0LWxpbmtcIixcblx0XHRcdG5hbWU6IFwiTW92ZSBGaWxlIHRvIFZhdWx0IGFzIExpbmtcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmNob29zZUZpbGVUb0ltcG9ydCh7XG5cdFx0XHRcdGVtYmVkOiBmYWxzZSxcblx0XHRcdFx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlLk1PVkUsXG5cdFx0XHR9KSxcblx0XHR9KTtcblxuXHRcdC8vIENvbW1hbmQgZm9yIGltcG9ydGluZyBhcyBhbiBlbWJlZGRlZCBpbWFnZS9saW5rXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm1vdmUtZmlsZS10by12YXVsdC1lbWJlZFwiLFxuXHRcdFx0bmFtZTogXCJNb3ZlIEZpbGUgdG8gVmF1bHQgYXMgRW1iZWRkZWRcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmNob29zZUZpbGVUb0ltcG9ydCh7XG5cdFx0XHRcdGVtYmVkOiB0cnVlLFxuXHRcdFx0XHRhY3Rpb246IEltcG9ydEFjdGlvblR5cGUuTU9WRSxcblx0XHRcdH0pLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ29tbWFuZCBmb3IgaW1wb3J0aW5nIGFzIGEgc3RhbmRhcmQgbGlua1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJjb3B5LWZpbGUtdG8tdmF1bHQtbGlua1wiLFxuXHRcdFx0bmFtZTogXCJDb3B5IEZpbGUgdG8gVmF1bHQgYXMgTGlua1wiLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuY2hvb3NlRmlsZVRvSW1wb3J0KHtcblx0XHRcdFx0ZW1iZWQ6IGZhbHNlLFxuXHRcdFx0XHRhY3Rpb246IEltcG9ydEFjdGlvblR5cGUuQ09QWSxcblx0XHRcdH0pLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ29tbWFuZCBmb3IgaW1wb3J0aW5nIGFzIGFuIGVtYmVkZGVkIGltYWdlL2xpbmtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiY29weS1maWxlLXRvLXZhdWx0LWVtYmVkXCIsXG5cdFx0XHRuYW1lOiBcIkNvcHkgRmlsZSB0byBWYXVsdCBhcyBFbWJlZGRlZFwiLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHRoaXMuY2hvb3NlRmlsZVRvSW1wb3J0KHtcblx0XHRcdFx0ZW1iZWQ6IHRydWUsXG5cdFx0XHRcdGFjdGlvbjogSW1wb3J0QWN0aW9uVHlwZS5DT1BZLFxuXHRcdFx0fSksXG5cdFx0fSk7XG5cblx0XHQvLyBSZWdpc3RlciB0aGUgY29tbWFuZCB0byBvcGVuIHRoZSBhdHRhY2htZW50cyBmb2xkZXJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwib3Blbi1hdHRhY2htZW50cy1mb2xkZXJcIixcblx0XHRcdG5hbWU6IFwiT3BlbiBBdHRhY2htZW50cyBGb2xkZXJcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5BdHRhY2htZW50c0ZvbGRlcigpLFxuXHRcdH0pO1xuXG5cdFx0Lypcblx0XHQvLyBUaGUgY29kZSBiZWxvdyBoYW5kbGVzIGBkcm9wYCBldmVudHMgbWFudWFsbHlcblx0XHQvL1xuXHRcdC8vIFNldCB1cCB0aGUgZXZlbnQgbGlzdGVuZXJcblx0XHRjb25zdCBkcm9wSGFuZGxlciA9IChldmVudDogRHJhZ0V2ZW50KSA9PiB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdGNvbnN0IGZpbGVzID0gZXZlbnQ/LmRhdGFUcmFuc2Zlcj8uZmlsZXM7XG5cdFx0XHRpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ05vIGZpbGVzIGRyb3BwZWQnKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdC8vIEFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGRvY3VtZW50IGJvZHlcblx0XHRkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBkcm9wSGFuZGxlcik7XG5cdFx0Ly8gRW5zdXJlIHRoZSBldmVudCBsaXN0ZW5lciBpcyByZW1vdmVkIHdoZW4gdGhlIHBsdWdpbiBpcyB1bmxvYWRlZFxuXHRcdHRoaXMucmVnaXN0ZXIoKCkgPT4gZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgZHJvcEhhbmRsZXIpKTtcblx0XHQqL1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0Ly8gY2hlY2sgb2JzaWRpYW4uZC50cyBmb3Igb3RoZXIgdHlwZXMgb2YgZXZlbnRzXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1kcm9wJywgYXN5bmMgKGV2dDogRHJhZ0V2ZW50LCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3IHwgTWFya2Rvd25GaWxlSW5mbykgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiB0aGUgZXZlbnQgaGFzIGFscmVhZHkgYmVlbiBoYW5kbGVkXG5cdFx0XHRcdGlmIChldnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXG5cdFx0XHRcdGlmICghKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignTm8gdmlldyBwcm92aWRlZCcpXHRcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGFsdEtleVByZXNzZWQgPSBldnQuYWx0S2V5OyAvLyBDaGVjayBpZiBTaGlmdCB3YXMgcHJlc3NlZFxuXHRcdFx0XHRpZihhbHRLZXlQcmVzc2VkKSB7IFxuXHRcdFx0XHRcdC8vIEZvbGxvdyBzdGFuZGFyZCBiZWhhdmlvciB3aGVyZSBhIGxpbmsgdG8gdGhlIGV4dGVybmFsIGZpbGUgaXMgY3JlYXRlZFxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBQcmV2ZW50IG90aGVyIGhhbmRsZXJzIGZyb20gZXhlY3V0aW5nXG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBkb0ZvcmNlQXNraW5nID0gZXZ0LnNoaWZ0S2V5OyAvLyBDaGVjayBpZiBTaGlmdCB3YXMgcHJlc3NlZFxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBkcm9wcGVkIGZpbGVzXG5cdFx0XHRcdGNvbnN0IGZpbGVzID0gZXZ0Py5kYXRhVHJhbnNmZXI/LmZpbGVzO1xuXHRcdFx0XHRpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuaGFuZGxlRmlsZXMoZmlsZXMsIGVkaXRvciwgdmlldywgZG9Gb3JjZUFza2luZywgSW1wb3J0T3BlcmF0aW9uVHlwZS5EUkFHX0FORF9EUk9QKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdObyBmaWxlcyBkcm9wcGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdC8vIGNoZWNrIG9ic2lkaWFuLmQudHMgZm9yIG90aGVyIHR5cGVzIG9mIGV2ZW50c1xuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItcGFzdGUnLCBhc3luYyAoZXZ0OiBDbGlwYm9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldyB8IE1hcmtkb3duRmlsZUluZm8pID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZFxuXHRcdFx0XHRpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuXHRcdFx0XHRpZiAoISh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ05vIHZpZXcgcHJvdmlkZWQnKVx0XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgY2xpcGJvYXJkRGF0YSA9IGV2dC5jbGlwYm9hcmREYXRhO1xuXHRcdFx0XHRpZiAoY2xpcGJvYXJkRGF0YSkge1xuXHRcdFx0XHRcdGNvbnN0IGZpbGVzID0gY2xpcGJvYXJkRGF0YS5maWxlcztcblx0XHRcdFx0XHQvLyBjb25zdCBpdGVtcyA9IGNsaXBib2FyZERhdGEuaXRlbXM7XG5cblx0XHRcdFx0XHRpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaWxlc1xuXHRcdFx0XHRcdFx0Y29uc3QgZG9Ub2dnbGVFbWJlZFByZWZlcmVuY2UgPSBmYWxzZTsgLy8gUHJldGVuZCBzaGlmdCB3YXMgbm90IHByZXNzZWRcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuaGFuZGxlRmlsZXMoZmlsZXMsIGVkaXRvciwgdmlldywgZG9Ub2dnbGVFbWJlZFByZWZlcmVuY2UsIEltcG9ydE9wZXJhdGlvblR5cGUuUEFTVEUpO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIGNvbnNvbGUuZXJyb3IoXCJObyBmaWxlcyBkZXRlY3RlZCBpbiBwYXN0ZSBkYXRhLlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCBhc3luYyAobmV3RmlsZTogVEFic3RyYWN0RmlsZSwgb2xkUGF0aDogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGlmKCF0aGlzLnNldHRpbmdzLmF1dG9SZW5hbWVBdHRhY2htZW50Rm9sZGVyKSB7IHJldHVybiB9XG5cblx0XHRcdFx0aWYodGhpcy5yZW5hbWVDYWxsYmFja0VuYWJsZWQpIHtcblx0XHRcdFx0XHRjb25zdCBvbGRQYXRoX3BhcnNlZCA9IHBhdGgucGFyc2Uob2xkUGF0aCk7XG5cdFx0XHRcdFx0aWYob2xkUGF0aF9wYXJzZWQuZXh0ICE9IFwiLm1kXCIpIHsgcmV0dXJuIH1cblxuXHRcdFx0XHRcdGNvbnN0IG9sZEF0dGFjaG1lbnRGb2xkZXJQYXRoID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKG9sZFBhdGhfcGFyc2VkKTtcblx0XHRcdFx0XHRpZighb2xkQXR0YWNobWVudEZvbGRlclBhdGgpIHsgcmV0dXJuIH1cblx0XG5cdFx0XHRcdFx0aWYoYXdhaXQgVXRpbHMuY2hlY2tEaXJlY3RvcnlFeGlzdHMob2xkQXR0YWNobWVudEZvbGRlclBhdGguYXR0YWNobWVudHNGb2xkZXJQYXRoKSkge1xuXHRcblx0XHRcdFx0XHRcdGNvbnN0IG5ld0F0dGFjaG1lbnRGb2xkZXJQYXRoID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKHBhdGgucGFyc2UobmV3RmlsZS5wYXRoKSk7XG5cdFx0XHRcdFx0XHRpZighbmV3QXR0YWNobWVudEZvbGRlclBhdGgpIHsgcmV0dXJuIH1cblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkUGF0aCA9IHBhdGgucmVsYXRpdmUodGhpcy52YXVsdFBhdGgsb2xkQXR0YWNobWVudEZvbGRlclBhdGguYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoLnJlbGF0aXZlKHRoaXMudmF1bHRQYXRoLG5ld0F0dGFjaG1lbnRGb2xkZXJQYXRoLmF0dGFjaG1lbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmFtZUNhbGxiYWNrRW5hYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnJlbmFtZUZpbGUob2xkUGF0aCxuZXdQYXRoKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1zZyA9ICdGYWlsZWQgdG8gcmVuYW1lIHRoZSBhdHRhY2htZW50IGZvbGRlcic7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IobXNnKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIk9yaWdpbmFsIGF0dGFjaG1lbnQgZm9sZGVyOlwiLG9sZFBhdGgpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTmV3IGF0dGFjaG1lbnQgZm9sZGVyOlwiLG5ld1BhdGgpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbXNnOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UobXNnKycuJyk7XG5cdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmFtZUNhbGxiYWNrRW5hYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5vbihcImRlbGV0ZVwiLCBhc3luYyAoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xuXHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5hdXRvRGVsZXRlQXR0YWNobWVudEZvbGRlcikgeyByZXR1cm4gfVxuXHRcdFxuXHRcdFx0XHQvLyBhdXRvbWF0aWMgZGVsZXRpb24gb25seSB3b3JrcyB3aGVuIHRoZSBhdHRhY2htZW50IG5hbWUgY29udGFpbnMgJHtub3RlbmFtZX1cblx0XHRcdFx0Ly8gaW4gb3JkZXIgdG8gYXZvaWQgZGVsZXRpbmcgY29tbW9uIGF0dGFjaG1lbnQgZm9sZGVyLCBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBub3Rlc1xuXHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5mb2xkZXJQYXRoLmluY2x1ZGVzKCcke25vdGVuYW1lfScpKSB7IHJldHVybiB9XG5cblx0XHRcdFx0aWYodGhpcy5kZWxldGVDYWxsYmFja0VuYWJsZWQpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlX3BhcnNlZCA9IHBhdGgucGFyc2UoZmlsZS5wYXRoKTtcblx0XHRcdFx0XHRpZihmaWxlX3BhcnNlZC5leHQgIT0gXCIubWRcIikgeyByZXR1cm4gfVxuXG5cdFx0XHRcdFx0Y29uc3QgYXR0YWNobWVudEZvbGRlclBhdGggPSB0aGlzLmdldEF0dGFjaG1lbnRGb2xkZXIoZmlsZV9wYXJzZWQpO1xuXHRcdFx0XHRcdGlmKCFhdHRhY2htZW50Rm9sZGVyUGF0aCkgeyByZXR1cm4gfVxuXG5cdFx0XHRcdFx0aWYoYXdhaXQgVXRpbHMuY2hlY2tEaXJlY3RvcnlFeGlzdHMoYXR0YWNobWVudEZvbGRlclBhdGguYXR0YWNobWVudHNGb2xkZXJQYXRoKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgRGVsZXRlQXR0YWNobWVudEZvbGRlck1vZGFsKHRoaXMuYXBwLCB0aGlzLCBhdHRhY2htZW50Rm9sZGVyUGF0aC5hdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdFx0Y29uc3QgY2hvaWNlID0gYXdhaXQgbW9kYWwucHJvbWlzZTtcblx0XHRcdFx0XHRcdGlmICghY2hvaWNlKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZWxhdGl2ZSh0aGlzLnZhdWx0UGF0aCxhdHRhY2htZW50Rm9sZGVyUGF0aC5hdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kZWxldGVDYWxsYmFja0VuYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy50cmFzaEZpbGUoZmlsZVBhdGgpO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbXNnID0gJ0ZhaWxlZCB0byByZW1vdmUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyJztcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihtc2cgKyBcIjpcIiwgZmlsZVBhdGgpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgbXNnOlwiLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UobXNnKycuJyk7XG5cdFx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRlbGV0ZUNhbGxiYWNrRW5hYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRjb25zb2xlLmxvZygnTG9hZGVkIHBsdWdpbiBJbXBvcnQgQXR0YWNobWVudHMrJyk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcbiAgICAgICAgdW5wYXRjaE9wZW5GaWxlKCk7XG4gICAgICAgIHJlbW92ZUtleUxpc3RlbmVycygpO1xuXHRcdGlmKHRoaXMub2JzZXJ2ZXIpe1xuXHRcdFx0dGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XHRcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIHJlbmFtZUZpbGUob2xkRmlsZVBhdGg6IHN0cmluZywgbmV3RmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZEZpbGVQYXRoKTtcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEFic3RyYWN0RmlsZSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld0ZpbGVQYXRoKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnQXR0YWNobWVudCBmb2xkZXIgcmVuYW1lZCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdBdHRhY2htZW50IGZvbGRlciBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIGdpdmVuIGxvY2F0aW9uLicpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0XHRjb25zdCBtc2cgPSAnRmFpbGVkIHRvIHJlbmFtZSBmaWxlJztcblx0XHRcdGNvbnNvbGUuZXJyb3IobXNnKyc6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZShtc2crJy4nKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyB0cmFzaEZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEFic3RyYWN0RmlsZSkge1xuXHRcdFx0XHRhd2FpdCBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnRyYXNoU3lzdGVtKGZpbGVQYXRoKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnQXR0YWNobWVudCBmb2xkZXIgbW92ZWQgdG8gc3lzdGVtIHRyYXNoIHN1Y2Nlc3NmdWxseS4nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0F0dGFjaG1lbnQgZm9sZGVyIGNvdWxkIG5vdCBiZSBmb3VuZCBhdCB0aGUgZ2l2ZW4gbG9jYXRpb24uJyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdGNvbnN0IG1zZyA9ICdGYWlsZWQgdG8gcmVuYW1lIGZpbGUnO1xuXHRcdFx0Y29uc29sZS5lcnJvcihtc2crJzonLCBlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKG1zZysnLicpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGhhbmRsZUZpbGVzKGZpbGVzOiBGaWxlTGlzdCwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldywgZG9Gb3JjZUFza2luZzogYm9vbGVhbiwgaW1wb3J0VHlwZTogSW1wb3J0T3BlcmF0aW9uVHlwZSkge1xuXHRcdGNvbnN0IGF0dGFjaG1lbnRzRm9sZGVyID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKCk7XG5cdFx0aWYoIWF0dGFjaG1lbnRzRm9sZGVyKXsgcmV0dXJuIH1cblxuXHRcdGNvbnN0IHsgYXR0YWNobWVudHNGb2xkZXJQYXRoLCBjdXJyZW50Tm90ZUZvbGRlclBhdGggfSA9IGF0dGFjaG1lbnRzRm9sZGVyO1xuXG5cdFx0bGV0IGFjdGlvbkZpbGVzT25JbXBvcnQ9SW1wb3J0QWN0aW9uVHlwZS5DT1BZOyAvLyBmb3Igc2FmZXR5LCB0aGUgZGVmdWFsdCBpcyBDT1BZXG5cdFx0bGV0IGxhc3RBY3Rpb25GaWxlc09uSW1wb3J0PUltcG9ydEFjdGlvblR5cGUuQ09QWTsgLy8gZm9yIHNhZmV0eSwgdGhlIGRlZnVhbHQgaXMgQ09QWVxuXHRcdHN3aXRjaChpbXBvcnRUeXBlKVxuXHRcdHtcblx0XHRjYXNlIEltcG9ydE9wZXJhdGlvblR5cGUuRFJBR19BTkRfRFJPUDpcblx0XHRcdGFjdGlvbkZpbGVzT25JbXBvcnQ9dGhpcy5zZXR0aW5ncy5hY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDtcblx0XHRcdGxhc3RBY3Rpb25GaWxlc09uSW1wb3J0PXRoaXMuc2V0dGluZ3MubGFzdEFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0O1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBJbXBvcnRPcGVyYXRpb25UeXBlLlBBU1RFOlxuXHRcdFx0YWN0aW9uRmlsZXNPbkltcG9ydD10aGlzLnNldHRpbmdzLmFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQ7XG5cdFx0XHRsYXN0QWN0aW9uRmlsZXNPbkltcG9ydD10aGlzLnNldHRpbmdzLmxhc3RBY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0O1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0bGV0IGVtYmVkT3B0aW9uID0gdGhpcy5zZXR0aW5ncy5lbWJlZEZpbGVzT25JbXBvcnQ7XG5cdFx0Y29uc3QgbGFzdEVtYmVkT3B0aW9uID0gdGhpcy5zZXR0aW5ncy5sYXN0RW1iZWRGaWxlc09uSW1wb3J0O1xuXG5cdFx0aWYgKGRvRm9yY2VBc2tpbmcgfHwgYWN0aW9uRmlsZXNPbkltcG9ydCA9PSBJbXBvcnRBY3Rpb25UeXBlLkFTS19VU0VSIHx8IGVtYmVkT3B0aW9uID09IFllc05vVHlwZXMuQVNLX1VTRVIpIHtcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEltcG9ydEFjdGlvblR5cGVNb2RhbCh0aGlzLmFwcCwgdGhpcywgbGFzdEFjdGlvbkZpbGVzT25JbXBvcnQsIGxhc3RFbWJlZE9wdGlvbik7XG5cdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRjb25zdCBjaG9pY2UgPSBhd2FpdCBtb2RhbC5wcm9taXNlO1xuXHRcdFx0aWYgKGNob2ljZSA9PSBudWxsKSByZXR1cm47IC8vIHJldHVybiBpZiB0aGUgdXNlciBjbG9zZXMgdGhlIG1vZGFsIHdpdGhvdXQgcHJlZmVyZW5jZXMgICAgICAgIFx0XHRcblx0XHRcdGFjdGlvbkZpbGVzT25JbXBvcnQgPSBjaG9pY2UuYWN0aW9uO1xuXHRcdFx0c3dpdGNoIChpbXBvcnRUeXBlKSB7XG5cdFx0XHRcdGNhc2UgSW1wb3J0T3BlcmF0aW9uVHlwZS5EUkFHX0FORF9EUk9QOlxuXHRcdFx0XHRcdGlmIChjaG9pY2UucmVtZW1iZXJDaG9pY2UpIHtcblx0XHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MuYWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQgPSBhY3Rpb25GaWxlc09uSW1wb3J0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmxhc3RBY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydCA9IGFjdGlvbkZpbGVzT25JbXBvcnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgSW1wb3J0T3BlcmF0aW9uVHlwZS5QQVNURTpcblx0XHRcdFx0XHRpZiAoY2hvaWNlLnJlbWVtYmVyQ2hvaWNlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQgPSBhY3Rpb25GaWxlc09uSW1wb3J0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmxhc3RBY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0ID0gYWN0aW9uRmlsZXNPbkltcG9ydDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGVtYmVkT3B0aW9uID0gY2hvaWNlLmVtYmVkO1xuXHRcdFx0aWYgKGNob2ljZS5yZW1lbWJlckNob2ljZSkge1xuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmVtYmVkRmlsZXNPbkltcG9ydCA9IGVtYmVkT3B0aW9uO1x0XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNldHRpbmdzLmxhc3RFbWJlZEZpbGVzT25JbXBvcnQgPSBlbWJlZE9wdGlvbjtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZG9FbWJlZCA9IChlbWJlZE9wdGlvbiA9PSBZZXNOb1R5cGVzLllFUyk7XG5cblx0XHRjb25zdCBpbXBvcnRTZXR0aW5ncyA9IHtcblx0XHRcdGVtYmVkOiBkb0VtYmVkLFxuXHRcdFx0YWN0aW9uOiBhY3Rpb25GaWxlc09uSW1wb3J0LFxuXHRcdH07XG5cblx0XHR0aGlzLm1vdmVGaWxlVG9BdHRhY2htZW50c0ZvbGRlcihmaWxlcywgYXR0YWNobWVudHNGb2xkZXJQYXRoLCBjdXJyZW50Tm90ZUZvbGRlclBhdGgsIGVkaXRvciwgdmlldywgaW1wb3J0U2V0dGluZ3MpO1xuXHR9XG5cblx0Z2V0QXR0YWNobWVudEZvbGRlcihub3RlRmlsZVBhdGg6IFBhcnNlZFBhdGggfCBudWxsID0gbnVsbCk6IEF0dGFjaG1lbnRGb2xkZXJQYXRoIHwgbnVsbCB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBhY3RpdmUgbm90ZSBpZiBub3RlRmlsZVBhdGggaXMgbm90IHByb3ZpZGVkXG5cdFx0XHRpZighbm90ZUZpbGVQYXRoKSB7XG5cdFx0XHRcdG5vdGVGaWxlUGF0aCA9ICggKCk6UGFyc2VkUGF0aCA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdFx0aWYoYWN0aXZlRmlsZT09bnVsbCkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVGhlIGFjdGl2ZSBub3RlIGNvdWxkIG5vdCBiZSBkZXRlcm1pbmVkLlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2UoYWN0aXZlRmlsZS5wYXRoKTtcblx0XHRcdFx0fSkoKVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoIW5vdGVGaWxlUGF0aCB8fCBub3RlRmlsZVBhdGguZXh0ICE9PSBcIi5tZFwiKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIk5vIE1hcmtkb3duIGZpbGUgd2FzIGZvdW5kLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYoIXRoaXMudmF1bHRQYXRoKSByZXR1cm4gbnVsbDtcblxuXHRcdFx0Y29uc3Qgbm90ZUZvbGRlclBhdGggPSBwYXRoLmpvaW4odGhpcy52YXVsdFBhdGgsbm90ZUZpbGVQYXRoLmRpcik7XG5cdFx0XHRjb25zdCBub3RlbmFtZSA9IG5vdGVGaWxlUGF0aC5uYW1lO1xuXHRcdFx0XG5cdFx0XHRsZXQgcmVmZXJlbmNlUGF0aCA9ICcnO1xuXHRcdFx0c3dpdGNoKHRoaXMuc2V0dGluZ3MucmVsYXRpdmVMb2NhdGlvbikge1xuXHRcdFx0Y2FzZSBSZWxhdGl2ZUxvY2F0aW9uLlZBVUxUOlxuXHRcdFx0XHRyZWZlcmVuY2VQYXRoID0gdGhpcy52YXVsdFBhdGg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBSZWxhdGl2ZUxvY2F0aW9uLlNBTUU6XG5cdFx0XHRcdHJlZmVyZW5jZVBhdGggPSBub3RlRm9sZGVyUGF0aDtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IHRoaXMuc2V0dGluZ3MuZm9sZGVyUGF0aC5yZXBsYWNlKC9cXCRcXHtub3RlbmFtZVxcfS9nLCBub3RlbmFtZSk7XG5cblx0XHRcdGNvbnN0IGF0dGFjaG1lbnRzRm9sZGVyUGF0aCA9IHBhdGguam9pbihyZWZlcmVuY2VQYXRoLHJlbGF0aXZlUGF0aCk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGF0dGFjaG1lbnRzRm9sZGVyUGF0aCxcblx0XHRcdFx0Y3VycmVudE5vdGVGb2xkZXJQYXRoOiBub3RlRm9sZGVyUGF0aCxcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IubWVzc2FnZSk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoZXJyb3IubWVzc2FnZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBJZiBpdCdzIG5vdCBhbiBFcnJvciwgbG9nIGl0IGFzIGEgc3RyaW5nIG9yIHVzZSBhIGRlZmF1bHQgbWVzc2FnZVxuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZDpcIiwgZXJyb3IpO1xuXHRcdFx0XHRuZXcgTm90aWNlKFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZFwiKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGNob29zZUZpbGVUb0ltcG9ydChpbXBvcnRTZXR0aW5nczogSW1wb3J0U2V0dGluZ3NJbnRlcmZhY2UpIHtcblx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdGNvbnN0IGVkaXRvciA9IG1hcmtkb3duVmlldz8uZWRpdG9yO1xuXG5cdFx0aWYoIWVkaXRvcilcblx0XHR7XG5cdFx0XHRjb25zdCBtc2cgPSBcIk5vIGFjdGl2ZSBtYXJrZG93biBlZGl0b3IgZm91bmQuXCI7XG5cdFx0XHRjb25zb2xlLmVycm9yKG1zZyk7XG5cdFx0XHRuZXcgTm90aWNlKG1zZyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgYXR0YWNobWVudHNGb2xkZXIgPSB0aGlzLmdldEF0dGFjaG1lbnRGb2xkZXIoKTtcblx0XHRpZighYXR0YWNobWVudHNGb2xkZXIpeyByZXR1cm4gfVxuXG5cdFx0Y29uc3QgeyBhdHRhY2htZW50c0ZvbGRlclBhdGgsIGN1cnJlbnROb3RlRm9sZGVyUGF0aDogcmVmZXJlbmNlUGF0aCB9ID0gYXR0YWNobWVudHNGb2xkZXI7XG5cblx0XHRjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRpbnB1dC50eXBlID0gXCJmaWxlXCI7XG5cdFx0aW5wdXQubXVsdGlwbGUgPSB0cnVlOyAgLy8gQWxsb3cgc2VsZWN0aW9uIG9mIG11bHRpcGxlIGZpbGVzXG5cdFx0XG5cdFx0aW5wdXQub25jaGFuZ2UgPSBhc3luYyAoZTogRXZlbnQpID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cdFx0XHRjb25zdCBmaWxlcyA9IHRhcmdldC5maWxlczsgLy8gVGhpcyBpcyBhbHJlYWR5IGEgRmlsZUxpc3RcblxuXHRcdFx0aWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Ly8gRGlyZWN0bHkgcGFzcyB0aGUgRmlsZUxpc3QgdG8gdGhlIHByb2Nlc3NpbmcgZnVuY3Rpb25cblx0XHRcdFx0YXdhaXQgdGhpcy5tb3ZlRmlsZVRvQXR0YWNobWVudHNGb2xkZXIoZmlsZXMsIGF0dGFjaG1lbnRzRm9sZGVyUGF0aCwgcmVmZXJlbmNlUGF0aCwgZWRpdG9yLCBtYXJrZG93blZpZXcsIGltcG9ydFNldHRpbmdzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IG1zZyA9IFwiTm8gZmlsZXMgc2VsZWN0ZWQgb3IgZmlsZSBhY2Nlc3MgZXJyb3IuXCI7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IobXNnKTtcblx0XHRcdFx0bmV3IE5vdGljZShtc2cpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0aW5wdXQuY2xpY2soKTsgLy8gVHJpZ2dlciB0aGUgZmlsZSBpbnB1dCBkaWFsb2dcblx0fVxuXG5cdGFzeW5jIG1vdmVGaWxlVG9BdHRhY2htZW50c0ZvbGRlcihmaWxlc1RvSW1wb3J0OiBGaWxlTGlzdCwgYXR0YWNobWVudHNGb2xkZXJQYXRoOiBzdHJpbmcsIGN1cnJlbnROb3RlRm9sZGVyUGF0aDogc3RyaW5nLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3LCBpbXBvcnRTZXR0aW5nczogSW1wb3J0U2V0dGluZ3NJbnRlcmZhY2UpIHtcblx0XHQvLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBleGlzdHMgYmVmb3JlIG1vdmluZyB0aGUgZmlsZVxuXHRcdGF3YWl0IFV0aWxzLmVuc3VyZURpcmVjdG9yeUV4aXN0cyhhdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXG5cdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpOyAvLyBHZXQgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIGJlZm9yZSBpbnNlcnRpb25cblxuXHRcdGlmIChmaWxlc1RvSW1wb3J0Lmxlbmd0aD4xICYmIHRoaXMuc2V0dGluZ3MubXVsdGlwbGVGaWxlc0ltcG9ydFR5cGUgIT0gTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzLklOTElORSkge1xuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbGluZVxuXHRcdFx0aWYgKGN1cnNvci5jaCAhPT0gMCkge1xuXHRcdFx0XHQvLyBJZiBub3QsIGluc2VydCBhIG5ld2xpbmUgYmVmb3JlIHRoZSBsaW5rXG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoJ1xcbicsIGN1cnNvcik7XG5cdFx0XHRcdC8vIFlvdSBuZWVkIHRvIGV4cGxpY2l0bHkgc2V0IHRoZSBjdXJzb3IgdG8gdGhlIG5ldyBwb3NpdGlvbiBhZnRlciB0aGUgbmV3bGluZVxuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogY3Vyc29yLmxpbmUgKyAxLCBjaDogMCB9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBtdWx0aXBsZUZpbGVzID0gZmlsZXNUb0ltcG9ydC5sZW5ndGg+MTtcblxuXHRcdGNvbnN0IHRhc2tzID0gQXJyYXkuZnJvbShmaWxlc1RvSW1wb3J0KS5tYXAoYXN5bmMgKGZpbGVUb0ltcG9ydCk6UHJvbWlzZTxzdHJpbmd8bnVsbD4gPT4ge1xuXHRcdFx0Y29uc3Qgb3JpZ2luYWxGaWxlUGF0aCA9IGZpbGVUb0ltcG9ydC5wYXRoO1xuXHRcdFx0bGV0IGRlc3RGaWxlUGF0aCA9IHBhdGguam9pbihhdHRhY2htZW50c0ZvbGRlclBhdGgsXG5cdFx0XHRcdFx0XHRcdGF3YWl0IFV0aWxzLmNyZWF0ZUF0dGFjaG1lbnROYW1lKHRoaXMuc2V0dGluZ3MuYXR0YWNobWVudE5hbWUsdGhpcy5zZXR0aW5ncy5kYXRlRm9ybWF0LG9yaWdpbmFsRmlsZVBhdGgpKTtcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgdmF1bHRcblx0XHRcdGNvbnN0IGV4aXN0aW5nRmlsZSA9IGF3YWl0IFV0aWxzLmNoZWNrRmlsZUV4aXN0cyhkZXN0RmlsZVBhdGgpO1xuXHRcdFx0Ly8gSWYgdGhleSBhcmUgdGhlIHNhbWUgZmlsZSwgdGhlbiBza2lwIGNvcHlpbmcvbW92aW5nLCB3ZSBhcmUgYWxyYWR5IGRvbmVcblx0XHRcdGlmKGV4aXN0aW5nRmlsZSAmJiBhd2FpdCBVdGlscy5hcmVQYXRoc1NhbWVGaWxlKG9yaWdpbmFsRmlsZVBhdGgsZGVzdEZpbGVQYXRoKSkge1xuXHRcdFx0XHRyZXR1cm4gZGVzdEZpbGVQYXRoO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiB0aGUgb3JpZ2luYWwgZmlsZSBpcyBhbHJlYWR5IGluIHRoZSB2YXVsdFxuXHRcdFx0aWYoIXRoaXMudmF1bHRQYXRoKSByZXR1cm4gbnVsbDtcblx0XHRcdGNvbnN0IGluVmF1bHQgPSBhd2FpdCBVdGlscy5pc0ZpbGVJblZhdWx0KHRoaXMudmF1bHRQYXRoLG9yaWdpbmFsRmlsZVBhdGgpXG5cdFx0XHRpZihpblZhdWx0KVxuXHRcdFx0e1xuXHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJbXBvcnRGcm9tVmF1bHRDaG9pY2VNb2RhbCh0aGlzLmFwcCwgdGhpcywgdGhpcy52YXVsdFBhdGgsIGluVmF1bHQsIGltcG9ydFNldHRpbmdzLmFjdGlvbik7XG5cdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0Y29uc3QgY2hvaWNlID0gYXdhaXQgbW9kYWwucHJvbWlzZTtcblx0XHRcdFx0aWYoY2hvaWNlPT1udWxsKSB7IHJldHVybiBudWxsOyB9XG5cdFx0XHRcdHN3aXRjaChjaG9pY2UpIHtcblx0XHRcdFx0Y2FzZSBJbXBvcnRGcm9tVmF1bHRPcHRpb25zLlNLSVA6XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgSW1wb3J0RnJvbVZhdWx0T3B0aW9ucy5MSU5LOlxuXHRcdFx0XHRcdGltcG9ydFNldHRpbmdzLmFjdGlvbiA9IEltcG9ydEFjdGlvblR5cGUuTElOSztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBJbXBvcnRGcm9tVmF1bHRPcHRpb25zLkNPUFk6XG5cdFx0XHRcdFx0aW1wb3J0U2V0dGluZ3MuYWN0aW9uID0gSW1wb3J0QWN0aW9uVHlwZS5DT1BZO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIERlY2lkZSB3aGF0IHRvIGRvIGlmIGEgZmlsZSB3aXRoIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHMgYXQgdGhlIGRlc3RpbmF0aW9uXG5cdFx0XHRpZiAoZXhpc3RpbmdGaWxlICYmIGltcG9ydFNldHRpbmdzLmFjdGlvbiAhPSBJbXBvcnRBY3Rpb25UeXBlLkxJTkspIHtcblx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgT3ZlcndyaXRlQ2hvaWNlTW9kYWwodGhpcy5hcHAsIHRoaXMsIG9yaWdpbmFsRmlsZVBhdGgsIGRlc3RGaWxlUGF0aCk7XG5cdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0Y29uc3QgY2hvaWNlID0gYXdhaXQgbW9kYWwucHJvbWlzZTtcblx0XHRcdFx0aWYoY2hvaWNlPT1udWxsKSB7IHJldHVybiBudWxsOyB9XG5cdFx0XHRcdHN3aXRjaChjaG9pY2UpIHtcblx0XHRcdFx0Y2FzZSBPdmVyd3JpdGVDaG9pY2VPcHRpb25zLk9WRVJXUklURTpcblx0XHRcdFx0XHQvLyBjb250aW51ZVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMuS0VFUEJPVEg6XG5cdFx0XHRcdFx0ZGVzdEZpbGVQYXRoID0gYXdhaXQgVXRpbHMuZmluZE5ld0ZpbGVuYW1lKGRlc3RGaWxlUGF0aCk7XG5cdFx0XHRcdFx0aWYoZGVzdEZpbGVQYXRoPT1udWxsKSB7IHJldHVybiBudWxsOyB9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5TS0lQOlxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN3aXRjaCAoaW1wb3J0U2V0dGluZ3MuYWN0aW9uKSB7XG5cdFx0XHRcdFx0Y2FzZSBJbXBvcnRBY3Rpb25UeXBlLk1PVkU6XG5cdFx0XHRcdFx0XHRhd2FpdCBmcy5yZW5hbWUob3JpZ2luYWxGaWxlUGF0aCxkZXN0RmlsZVBhdGgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRlc3RGaWxlUGF0aDtcblx0XHRcdFx0XHRjYXNlIEltcG9ydEFjdGlvblR5cGUuQ09QWTpcblx0XHRcdFx0XHRcdGF3YWl0IGZzLmNvcHlGaWxlKG9yaWdpbmFsRmlsZVBhdGgsZGVzdEZpbGVQYXRoKTtcblx0XHRcdFx0XHRcdHJldHVybiBkZXN0RmlsZVBhdGg7XG5cdFx0XHRcdFx0Y2FzZSBJbXBvcnRBY3Rpb25UeXBlLkxJTks6XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHJldHVybiBvcmlnaW5hbEZpbGVQYXRoO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zdCBtc2cgPSBcIkZhaWxlZCB0byBwcm9jZXNzIHRoZSBmaWxlXCI7XG5cdFx0XHRcdG5ldyBOb3RpY2UobXNnICsgXCIuXCIpO1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCBtc2cgKyBcIjpcIiwgb3JpZ2luYWxGaWxlUGF0aCwgZXJyb3IpO1xuXHRcdFx0XHRyZXR1cm4gbnVsbDsgLy8gSW5kaWNhdGUgZmFpbHVyZSBpbiBwcm9jZXNzaW5nIHRoaXMgZmlsZVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gV2FpdCBmb3IgYWxsIHRhc2tzIHRvIGNvbXBsZXRlXG5cdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRhc2tzKTtcblxuXHRcdC8vIE5vdyBwcm9jZXNzIHRoZSByZXN1bHRzXG5cdFx0Y29uc3QgY291bnRlciA9IDA7XG5cdFx0cmVzdWx0cy5mb3JFYWNoKChpbXBvcnRlZEZpbGVQYXRoOiAoc3RyaW5nfG51bGwpLCBpbmRleDogbnVtYmVyKSA9PiB7XG5cdFx0XHRpZiAoaW1wb3J0ZWRGaWxlUGF0aCkge1xuXHRcdFx0XHR0aGlzLmluc2VydExpbmtUb0VkaXRvcihjdXJyZW50Tm90ZUZvbGRlclBhdGgsIGltcG9ydGVkRmlsZVBhdGgsIGVkaXRvciwgdmlldywgaW1wb3J0U2V0dGluZ3MsIG11bHRpcGxlRmlsZXMgPyBpbmRleCsxIDogMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZihjb3VudGVyPjApIHtcblx0XHRcdGxldCBvcGVyYXRpb24gPSAnJztcblx0XHRcdHN3aXRjaChpbXBvcnRTZXR0aW5ncy5hY3Rpb24pXG5cdFx0XHR7XG5cdFx0XHRjYXNlIEltcG9ydEFjdGlvblR5cGUuTU9WRTpcblx0XHRcdFx0b3BlcmF0aW9uID0gJ01vdmVkJztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIEltcG9ydEFjdGlvblR5cGUuQ09QWTpcblx0XHRcdFx0b3BlcmF0aW9uID0gJ0NvcGllZCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bmV3IE5vdGljZShgJHtvcGVyYXRpb259IHN1Y2Nlc3NmdWxseSAke2NvdW50ZXJ9IGZpbGVzIHRvIHRoZSBhdHRhY2htZW50cyBmb2xkZXIuYCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgb3BlbkF0dGFjaG1lbnRzRm9sZGVyKCkge1xuXHRcdGNvbnN0IGF0dGFjaG1lbnRzRm9sZGVyID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKCk7XG5cdFx0aWYoIWF0dGFjaG1lbnRzRm9sZGVyKXsgcmV0dXJuIH1cblxuXHRcdGNvbnN0IHsgYXR0YWNobWVudHNGb2xkZXJQYXRoIH0gPSBhdHRhY2htZW50c0ZvbGRlcjtcblx0XHRcblx0XHRpZighIGF3YWl0IFV0aWxzLmNoZWNrRGlyZWN0b3J5RXhpc3RzKGF0dGFjaG1lbnRzRm9sZGVyUGF0aCkpXG5cdFx0e1xuXHRcdFx0Y29uc3QgbXNnPVwiVGhpcyBub3RlIGRvZXMgbm90IGhhdmUgYW4gYXR0YWNobWVudCBmb2xkZXIuXCI7XG5cdFx0XHRjb25zb2xlLmVycm9yKG1zZytcIjpcIiwgYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblx0XHRcdG5ldyBOb3RpY2UobXNnK1wiLlwiKTtcblx0XHR9XG5cblx0XHQvLyBPcGVuIHRoZSBmb2xkZXIgaW4gdGhlIHN5c3RlbSdzIGRlZmF1bHQgZmlsZSBleHBsb3JlclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG5cdFx0Y29uc3QgeyBzaGVsbCB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcblx0XHQvLyB3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcihhdHRhY2htZW50c0ZvbGRlci5hdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXHRcdHNoZWxsLm9wZW5QYXRoKGF0dGFjaG1lbnRzRm9sZGVyLmF0dGFjaG1lbnRzRm9sZGVyUGF0aCk7XG5cdH1cblxuXHRpbnNlcnRMaW5rVG9FZGl0b3IoY3VycmVudE5vdGVGb2xkZXJQYXRoOiBzdHJpbmcsIGltcG9ydGVkRmlsZVBhdGg6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldywgaW1wb3J0U2V0dGluZ3M6IEltcG9ydFNldHRpbmdzSW50ZXJmYWNlLCBjb3VudGVyOiBudW1iZXIpIHtcblx0XHQvLyBFeHRyYWN0IGp1c3QgdGhlIGZpbGUgbmFtZSBmcm9tIHRoZSBwYXRoXG5cblx0XHRjb25zdCBmaWxlbmFtZT1VdGlscy5nZXRGaWxlbmFtZShpbXBvcnRlZEZpbGVQYXRoKTtcblxuXHRcdGxldCByZWxhdGl2ZVBhdGg7XG5cdFx0c3dpdGNoKHRoaXMuc2V0dGluZ3MubGlua0Zvcm1hdCkge1xuXHRcdGNhc2UgTGlua0Zvcm1hdC5SRUxBVElWRTpcblx0XHRcdHJlbGF0aXZlUGF0aD1wYXRoLnJlbGF0aXZlKGN1cnJlbnROb3RlRm9sZGVyUGF0aCwgaW1wb3J0ZWRGaWxlUGF0aCk7XHRcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgTGlua0Zvcm1hdC5BQlNPTFVURTpcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmVsYXRpdmVQYXRoPXBhdGgucmVsYXRpdmUodGhpcy52YXVsdFBhdGgsaW1wb3J0ZWRGaWxlUGF0aCk7XHRcblx0XHRcdGJyZWFrO1xuXHRcdH1cdFxuXHRcdFxuXHRcdGxldCBwcmVmaXggPSAnJztcblx0XHRsZXQgcG9zdGZpeCA9ICcnO1xuXHRcdGxldCBjdXN0b21EaXNwbGF5ID0gJyc7XG5cdFx0aWYoY291bnRlcj4wKSB7XG5cdFx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3MubXVsdGlwbGVGaWxlc0ltcG9ydFR5cGUpIHtcblx0XHRcdFx0Y2FzZSBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuQlVMTEVURUQ6XG5cdFx0XHRcdFx0cHJlZml4ID0gJy0gJztcblx0XHRcdFx0XHRwb3N0Zml4ID0gJ1xcbic7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzLk5VTUJFUkVEOlxuXHRcdFx0XHRcdHByZWZpeCA9IGAke2NvdW50ZXJ9LiBgO1xuXHRcdFx0XHRcdHBvc3RmaXggPSAnXFxuJztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuSU5MSU5FOlxuXHRcdFx0XHRcdGlmKGNvdW50ZXI+MSl7XG5cdFx0XHRcdFx0XHQvLyBpZiBpdCBpcyBub3QgdGhlIGZpcnN0IGl0ZW1cblx0XHRcdFx0XHRcdHByZWZpeCA9ICdcXG5cXG4nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYodGhpcy5zZXR0aW5ncy5jdXN0b21EaXNwbGF5VGV4dCkge1xuXHRcdFx0Y3VzdG9tRGlzcGxheSA9ICd8JyArIGZpbGVuYW1lO1xuXHRcdH1cblx0XHRpZihpbXBvcnRTZXR0aW5ncy5lbWJlZCkge1xuXHRcdFx0cHJlZml4ID0gcHJlZml4ICsgJyEnO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxpbmtUZXh0ID0gcHJlZml4ICsgJ1tbJyArIHJlbGF0aXZlUGF0aCArIGN1c3RvbURpc3BsYXkgKyAnXV0nICsgcG9zdGZpeDtcblxuXHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTsgLy8gR2V0IHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgaW5zZXJ0aW9uXG5cblx0XHQvLyBJbnNlcnQgdGhlIGxpbmsgdGV4dCBhdCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb25cblx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGxpbmtUZXh0LCBjdXJzb3IpO1xuXG5cdFx0aWYoY291bnRlcj09MCkge1xuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5jdXN0b21EaXNwbGF5VGV4dCkge1xuXHRcdFx0XHQvLyBEZWZpbmUgdGhlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIGZvciBzZWxlY3RpbmcgJ2Jhc2VOYW1lJyB3aXRoaW4gdGhlIGluc2VydGVkIGxpbmtcblx0XHRcdFx0Y29uc3Qgc3RhcnRDdXJzb3JQb3MgPSB7XG5cdFx0XHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdFx0Y2g6IGN1cnNvci5jaCArIHJlbGF0aXZlUGF0aC5sZW5ndGggKyBwcmVmaXgubGVuZ3RoICsgMyxcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgZW5kQ3Vyc29yUG9zID0ge1xuXHRcdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxuXHRcdFx0XHRcdGNoOiBzdGFydEN1cnNvclBvcy5jaCArIGZpbGVuYW1lLmxlbmd0aCxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIHNlbGVjdGlvbiByYW5nZSB0byBoaWdobGlnaHQgJ2Jhc2VOYW1lJ1xuXHRcdFx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKHN0YXJ0Q3Vyc29yUG9zLCBlbmRDdXJzb3JQb3MpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgbmV3Q3Vyc29yUG9zID0ge1xuXHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcblx0XHRcdFx0XHRjaDogY3Vyc29yLmNoICsgbGlua1RleHQubGVuZ3RoXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTW92ZSBjdXJzb3IgdG8gdGhlIHBvc2l0aW9uIHJpZ2h0IGFmdGVyIHRoZSBsaW5rXG5cdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IobmV3Q3Vyc29yUG9zKTtcblx0XHRcdH1cblx0XHR9IGVsc2Vcblx0XHR7XG5cdFx0XHRjb25zdCBuZXdDdXJzb3JQb3MgPSB7XG5cdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcblx0XHRcdFx0Y2g6IGN1cnNvci5jaCArIGxpbmtUZXh0Lmxlbmd0aFxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gTW92ZSBjdXJzb3IgdG8gdGhlIHBvc2l0aW9uIHJpZ2h0IGFmdGVyIHRoZSBsaW5rXG5cdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvcyk7XG5cdFx0fVxuXHR9XG59XG5cbmNsYXNzIEltcG9ydEF0dGFjaG1lbnRzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IEltcG9ydEF0dGFjaG1lbnRzO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEltcG9ydEF0dGFjaG1lbnRzKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NldHRpbmdzIGZvciBJbXBvcnQgQXR0YWNobWVudHMrIFBsdWdpbicgfSk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdJbXBvcnQgb3B0aW9ucycgfSk7XG5cdFx0XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnV2hldGhlciB0byBtb3ZlIG9yIGNvcHkgZmlsZXMgdGhhdCBhcmUgZHJhZy1hbmQtZHJvcHBlZD8nKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB3aGV0aGVyIGZpbGVzIHRoYXQgYXJlIGRyYWdnZWQgYW5kIGRyb3BwZWQgaW50byB0aGUgZWRpdG9yIHNob3VsZCBiZSBtb3ZlZCBvciBjb3BpZWQuIEFsdGVybmF0aXZlbHksIHRoZSB1c2VyIGlzIGFza2VkIGVhY2ggdGltZS4gQnkgaG9sZGluZyB0aGUgU0hJRlQga2V5IHByZXNzZWQsIHlvdSB3aWxsIGJlIHNob3duIHRoZSBpbXBvcnQgcGFuZWwsIGhvd2V2ZXIgeW91IGNvbmZpZ3VyZWQgdGhpcyBvcHRpb24uJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihJbXBvcnRBY3Rpb25UeXBlLkFTS19VU0VSLCAnQXNrIGVhY2ggdGltZScpO1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5NT1ZFLCAnTW92ZScpO1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5DT1BZLCAnQ29weScpO1xuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlIGluIEltcG9ydEFjdGlvblR5cGUpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0ID0gdmFsdWUgYXMgSW1wb3J0QWN0aW9uVHlwZTtcblx0XHRcdFx0XHRcdGlmKHZhbHVlICE9IEltcG9ydEFjdGlvblR5cGUuQVNLX1VTRVIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0ID0gdmFsdWUgYXMgSW1wb3J0QWN0aW9uVHlwZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdJbnZhbGlkIGltcG9ydCBhY3Rpb24gdHlwZTonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1doZXRoZXIgdG8gbW92ZSBvciBjb3B5IGZpbGVzIHRoYXQgYXJlIGNvcHktYW5kLXBhc3RlZD8nKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB3aGV0aGVyIGZpbGVzIHRoYXQgYXJlIGNvcHkgYW5kIHBhc3RlZCBpbnRvIHRoZSBlZGl0b3Igc2hvdWxkIGJlIG1vdmVkIG9yIGNvcGllZC4gQWx0ZXJuYXRpdmVseSwgdGhlIHVzZXIgaXMgYXNrZWQgZWFjaCB0aW1lLiAgQnkgaG9sZGluZyB0aGUgU0hJRlQga2V5IHByZXNzZWQsIHlvdSB3aWxsIGJlIHNob3duIHRoZSBpbXBvcnQgcGFuZWwsIGhvd2V2ZXIgeW91IGNvbmZpZ3VyZWQgdGhpcyBvcHRpb24uJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihJbXBvcnRBY3Rpb25UeXBlLkFTS19VU0VSLCAnQXNrIGVhY2ggdGltZScpO1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5NT1ZFLCAnTW92ZScpO1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5DT1BZLCAnQ29weScpO1xuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZiAodmFsdWUgaW4gSW1wb3J0QWN0aW9uVHlwZSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIEltcG9ydEFjdGlvblR5cGU7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPSBJbXBvcnRBY3Rpb25UeXBlLkFTS19VU0VSKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RBY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0ID0gdmFsdWUgYXMgSW1wb3J0QWN0aW9uVHlwZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdJbnZhbGlkIGltcG9ydCBhY3Rpb24gdHlwZTonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VtYmVkIGltcG9ydGVkIGRvY3VtZW50czonKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgb3B0aW9uIGlzIGVuYWJsZWQsIHRoZSBmaWxlcyBhcmUgaW1wb3J0ZWQgYXMgYW4gZW1iZWRkZWQgZG9jdW1lbnQ7IGlmIGl0IGlzIGRlYWN0aXZhdGVkLCB0aGV5IGFyZSBpbXBvcnRlZCBhcyBhIGxpbmtlZCBkb2N1bWVudC4gIEJ5IGhvbGRpbmcgdGhlIFNISUZUIGtleSBwcmVzc2VkLCB5b3Ugd2lsbCBiZSBzaG93biB0aGUgaW1wb3J0IHBhbmVsLCBob3dldmVyIHlvdSBjb25maWd1cmVkIHRoaXMgb3B0aW9uLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oWWVzTm9UeXBlcy5BU0tfVVNFUiwgJ0FzayBlYWNoIHRpbWUnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFllc05vVHlwZXMuWUVTLCAnWWVzJyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihZZXNOb1R5cGVzLk5PLCAnTm8nKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRGaWxlc09uSW1wb3J0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LnZhbHVlcyhZZXNOb1R5cGVzKS5pbmNsdWRlcyh2YWx1ZSBhcyBZZXNOb1R5cGVzKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW1iZWRGaWxlc09uSW1wb3J0ID0gdmFsdWUgYXMgWWVzTm9UeXBlcztcblx0XHRcdFx0XHRcdGlmKHZhbHVlICE9IFllc05vVHlwZXMuQVNLX1VTRVIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEVtYmVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIFllc05vVHlwZXM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBvcHRpb24gc2VsZWN0aW9uOicsIHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9KX0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnSW1wb3J0IG11bHRpcGxlIGZpbGVzIGFzOicpXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIGhvdyB0byBpbXBvcnQgbXVsdGlwbGUgZmlsZXM6IGFzIGEgYnVsbGV0ZWQgbGlzdCwgYXMgYSBudW1iZXJlZCBsaXN0LCBvciBpbmxpbmUgd2l0aG91dCB1c2luZyBsaXN0cy4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcy5CVUxMRVRFRCwgJ0J1bGxldGVkIGxpc3QnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcy5OVU1CRVJFRCwgJ051bWJlcmVkIGxpc3QnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcy5JTkxJTkUsICdJbmxpbmUnKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXVsdGlwbGVGaWxlc0ltcG9ydFR5cGUpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdGlmIChPYmplY3QudmFsdWVzKE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcykuaW5jbHVkZXModmFsdWUgYXMgTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXVsdGlwbGVGaWxlc0ltcG9ydFR5cGUgPSB2YWx1ZSBhcyBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXM7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBvcHRpb24gc2VsZWN0aW9uOicsIHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9KX0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnSW5zZXJ0IGRpc3BsYXkgdGV4dCBmb3IgbGlua3MgYmFzZWQgb24gZmlsZW5hbWU6Jylcblx0XHRcdC5zZXREZXNjKCdJZiB0aGlzIG9wdGlvbiBpcyBlbmFibGVkLCB0aGUgYmFzZW5hbWUgb2YgdGhlIGltcG9ydGVkIGRvY3VtZW50IGlzIHVzZWQgYXMgaW4gcGxhY2Ugb2YgdGhlIGN1c3RvbSBkaXNwbGF5IHRleHQuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRGlzcGxheVRleHQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21EaXNwbGF5VGV4dCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSkpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQXR0YWNobWVudCBmb2xkZXIgY29uZmlndXJhdGlvbicgfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdEZWZhdWx0IGxvY2F0aW9uIGZvciBuZXcgYXR0YWNobWVudHM6Jylcblx0XHRcdC5zZXREZXNjKCdUaGUgcmVmZXJlbmNlIGZvbGRlciBmb3IgaW1wb3J0aW5nIG5ldyBhdHRhY2htZW50cy4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFJlbGF0aXZlTG9jYXRpb24uVkFVTFQsICdWYXVsdCBmb2xkZXInKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFJlbGF0aXZlTG9jYXRpb24uU0FNRSwgJ1NhbWUgZm9sZGVyIGFzIGN1cnJlbnQgZmlsZScpO1xuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZUxvY2F0aW9uKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LnZhbHVlcyhSZWxhdGl2ZUxvY2F0aW9uKS5pbmNsdWRlcyh2YWx1ZSBhcyBSZWxhdGl2ZUxvY2F0aW9uKSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVMb2NhdGlvbiA9IHZhbHVlIGFzIFJlbGF0aXZlTG9jYXRpb247XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBvcHRpb24gc2VsZWN0aW9uOicsIHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9KX0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQXR0YWNobWVudCBmb2xkZXIgd2hlcmUgdG8gaW1wb3J0IG5ldyBhdHRhY2htZW50cywgcmVsYXRpdmUgdG8gdGhlIGRlZmF1bHQgbG9jYXRpb246Jylcblx0XHRcdC5zZXREZXNjKCdXaGVyZSBuZXdseSBjcmVhdGVkIG5vdGVzIGFyZSBwbGFjZWQuIFVzZSAke25vdGVuYW1lfSBhcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUgbmFtZSBvZiB0aGUgbm90ZS4nKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZvbGRlciBwYXRoJyk7XG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUGF0aCk7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJQYXRoID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uY29uZmlndXJlSGlkZUZvbGRlck5hbWVzKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaGlkZUF0dGFjaG1lbnRGb2xkZXJzKHRydWUpO1xuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0F0dGFjaG1lbnQgbGluayBmb3JtYXQ6Jylcblx0XHRcdC5zZXREZXNjKCdXaGF0IHR5cGVzIG9mIGxpbmtzIHRvIHVzZSBmb3IgdGhlIGltcG9ydGVkIGF0dGFjaG1lbnRzLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oTGlua0Zvcm1hdC5SRUxBVElWRSwgJ1dpdGggcmVzcGVjdCB0byB0aGUgbm90ZVxcJ3MgcGF0aCAocmVsYXRpdmUgcGF0aCknKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKExpbmtGb3JtYXQuQUJTT0xVVEUsICdXaXRoIHJlc3BlY3QgdG8gdGhlIHZhdWx0XFwncyBwYXRoIChhYnNvbHV0ZSBwYXRoKScpO1xuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saW5rRm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LnZhbHVlcyhMaW5rRm9ybWF0KS5pbmNsdWRlcyh2YWx1ZSBhcyBMaW5rRm9ybWF0KSkge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua0Zvcm1hdCA9IHZhbHVlIGFzIExpbmtGb3JtYXQ7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBvcHRpb24gc2VsZWN0aW9uOicsIHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9KX0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnTmFtZSBvZiB0aGUgaW1wb3J0ZWQgYXR0YWNobWVudHM6Jylcblx0XHRcdC5zZXREZXNjKGNyZWF0ZUZyYWdtZW50KChmcmFnKSA9PiB7XG5cdFx0XHRcdGZyYWcuYXBwZW5kVGV4dCgnQ2hvb3NlIGhvdyB0byBuYW1lIHRoZSBpbXBvcnRlZCBhdHRhY2htZW50cywgdXNpbmcgdGhlIGZvbGxvd2luZyB2YXJpYWJsZXMgYXMgYSBwbGFjZWhvbGRlcjonKTtcblx0XHRcdFx0ZnJhZy5jcmVhdGVFbCgndWwnKVxuXHRcdFx0XHQuY3JlYXRlRWwoJ2xpJyx7dGV4dDogJyR7b3JpZ2luYWx9IGZvciB0aGUgbmFtZSBvZiB0aGUgb3JpZ2luYWwgZmlsZSd9KVxuXHRcdFx0XHQuY3JlYXRlRWwoJ2xpJyx7dGV4dDogJyR7ZGF0ZX0gZm9yIHRoZSBjdXJyZW50IGRhdGUnfSlcblx0XHRcdFx0LmNyZWF0ZUVsKCdsaScse3RleHQ6ICcke3V1aWR9IGZvciBhIDEyOC1iaXQgVW5pdmVyc2FsbHkgVW5pcXVlIElkZW50aWZpZXInfSlcblx0XHRcdFx0LmNyZWF0ZUVsKCdsaScse3RleHQ6ICcke21kNX0gZm9yIGEgTUQ1IGhhc2ggb2YgdGhlIGltcG9ydGVkIGZpbGUnfSk7XG5cdFx0XHR9KSlcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBhdHRhY2htZW50IG5hbWUnKTtcblx0XHRcdFx0dGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50TmFtZSk7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZih2YWx1ZS50cmltKCk9PScnKSB7XG5cdFx0XHRcdFx0XHR2YWx1ZSA9ICcke29yaWdpbmFsfSc7IC8vIFRPRE86IGltcHJvdmUgY2hlY2tpbmcgdGhlIGlucHV0IGJ5IHRoZSB1c2VyIHRoYXQgaXQgaXMgbm90IGVtcHR5XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF0dGFjaG1lbnROYW1lID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KX0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGF0ZSBmb3JtYXQ6Jylcblx0XHRcdC5zZXREZXNjKGNyZWF0ZUZyYWdtZW50KChmcmFnKSA9PiB7XG5cdFx0XHRcdFx0ZnJhZy5hcHBlbmRUZXh0KCdDaG9vc2UgdGhlIGRhdGUgZm9ybWF0LCBiYXNlZCBvbiAnKTtcblx0XHRcdFx0XHRmcmFnLmNyZWF0ZUVsKCdhJywge1xuXHRcdFx0XHRcdFx0aHJlZjogJ2h0dHBzOi8vbW9tZW50anNjb20ucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0L21vbWVudC8wNC1kaXNwbGF5aW5nLzAxLWZvcm1hdCcsXG5cdFx0XHRcdFx0XHR0ZXh0OiAnbW9tZW50anMnLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGZyYWcuYXBwZW5kVGV4dCgnIHN5bnRheC4nKX0pKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XG5cdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGRhdGUgZm9ybWF0Jyk7XG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCk7XG5cdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KX0pO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQXR0YWNobWVudCBvcGVuaW5nJyB9KTtcblxuXHRcdGxldCBrZXk7XG5cdFx0Y29uc3Qgb3MgPSBuYXZpZ2F0b3IucGxhdGZvcm0udG9VcHBlckNhc2UoKTtcblx0XHRpZiAob3MuaW5jbHVkZXMoJ01BQycpKSB7XG5cdFx0XHRrZXkgPSAnXHUyMzE4Jztcblx0XHR9IGVsc2UgeyAvLyBEZWZhdWx0IHRvIFdpbmRvd3MvTGludXggYmluZGluZ3Ncblx0XHRcdGtleSA9ICdDdHJsJztcblx0XHR9XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdPcGVuIGF0dGFjaG1lbnQgd2l0aCBkZWZhdWx0IGV4dGVybmFsIGFwcGxpY2F0aW9uOicpXG5cdFx0XHQuc2V0RGVzYyhgSWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCwgd2hlbiB5b3Ugb3BlbiBhbiBhdHRhY2htZW50IGJ5IGhvbGRpbmcgJHtrZXl9LCB0aGUgYXR0YWNobWVudCBvcGVucyBpbiBkZWZhdWx0IGV4dGVybmFsIGFwcGxpY2F0aW9uLmApXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5BdHRhY2htZW50RXh0ZXJuYWwpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuQXR0YWNobWVudEV4dGVybmFsID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KSk7XG5cblx0XHRpZiAob3MuaW5jbHVkZXMoJ01BQycpKSB7XG5cdFx0XHRrZXkgPSAnXHUyMzE4K1x1MjMyNSc7XG5cdFx0fSBlbHNlIHsgLy8gRGVmYXVsdCB0byBXaW5kb3dzL0xpbnV4IGJpbmRpbmdzXG5cdFx0XHRrZXkgPSAnQ3RybCtBbHQnO1xuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZXZlYWwgYXR0YWNobWVudCBpbiBzeXN0ZW0ncyBmaWxlIG1hbmFnZXI6XCIpXG5cdFx0XHQuc2V0RGVzYyhgSWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCwgd2hlbiB5b3Ugb3BlbiBhbiBhdHRhY2htZW50IGJ5IGhvbGRpbmcgJHtrZXl9LCB0aGUgYXR0YWNobWVudCBpcyBzaG93biBpbiB0aGUgc3lzdGVtJ3MgZmlsZSBtYW5hZ2VyLmApXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVhbEF0dGFjaG1lbnQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXZlYWxBdHRhY2htZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KSk7XG5cblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0F0dGFjaG1lbnQgbWFuYWdlbWVudCcgfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZW5hbWUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIGF1dG9tYXRpY2FsbHkgYW5kIHVwZGF0ZSBhbGwgbGlua3MgY29ycmVzcG9uZGluZ2x5OicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCwgd2hlbiB5b3UgcmVuYW1lL21vdmUgYW4gbm90ZSwgaWYgdGhlIHJlbmFtZWQgbm90ZSBoYXMgYW4gYXR0YWNobWVudCBmb2xkZXIgY29ubmVjdGVkIHRvIGl0LCBcXFxuXHRcdFx0XHRpdHMgYXR0YWNobWVudCBmb2xkZXIgaXMgcmVuYW1lZC9tb3ZlZCB0byBhIG5ldyBuYW1lL2xvY2F0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5ldyBuYW1lIG9mIHRoZSBub3RlLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWVBdHRhY2htZW50Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZUF0dGFjaG1lbnRGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RlbGV0ZSB0aGUgYXR0YWNobWVudCBmb2xkZXIgYXV0b21hdGljYWxseSB3aGVuIHRoZSBjb3JyZXNwb25kaW5nIG5vdGUgaXMgZGVsZXRlZDonKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgb3B0aW9uIGlzIGVuYWJsZWQsIHdoZW4geW91IGRlbGV0ZSBhIG5vdGUsIGlmIHRoZSBkZWxldGVkIG5vdGUgaGFzIGFuIGF0dGFjaG1lbnQgZm9sZGVyIGNvbm5lY3RlZCB0byBpdCwgXFxcblx0XHRcdFx0aXRzIGF0dGFjaG1lbnQgZm9sZGVyIHdpbGwgYmUgZGVsZXRlZCBhcyB3ZWxsLiBcXFxuXHRcdFx0XHROb3RlOiBhdXRvbWF0aWMgZGVsZXRpb24gb25seSB3b3JrcyB3aGVuIHRoZSBuYW1lIG9mIHRoZSBhdHRhY2htZW50IGZvbGRlciBjb250YWlucyAke25vdGVuYW1lfS4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvRGVsZXRlQXR0YWNobWVudEZvbGRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9EZWxldGVBdHRhY2htZW50Rm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBc2sgY29uZmlybWF0aW9uIGJlZm9yZSBkZWxldGluZyB0aGUgYXR0YWNobWVudCBmb2xkZXI6Jylcblx0XHRcdC5zZXREZXNjKCdJZiBlbmFibGVkLCB0aGUgdXNlciBpcyBhc2tlZCBlYWNoIHRpbWUgd2hldGhlciB0byBkZWxldGUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGVBdHRhY2htZW50Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0ZUF0dGFjaG1lbnRGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Rpc3BsYXkgb2YgYXR0YWNobWVudCBmb2xkZXJzJyB9KTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdIaWRlIGF0dGFjaG1lbnQgZm9sZGVyczonKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgb3B0aW9uIGlzIGVuYWJsZWQsIHRoZSBhdHRhY2htZW50IGZvbGRlcnMgd2lsbCBub3QgYmUgc2hvd24uJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaGlkZUF0dGFjaG1lbnRGb2xkZXJzKHRydWUpO1xuXHRcdFx0fSkpO1xuXHR9XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWluZmVycmFibGUtdHlwZXMgKi9cbi8vIEltcG9ydEF0dGFjaG1lbnRzTW9kYWwudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge1xuXHRcdEltcG9ydEFjdGlvblR5cGUsXG5cdFx0SW1wb3J0QWN0aW9uQ2hvaWNlUmVzdWx0LFxuXHRcdE92ZXJ3cml0ZUNob2ljZVJlc3VsdCxcblx0XHRPdmVyd3JpdGVDaG9pY2VPcHRpb25zLFxuXHRcdEltcG9ydEZyb21WYXVsdE9wdGlvbnMsXG5cdFx0SW1wb3J0RnJvbVZhdWx0Q2hvaWNlUmVzdWx0LFxuXHRcdENoZWNrYm94T3B0aW9ucyxcblx0XHRZZXNOb1R5cGVzLFxuXHRcdC8vIEltcG9ydE9wZXJhdGlvblR5cGUsXG5cdH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwidXRpbHNcIjtcbmltcG9ydCB0eXBlIEltcG9ydEF0dGFjaG1lbnRzIGZyb20gJ21haW4nOyAvLyBJbXBvcnQgdGhlIHR5cGUgb2YgeW91ciBwbHVnaW4gY2xhc3MgaWYgbmVlZGVkIGZvciB0eXBlIGhpbnRpbmdcblxuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiOyAvLyBOb2RlLmpzIHBhdGggbW9kdWxlIHRvIGhhbmRsZSBwYXRoIG9wZXJhdGlvbnNcblxuZXhwb3J0IGNsYXNzIEltcG9ydEFjdGlvblR5cGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cHJvbWlzZTogUHJvbWlzZTxJbXBvcnRBY3Rpb25DaG9pY2VSZXN1bHQ+O1xuXHRwcml2YXRlIHJlc29sdmVDaG9pY2U6IChyZXN1bHQ6IEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdCkgPT4gdm9pZCA9ICgpID0+IHt9OyAgLy8gVG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4gSW5pdGlhbGl6ZSB3aXRoIGEgbm8tb3AgZnVuY3Rpb25cblx0cHJpdmF0ZSBzZWxlY3RlZEFjdGlvbjogSW1wb3J0QWN0aW9uVHlwZTtcblx0cHJpdmF0ZSBzZWxlY3RlZEVtYmVkT3B0aW9uOiBZZXNOb1R5cGVzO1xuXHRwcml2YXRlIHJlbWVtYmVyQ2hvaWNlOiBib29sZWFuID0gZmFsc2U7ICAvLyBQcml2YXRlIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBjaGVja2JveCBzdGF0ZVxuXHRcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cywgcHJpdmF0ZSBsYXN0QWN0aW9uRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZSwgcHJpdmF0ZSBsYXN0RW1iZWRPbkltcG9ydDogWWVzTm9UeXBlcykge1xuXHRcdC8vIHVzZSBUeXBlU2NyaXB0IGBwYXJhbWV0ZXIgcHJvcGVydGllc2AgdG8gaW5pdGlhbGl6ZSBgcGx1Z2luYC5cblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlPEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdD4oKHJlc29sdmUpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZSA9IHJlc29sdmU7XG5cdFx0fSk7XG5cdFx0dGhpcy5zZWxlY3RlZEFjdGlvbiA9IGxhc3RBY3Rpb25GaWxlc09uSW1wb3J0O1xuXHRcdHRoaXMuc2VsZWN0ZWRFbWJlZE9wdGlvbiA9IGxhc3RFbWJlZE9uSW1wb3J0O1xuXHR9XG5cblx0Y3JlYXRlVG9nZ2xlKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50LCBxdWVzdGlvblRleHQ6IHN0cmluZywgb3B0aW9uQTogc3RyaW5nLCBvcHRpb25COiBzdHJpbmcsIGluaXRpYWxPcHRpb246IENoZWNrYm94T3B0aW9ucywgY2FsbGJhY2s6IChzZWxlY3RlZE9wdGlvbjpDaGVja2JveE9wdGlvbnMpID0+IHZvaWQsIHdpdGhTZXBhcmF0b3I6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdC8vIE1haW4gY29udGFpbmVyIHRoYXQgaG9sZHMgYm90aCB0aGUgcXVlc3Rpb24gYW5kIHRoZSB0b2dnbGUgZ3JvdXBcblx0XHRjb25zdCB0ciA9IHRhYmxlLmNyZWF0ZUVsKCd0cicpO1xuXHRcdGlmKHdpdGhTZXBhcmF0b3IpIHtcblx0XHRcdHRyLmFkZENsYXNzKCdzZXAnKTtcblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHF1ZXN0aW9uIGFsaWduZWQgdG8gdGhlIGxlZnRcblx0XHR0ci5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHF1ZXN0aW9uVGV4dCwgY2xzOiAnYWN0aW9uLXF1ZXN0aW9uJyB9KTtcblxuXHRcdC8vIExhYmVsIGZvciBvcHRpb24gQSAoZS5nLiwgXCJNb3ZlXCIpXG5cdFx0dHIuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBvcHRpb25BLCBjbHM6ICd0b2dnbGUtb3B0aW9uLUEnIH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0b2dnbGUgc3dpdGNoXG5cdFx0Y29uc3QgdGQgPSB0ci5jcmVhdGVFbCgndGQnKTtcblx0XHRjb25zdCBzd2l0Y2hMYWJlbCA9IHRkLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAnc3dpdGNoJyB9KTtcblx0XHRjb25zdCBpbnB1dCA9IHN3aXRjaExhYmVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcblx0XHRpZihpbml0aWFsT3B0aW9uPT1DaGVja2JveE9wdGlvbnMuQSkge1xuXHRcdFx0aW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dC5jaGVja2VkID0gdHJ1ZTtcblx0XHR9XG5cdFx0XG5cdFx0c3dpdGNoTGFiZWwuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3NsaWRlcicgfSk7XG5cblx0XHQvLyBMYWJlbCBmb3Igb3B0aW9uIEIgKGUuZy4sIFwiQ29weVwiKVxuXHRcdHRyLmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogb3B0aW9uQiwgY2xzOiAndG9nZ2xlLW9wdGlvbi1CJyB9KTtcblxuXHRcdC8vIEV2ZW50IGxpc3RlbmVyIGZvciB0b2dnbGVcblx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0Y2FsbGJhY2soaW5wdXQuY2hlY2tlZCA/IENoZWNrYm94T3B0aW9ucy5CIDogQ2hlY2tib3hPcHRpb25zLkEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGxldCBpbml0aWFsT3B0aW9uO1xuXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1wb3J0LWF0dGFjaC1wbHVnaW4nIH0pO1xuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ltcG9ydCBGaWxlcycgfSk7XG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ29uZmlndXJlIHRoZSBpbXBvcnQgb3B0aW9ucyBhbmQgdGhlbiBwcmVzcyBlaXRoZXIgZW50ZXIgb3IgdGhlIGltcG9ydCBidXR0b24uJyB9KTtcblxuXHRcdGNvbnN0IHRhYmxlID0gY29udGFpbmVyLmNyZWF0ZUVsKCd0YWJsZScpO1xuXHRcdFxuXHRcdHN3aXRjaCh0aGlzLmxhc3RBY3Rpb25GaWxlc09uSW1wb3J0KXtcblx0XHRjYXNlIEltcG9ydEFjdGlvblR5cGUuTU9WRTpcblx0XHRcdGluaXRpYWxPcHRpb24gPSBDaGVja2JveE9wdGlvbnMuQTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgSW1wb3J0QWN0aW9uVHlwZS5DT1BZOlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRpbml0aWFsT3B0aW9uID0gQ2hlY2tib3hPcHRpb25zLkI7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBDcmVhdGluZyBhY3Rpb24gdG9nZ2xlXG5cdFx0dGhpcy5jcmVhdGVUb2dnbGUodGFibGUsICdEbyB5b3Ugd2FudCB0byBtb3ZlIG9yIGNvcHkgdGhlIGZpbGVzIHRvIHRoZSB2YXVsdD8nLCAnTW92ZScsICdDb3B5JywgaW5pdGlhbE9wdGlvbiwgKHNlbGVjdGVkT3B0aW9uOkNoZWNrYm94T3B0aW9ucykgPT4ge1xuXHRcdFx0aWYoc2VsZWN0ZWRPcHRpb249PUNoZWNrYm94T3B0aW9ucy5BKXtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEFjdGlvbiA9IEltcG9ydEFjdGlvblR5cGUuTU9WRTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRBY3Rpb24gPSBJbXBvcnRBY3Rpb25UeXBlLkNPUFk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSk7XG5cblx0XHRzd2l0Y2godGhpcy5sYXN0RW1iZWRPbkltcG9ydCl7XG5cdFx0Y2FzZSBZZXNOb1R5cGVzLllFUzpcblx0XHRcdGluaXRpYWxPcHRpb24gPSBDaGVja2JveE9wdGlvbnMuQTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgWWVzTm9UeXBlcy5OTzpcblx0XHRkZWZhdWx0OlxuXHRcdFx0aW5pdGlhbE9wdGlvbiA9IENoZWNrYm94T3B0aW9ucy5CO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRpbmcgYWN0aW9uIHRvZ2dsZVxuXHRcdHRoaXMuY3JlYXRlVG9nZ2xlKHRhYmxlLCAnRG8geW91IHdhbnQgdG8gZW1iZWQgb3IgbGluayB0aGUgZmlsZXMgdG8gdGhlIHZhdWx0PycsICdFbWJlZCcsICdMaW5rJywgaW5pdGlhbE9wdGlvbiwgKHNlbGVjdGVkT3B0aW9uOkNoZWNrYm94T3B0aW9ucykgPT4ge1xuXHRcdFx0aWYoc2VsZWN0ZWRPcHRpb249PUNoZWNrYm94T3B0aW9ucy5BKXtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEVtYmVkT3B0aW9uID0gWWVzTm9UeXBlcy5ZRVM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkRW1iZWRPcHRpb24gPSBZZXNOb1R5cGVzLk5PO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdFx0Ly8gQ3JlYXRpbmcgcmVtZW1iZXIgdG9nZ2xlXG5cdFx0dGhpcy5jcmVhdGVUb2dnbGUodGFibGUsICdTYXZlIHRoaXMgYW5zd2VyIGluIHRoZSBzZXR0aW5ncyBmb3IgdGhlIGZ1dHVyZT8nLCAnWWVzJywgJ05vJywgQ2hlY2tib3hPcHRpb25zLkIsIChzZWxlY3RlZE9wdGlvbjpDaGVja2JveE9wdGlvbnMpID0+IHtcblx0XHRcdGlmKHNlbGVjdGVkT3B0aW9uPT1DaGVja2JveE9wdGlvbnMuQSl7XG5cdFx0XHRcdHRoaXMucmVtZW1iZXJDaG9pY2UgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yZW1lbWJlckNob2ljZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSAnTW92ZScgYnV0dG9uIGluc2lkZSB0aGUgY29udGFpbmVyXG5cdFx0Y29uc3QgaW1wb3J0QnV0dG9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7Y2xzOidpbXBvcnQtYnV0dG9ucyd9KTtcblxuXHRcdC8qXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gaW1wb3J0QnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ2FuY2VsJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0pO1xuXHRcdCovXG5cblx0XHRjb25zdCBpbXBvcnRCdXR0b24gPSBpbXBvcnRCdXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdJbXBvcnQnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YSdcblx0XHR9KTtcblx0XHRpbXBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmltcG9ydCgpO1xuXHRcdH0pO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHQvLyBTZXQgZm9jdXMgd2l0aCBhIHNsaWdodCBkZWxheTpcblx0XHRcdC8vIHRoaXMgbWV0aG9kIGxldmVyYWdlcyBKYXZhU2NyaXB0J3MgZXZlbnQgbG9vcCwgZW5zdXJpbmcgdGhhdCBmb2N1c2luZyB0aGUgYnV0dG9uXG5cdFx0XHQvLyBpcyBlbnF1ZXVlZCBhZnRlciBhbGwgdGhlIGVsZW1lbnRzIGFyZSBwcm9wZXJseSByZW5kZXJlZCBhbmQgdGhlIERPTSBpcyBmdWxseSB1cGRhdGVkLlxuXHRcdFx0aW1wb3J0QnV0dG9uLmZvY3VzKCk7XG5cdFx0fSwgMCk7IC8vIEEgdGltZW91dCBvZiAwIG1zIGlzIG9mdGVuIGVub3VnaFxuXG5cdFx0Lypcblx0XHRjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0aW1wb3J0QnV0dG9uLmNsaWNrKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ki9cblx0fVxuXG5cdGFzeW5jIGltcG9ydCgpIHtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2Uoe1xuXHRcdFx0YWN0aW9uOiB0aGlzLnNlbGVjdGVkQWN0aW9uLFxuXHRcdFx0ZW1iZWQ6IHRoaXMuc2VsZWN0ZWRFbWJlZE9wdGlvbixcblx0XHRcdHJlbWVtYmVyQ2hvaWNlOiB0aGlzLnJlbWVtYmVyQ2hvaWNlXG5cdFx0fSk7XG5cdFx0dGhpcy5jbG9zZSgpOyBcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2UobnVsbCk7ICAvLyBSZXNvbHZlIHdpdGggbnVsbCBpZiB0aGUgbW9kYWwgaXMgY2xvc2VkIHdpdGhvdXQgYSBjaG9pY2Vcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgT3ZlcndyaXRlQ2hvaWNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8T3ZlcndyaXRlQ2hvaWNlUmVzdWx0Pjtcblx0cHJpdmF0ZSByZXNvbHZlQ2hvaWNlOiAocmVzdWx0OiBPdmVyd3JpdGVDaG9pY2VSZXN1bHQpID0+IHZvaWQgPSAoKSA9PiB7fTsgIC8vIFRvIHJlc29sdmUgdGhlIHByb21pc2UuIEluaXRpYWxpemUgd2l0aCBhIG5vLW9wIGZ1bmN0aW9uXG5cdHByaXZhdGUgZmlsZW5hbWU6IHN0cmluZztcblx0XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1wb3J0QXR0YWNobWVudHMsIHByaXZhdGUgb3JpZ2luYWxGaWxlUGF0aDogc3RyaW5nLCBwcml2YXRlIGRlc3RGaWxlUGF0aDogc3RyaW5nKSB7XG5cdFx0Ly8gdXNlIFR5cGVTY3JpcHQgYHBhcmFtZXRlciBwcm9wZXJ0aWVzYCB0byBpbml0aWFsaXplIGBwbHVnaW5gLlxuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5wcm9taXNlID0gbmV3IFByb21pc2U8T3ZlcndyaXRlQ2hvaWNlUmVzdWx0PigocmVzb2x2ZSkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHZlQ2hvaWNlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0XHR0aGlzLmZpbGVuYW1lID0gVXRpbHMuZ2V0RmlsZW5hbWUoZGVzdEZpbGVQYXRoKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbXBvcnQtYXR0YWNoLXBsdWdpbicgfSk7XG5cblx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSW1wb3J0IEZpbGVzJyB9KTtcblx0XHRjb25zdCBwYXJhZ3JhcGggPSBjb250YWluZXIuY3JlYXRlRWwoJ3AnKTtcblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdZb3UgYXJlIHRyeWluZyB0byBjb3B5IHRoZSBmaWxlIFwiJyk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIGEgaHlwZXJsaW5rIGZvciB0aGUgZmlsZW5hbWVcblx0XHRjb25zdCBvcmlnRmlsZUxpbmsgPSBwYXJhZ3JhcGguY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLm9yaWdpbmFsRmlsZVBhdGgsXG5cdFx0XHRocmVmOiAnIycsXG5cdFx0fSk7XG5cdFx0b3JpZ0ZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHR3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLm9yaWdpbmFsRmlsZVBhdGgpO1xuXHRcdH0pO1xuXG5cdFx0cGFyYWdyYXBoLmFwcGVuZCgnXCIgaW50byB0aGUgdmF1bHQsIHdoZXJlIGEgXCInKTtcblxuXHRcdC8vIENyZWF0ZSBhIGh5cGVybGluayBmb3IgdGhlIGZpbGVuYW1lXG5cdFx0Y29uc3QgdmF1bHRGaWxlTGluayA9IHBhcmFncmFwaC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdmaWxlJyxcblx0XHRcdGhyZWY6ICcjJyxcblx0XHR9KTtcblx0XHR2YXVsdEZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHR3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLmRlc3RGaWxlUGF0aCk7XG5cdFx0fSk7XG5cblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdcIiB3aXRoIHRoZSBzYW1lIG5hbWUgaXMgYWxyZWFkeSBwcmVzZW50LicpO1xuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJyx7dGV4dDogJ0hvdyBkbyB5b3Ugd2FudCB0byBwcm9jZWVkPyd9KTtcblxuXHRcdC8vIENyZWF0ZSB0aGUgJ01vdmUnIGJ1dHRvbiBpbnNpZGUgdGhlIGNvbnRhaW5lclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe2NsczonaW1wb3J0LWJ1dHRvbnMnfSk7XG5cdFx0Y29uc3Qga2VlcEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0tlZXAgYm90aCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdH0pO1xuXHRcdGtlZXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5LRUVQQk9USCk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1xuXHRcdGNvbnN0IG92ZXJ3cml0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ092ZXJ3cml0ZScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRvdmVyd3JpdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5PVkVSV1JJVEUpO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRjb25zdCBza2lwQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnU2tpcCcsXG5cdFx0XHRjbHM6ICdtb2QtY2FuY2VsJ1xuXHRcdH0pO1xuXHRcdHNraXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5TS0lQKTtcblx0XHRcdHRoaXMuY2xvc2UoKTsgXG5cdFx0fSk7XG5cdFx0XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHQvLyBTZXQgZm9jdXMgd2l0aCBhIHNsaWdodCBkZWxheTpcblx0XHRcdC8vIHRoaXMgbWV0aG9kIGxldmVyYWdlcyBKYXZhU2NyaXB0J3MgZXZlbnQgbG9vcCwgZW5zdXJpbmcgdGhhdCBmb2N1c2luZyB0aGUgYnV0dG9uXG5cdFx0XHQvLyBpcyBlbnF1ZXVlZCBhZnRlciBhbGwgdGhlIGVsZW1lbnRzIGFyZSBwcm9wZXJseSByZW5kZXJlZCBhbmQgdGhlIERPTSBpcyBmdWxseSB1cGRhdGVkLlxuXHRcdFx0a2VlcEJ1dHRvbi5mb2N1cygpO1xuXHRcdH0sIDApOyAvLyBBIHRpbWVvdXQgb2YgMCBtcyBpcyBvZnRlbiBlbm91Z2hcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2UobnVsbCk7ICAvLyBSZXNvbHZlIHdpdGggbnVsbCBpZiB0aGUgbW9kYWwgaXMgY2xvc2VkIHdpdGhvdXQgYSBjaG9pY2Vcblx0fVxufVxuXG5cbmV4cG9ydCBjbGFzcyBEZWxldGVBdHRhY2htZW50Rm9sZGVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8Ym9vbGVhbj47XG5cdHByaXZhdGUgcmVzb2x2ZUNob2ljZTogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCA9ICgpID0+IHt9OyAgLy8gVG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4gSW5pdGlhbGl6ZSB3aXRoIGEgbm8tb3AgZnVuY3Rpb25cblx0XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1wb3J0QXR0YWNobWVudHMsIHByaXZhdGUgYXR0YWNobWVudEZvbGRlclBhdGg6IHN0cmluZykge1xuXHRcdC8vIHVzZSBUeXBlU2NyaXB0IGBwYXJhbWV0ZXIgcHJvcGVydGllc2AgdG8gaW5pdGlhbGl6ZSBgcGx1Z2luYC5cblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXG5cdFx0Y29uc3QgYXR0YWNobWVudEZvbGRlclBhdGhfcGFyc2VkID0gcGF0aC5wYXJzZSh0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltcG9ydC1hdHRhY2gtcGx1Z2luJyB9KTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdJbXBvcnQgRmlsZXMnIH0pO1xuXHRcdGNvbnN0IHBhcmFncmFwaCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ0RvIHlvdSB3YW50IHRvIG1vdmUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIFwiJyk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIGEgaHlwZXJsaW5rIGZvciB0aGUgZmlsZW5hbWVcblx0XHRjb25zdCBmaWxlTGluayA9IHBhcmFncmFwaC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6IGF0dGFjaG1lbnRGb2xkZXJQYXRoX3BhcnNlZC5uYW1lLFxuXHRcdFx0aHJlZjogJyMnLFxuXHRcdH0pO1xuXHRcdGZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHQvLyB3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblx0XHRcdHdpbmRvdy5yZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5zaGVsbC5vcGVuUGF0aCh0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblx0XHR9KTtcblxuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ1wiIHRvIHRoZSBzeXN0ZW0gdHJhc2g/Jyk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6J2ltcG9ydC1idXR0b25zJ30pO1xuXHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0RlbGV0ZScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UodHJ1ZSk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1x0ICAgIFxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ1NraXAnLFxuXHRcdFx0Y2xzOiAnbW9kLWNhbmNlbCdcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoZmFsc2UpO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIFNldCBmb2N1cyB3aXRoIGEgc2xpZ2h0IGRlbGF5OlxuXHRcdFx0Ly8gdGhpcyBtZXRob2QgbGV2ZXJhZ2VzIEphdmFTY3JpcHQncyBldmVudCBsb29wLCBlbnN1cmluZyB0aGF0IGZvY3VzaW5nIHRoZSBidXR0b25cblx0XHRcdC8vIGlzIGVucXVldWVkIGFmdGVyIGFsbCB0aGUgZWxlbWVudHMgYXJlIHByb3Blcmx5IHJlbmRlcmVkIGFuZCB0aGUgRE9NIGlzIGZ1bGx5IHVwZGF0ZWQuXG5cdFx0XHRjYW5jZWxCdXR0b24uZm9jdXMoKTtcblx0XHR9LCAwKTsgLy8gQSB0aW1lb3V0IG9mIDAgbXMgaXMgb2Z0ZW4gZW5vdWdoXG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKGZhbHNlKTsgIC8vIFJlc29sdmUgd2l0aCBudWxsIGlmIHRoZSBtb2RhbCBpcyBjbG9zZWQgd2l0aG91dCBhIGNob2ljZVxuXHR9XG59XG5cblxuXG5leHBvcnQgY2xhc3MgSW1wb3J0RnJvbVZhdWx0Q2hvaWNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8SW1wb3J0RnJvbVZhdWx0Q2hvaWNlUmVzdWx0Pjtcblx0cHJpdmF0ZSByZXNvbHZlQ2hvaWNlOiAocmVzdWx0OiBJbXBvcnRGcm9tVmF1bHRDaG9pY2VSZXN1bHQpID0+IHZvaWQgPSAoKSA9PiB7fTsgIC8vIFRvIHJlc29sdmUgdGhlIHByb21pc2UuIEluaXRpYWxpemUgd2l0aCBhIG5vLW9wIGZ1bmN0aW9uXG5cdFxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBwbHVnaW46IEltcG9ydEF0dGFjaG1lbnRzLCBwcml2YXRlIHZhdWx0UGF0aDogc3RyaW5nLCBwcml2YXRlIG9yaWdpbmFsRmlsZVBhdGg6IHN0cmluZywgcHJpdmF0ZSBpbXBvcnRBY3Rpb246IEltcG9ydEFjdGlvblR5cGUpIHtcblx0XHQvLyB1c2UgVHlwZVNjcmlwdCBgcGFyYW1ldGVyIHByb3BlcnRpZXNgIHRvIGluaXRpYWxpemUgYHBsdWdpbmAuXG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZTxJbXBvcnRGcm9tVmF1bHRDaG9pY2VSZXN1bHQ+KChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltcG9ydC1hdHRhY2gtcGx1Z2luJyB9KTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdJbXBvcnQgRmlsZXMnIH0pO1xuXHRcdGNvbnN0IHBhcmFncmFwaCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ1RoZSBmaWxlIHlvdSBhcmUgdHJ5aW5nIHRvIGltcG9ydCBcIicpO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBhIGh5cGVybGluayBmb3IgdGhlIGZpbGVuYW1lXG5cdFx0Y29uc3QgZmlsZUxpbmsgPSBwYXJhZ3JhcGguY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiBwYXRoLnJlbGF0aXZlKHRoaXMudmF1bHRQYXRoLHRoaXMub3JpZ2luYWxGaWxlUGF0aCksXG5cdFx0XHRocmVmOiAnIycsXG5cdFx0fSk7XG5cdFx0ZmlsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGFuY2hvciBiZWhhdmlvclxuXHRcdFx0Ly8gT3BlbiB0aGUgZm9sZGVyIGluIHRoZSBzeXN0ZW0ncyBkZWZhdWx0IGZpbGUgZXhwbG9yZXJcblx0XHRcdHdpbmRvdy5yZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5zaGVsbC5zaG93SXRlbUluRm9sZGVyKHRoaXMub3JpZ2luYWxGaWxlUGF0aCk7XG5cdFx0fSk7XG5cblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdcIiBpcyBhbHJlYWR5IHN0b3JlZCBpbiB0aGUgdmF1bHQuJyk7XG5cblx0XHRpZih0aGlzLmltcG9ydEFjdGlvbj09SW1wb3J0QWN0aW9uVHlwZS5NT1ZFKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ3AnLHt0ZXh0OiAnWW91IGludGVuZGVkIHRvIG1vdmUgdGhlIGZpbGUuIFxcXG5cdFx0XHRcdFx0SG93ZXZlciwgbW92aW5nIGEgZmlsZSB0aGF0IGlzIGFscmVhZHkgaW4gdGhlIHZhdWx0IHRvIGEgbmV3IFxcXG5cdFx0XHRcdFx0ZGVzdGluYXRpb24gaW4gdGhlIHNhbWUgdmF1bHQgaXMgbm90IHN1cHBvcnRlZDsgXFxcblx0XHRcdFx0XHRvbmx5IGNvcHlpbmcgYW5kIGxpbmtpbmcgb3BlcmF0aW9ucyBhcmUgYWxsb3dlZC4nfSk7XG5cdFx0fVxuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJyx7dGV4dDogJ0RvIHlvdSB3YW50IHRvIG1ha2UgYSBjb3B5IG9yIHJlZmVyIHRvIHRoZSBvcmlnaW5hbCBmaWxlIGluIHRoZSB2YXVsdCB0aHJvdWdoIGEgcmVsYXRpdmUgcGF0aD8nfSk7XG5cblx0XHQvLyBDcmVhdGUgdGhlICdNb3ZlJyBidXR0b24gaW5zaWRlIHRoZSBjb250YWluZXJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6J2ltcG9ydC1idXR0b25zJ30pO1xuXHRcdGNvbnN0IGxpbmtCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdSZWxhdGl2ZSBwYXRoJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0bGlua0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZShJbXBvcnRGcm9tVmF1bHRPcHRpb25zLkxJTkspO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRjb25zdCBjb3B5QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ29weScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRjb3B5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKEltcG9ydEZyb21WYXVsdE9wdGlvbnMuQ09QWSk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1x0ICAgIFxuXHRcdGNvbnN0IHNraXBCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdTa2lwJyxcblx0XHRcdGNsczogJ21vZC1jYW5jZWwnXG5cdFx0fSk7XG5cdFx0c2tpcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZShJbXBvcnRGcm9tVmF1bHRPcHRpb25zLlNLSVApO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIFNldCBmb2N1cyB3aXRoIGEgc2xpZ2h0IGRlbGF5OlxuXHRcdFx0Ly8gdGhpcyBtZXRob2QgbGV2ZXJhZ2VzIEphdmFTY3JpcHQncyBldmVudCBsb29wLCBlbnN1cmluZyB0aGF0IGZvY3VzaW5nIHRoZSBidXR0b25cblx0XHRcdC8vIGlzIGVucXVldWVkIGFmdGVyIGFsbCB0aGUgZWxlbWVudHMgYXJlIHByb3Blcmx5IHJlbmRlcmVkIGFuZCB0aGUgRE9NIGlzIGZ1bGx5IHVwZGF0ZWQuXG5cdFx0XHRsaW5rQnV0dG9uLmZvY3VzKCk7XG5cdFx0fSwgMCk7IC8vIEEgdGltZW91dCBvZiAwIG1zIGlzIG9mdGVuIGVub3VnaFxuXG5cdFx0Lypcblx0XHRjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0a2VlcEJ1dHRvbi5jbGljaygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCovXG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKG51bGwpOyAgLy8gUmVzb2x2ZSB3aXRoIG51bGwgaWYgdGhlIG1vZGFsIGlzIGNsb3NlZCB3aXRob3V0IGEgY2hvaWNlXG5cdH1cbn1cbiIsICIvLyB0eXBlcy50c1xuXG5leHBvcnQgZW51bSBJbXBvcnRBY3Rpb25UeXBlIHtcblx0TU9WRT0nTU9WRScsXG5cdENPUFk9J0NPUFknLFxuXHRMSU5LPSdMSU5LJyxcblx0QVNLX1VTRVI9J0FTS19VU0VSJ1xufVxuXG5leHBvcnQgZW51bSBZZXNOb1R5cGVzIHtcblx0WUVTPSdZRVMnLFxuXHROTz0nTk8nLFxuXHRBU0tfVVNFUj0nQVNLX1VTRVInXG59XG5cbmV4cG9ydCBlbnVtIE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcyB7XG5cdEJVTExFVEVEPSdCVUxMRVRFRCcsXG5cdE5VTUJFUkVEPSdOVU1CRVJFRCcsXG5cdElOTElORT0nSU5MSU5FJ1xufVxuXG5leHBvcnQgZW51bSBJbXBvcnRPcGVyYXRpb25UeXBlIHtcblx0UEFTVEUsXG5cdERSQUdfQU5EX0RST1Bcbn1cblxuZXhwb3J0IGVudW0gUmVsYXRpdmVMb2NhdGlvbiB7XG5cdFNBTUU9J1NBTUUnLCAvLyBTYW1lIGZvbGRlciBhcyBjdXJyZW50IGZpbGVcblx0VkFVTFQ9J1ZBVUxUJywgLy8gVmF1bHQgZm9sZGVyXG59XG5cbmV4cG9ydCBlbnVtIExpbmtGb3JtYXQge1xuXHRSRUxBVElWRT0nUkVMQVRJVkUnLCAvLyBTYW1lIGZvbGRlciBhcyBjdXJyZW50IGZpbGVcblx0QUJTT0xVVEU9J0FCU09MVVRFJywgLy8gVmF1bHQgZm9sZGVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0QXR0YWNobWVudHNTZXR0aW5ncyB7XG5cdGFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0OiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRsYXN0QWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGU7XG5cdGFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGU7XG5cdGxhc3RBY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0OiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRlbWJlZEZpbGVzT25JbXBvcnQ6IFllc05vVHlwZXM7XG5cdGxhc3RFbWJlZEZpbGVzT25JbXBvcnQ6IFllc05vVHlwZXM7XG5cdG11bHRpcGxlRmlsZXNJbXBvcnRUeXBlOiBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXM7XG5cdGN1c3RvbURpc3BsYXlUZXh0OiBib29sZWFuO1xuXHRyZWxhdGl2ZUxvY2F0aW9uOiBSZWxhdGl2ZUxvY2F0aW9uO1xuXHRmb2xkZXJQYXRoOiBzdHJpbmc7XG5cdGxpbmtGb3JtYXQ6IExpbmtGb3JtYXQ7XG5cdGRhdGVGb3JtYXQ6IHN0cmluZztcblx0YXR0YWNobWVudE5hbWU6IHN0cmluZztcblx0YXV0b1JlbmFtZUF0dGFjaG1lbnRGb2xkZXI6IGJvb2xlYW47XG5cdGF1dG9EZWxldGVBdHRhY2htZW50Rm9sZGVyOiBib29sZWFuO1xuXHRjb25maXJtRGVsZXRlQXR0YWNobWVudEZvbGRlcjogYm9vbGVhbjtcblx0aGlkZUF0dGFjaG1lbnRGb2xkZXJzOiBib29sZWFuO1xuXHRyZXZlYWxBdHRhY2htZW50OiBib29sZWFuO1xuXHRvcGVuQXR0YWNobWVudEV4dGVybmFsOiBib29sZWFuO1xufVxuXG4vLyBEZWZpbmUgYW4gaW50ZXJmYWNlIGZvciB0aGUgcmV0dXJuIHR5cGVcbmV4cG9ydCBpbnRlcmZhY2UgQXR0YWNobWVudEZvbGRlclBhdGgge1xuXHRhdHRhY2htZW50c0ZvbGRlclBhdGg6IHN0cmluZztcblx0Y3VycmVudE5vdGVGb2xkZXJQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0U2V0dGluZ3NJbnRlcmZhY2Uge1xuXHRlbWJlZDogYm9vbGVhbjtcblx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlO1xufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdCA9IHtcblx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRlbWJlZDogWWVzTm9UeXBlcztcblx0cmVtZW1iZXJDaG9pY2U6IGJvb2xlYW47XG59IHwgbnVsbDtcblxuZXhwb3J0IGVudW0gT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucyB7XG5cdE9WRVJXUklURSxcblx0S0VFUEJPVEgsXG5cdFNLSVAsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwIHtcblx0b3BlbldpdGhEZWZhdWx0QXBwKGZpbGVwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIE92ZXJ3cml0ZUNob2ljZVJlc3VsdCA9IE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMgfCBudWxsO1xuXG5leHBvcnQgZW51bSBJbXBvcnRGcm9tVmF1bHRPcHRpb25zIHtcblx0Q09QWSxcblx0TElOSyxcblx0U0tJUFxufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIEltcG9ydEZyb21WYXVsdENob2ljZVJlc3VsdCA9IEltcG9ydEZyb21WYXVsdE9wdGlvbnMgfCBudWxsO1xuXG5leHBvcnQgZW51bSBDaGVja2JveE9wdGlvbnMge1xuXHRBLFxuXHRCXG59XG4iLCAiLy8gdXRpbHMudHNcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnOyAgLy8gVGhpcyBpbXBvcnRzIHRoZSBwcm9taXNlcyBBUEkgZnJvbSBmc1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsgICAgICAgICAvLyBTdGFuZGFyZCBpbXBvcnQgZm9yIHRoZSBwYXRoIG1vZHVsZVxuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZW5hbWUoZmlsZXBhdGg6IHN0cmluZykge1xuXHRyZXR1cm4gcGF0aC5wYXJzZShmaWxlcGF0aCkubmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFyZVBhdGhzU2FtZUZpbGUoZmlsZTE6c3RyaW5nLCBmaWxlMjpzdHJpbmcpIHtcblx0dHJ5IHtcblx0XHRjb25zdCByZWFscGF0aDEgPSBhd2FpdCBmcy5yZWFscGF0aChmaWxlMSk7XG5cdFx0Y29uc3QgcmVhbHBhdGgyID0gYXdhaXQgZnMucmVhbHBhdGgoZmlsZTIpO1xuXHRcdHJldHVybiBwYXRoLnJlbGF0aXZlKHJlYWxwYXRoMSxyZWFscGF0aDIpPT0nJ1xuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc29sdmluZyBwYXRoczonLCBlcnJvcik7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhc2hGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRjb25zdCBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpO1xuXHRsZXQgZmlsZUhhbmRsZSA9IG51bGw7XG5cdHRyeSB7XG5cdFx0ZmlsZUhhbmRsZSA9IGF3YWl0IGZzLm9wZW4oZmlsZVBhdGgsICdyJyk7IC8vIE9wZW4gdGhlIGZpbGUgdG8gZ2V0IGEgZmlsZWhhbmRsZVxuXHRcdGNvbnN0IHN0cmVhbSA9IGZpbGVIYW5kbGUuY3JlYXRlUmVhZFN0cmVhbSgpOyAgLy8gQ3JlYXRlIGEgcmVhZCBzdHJlYW0gZnJvbSB0aGUgZmlsZSBoYW5kbGVcblxuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRoYXNoLnVwZGF0ZShjaHVuayk7ICAvLyBVcGRhdGUgaGFzaCB3aXRoIGRhdGEgY2h1bmtcblx0XHR9XG5cdFx0cmV0dXJuIGhhc2guZGlnZXN0KCdoZXgnKTsgIC8vIFJldHVybiB0aGUgaGV4IGRpZ2VzdFxuXHR9IGZpbmFsbHkge1xuXHRcdGlmIChmaWxlSGFuZGxlKSB7XG5cdFx0XHRhd2FpdCBmaWxlSGFuZGxlLmNsb3NlKCk7ICAvLyBNYWtlIHN1cmUgdG8gY2xvc2UgdGhlIGZpbGUgaGFuZGxlXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGRhdGVGb3JtYXQ6c3RyaW5nKTpzdHJpbmcge1xuXHR0cnkge1xuXHRcdC8vIHVzZSBvZiBNb21lbnQuanMgdG8gZm9ybWF0IHRoZSBjdXJyZW50IGRhdGVcblx0XHRjb25zdCBkYXRlVGltZSA9IHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoZGF0ZUZvcm1hdCk7XG5cdFx0cmV0dXJuIGRhdGVUaW1lOyBcblx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRpZihlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBmb3JtYXR0aW5nIGRhdGU6JywgZXJyb3IubWVzc2FnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZvcm1hdHRpbmcgZGF0ZTonLCBlcnJvcik7XG5cdFx0fVxuXHRcdHJldHVybiAnREFURV9FUlJPUic7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF0dGFjaG1lbnROYW1lKG5hbWVQYXR0ZXJuOnN0cmluZyxkYXRlRm9ybWF0OnN0cmluZyxvcmlnaW5hbEZpbGVQYXRoOnN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cblx0Y29uc3Qgb3JpZ2luYWxGaWxlUGF0aF9wYXJzZWQgPSBwYXRoLnBhcnNlKG9yaWdpbmFsRmlsZVBhdGgpO1xuXG5cdGNvbnN0IGZpbGVUb0ltcG9ydE5hbWUgPSBvcmlnaW5hbEZpbGVQYXRoX3BhcnNlZC5uYW1lO1xuXHRcblx0bGV0IGF0dGFjaG1lbnROYW1lID0gbmFtZVBhdHRlcm4ucmVwbGFjZSgvXFwkXFx7b3JpZ2luYWxcXH0vZywgZmlsZVRvSW1wb3J0TmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdC5yZXBsYWNlKC9cXCRcXHt1dWlkXFx9L2csIHV1aWR2NCgpKVxuXHRcdFx0XHRcdFx0XHRcdFx0LnJlcGxhY2UoL1xcJFxce2RhdGVcXH0vZywgZm9ybWF0RGF0ZVRpbWUoZGF0ZUZvcm1hdCkpO1xuXG5cdGlmKG5hbWVQYXR0ZXJuLmluY2x1ZGVzKCcke21kNX0nKSkge1xuXHRcdGxldCBoYXNoID0gJydcblx0XHR0cnkge1xuXHRcdFx0aGFzaCA9IGF3YWl0IGhhc2hGaWxlKG9yaWdpbmFsRmlsZVBhdGgpO1xuXHRcdH0gY2F0Y2ggKGVycjogdW5rbm93bikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgaGFzaGluZyB0aGUgZmlsZTonLCBlcnIpO1xuXHRcdH1cblx0XHRhdHRhY2htZW50TmFtZSA9IGF0dGFjaG1lbnROYW1lLnJlcGxhY2UoL1xcJFxce21kNVxcfS9nLCBoYXNoKTtcblx0fVxuXG5cdC8vIGFkZCB0aGUgZXh0ZW5zaW9uXG5cdGF0dGFjaG1lbnROYW1lICs9IG9yaWdpbmFsRmlsZVBhdGhfcGFyc2VkLmV4dDtcblx0XG5cdHJldHVybiBhdHRhY2htZW50TmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmROZXdGaWxlbmFtZShkZXN0RmlsZVBhdGg6IHN0cmluZywpXG57XG5cdGNvbnN0IGRlc3RGaWxlUGF0aF9wYXJzZSA9IHBhdGgucGFyc2UoZGVzdEZpbGVQYXRoKTtcblxuXHRsZXQgY291bnRlciA9IDE7XG5cdGxldCBmaWxlRXhpc3RzO1xuXHRsZXQgbmV3RmlsZW5hbWUgPSBudWxsO1xuXHRkbyB7XG5cdFx0bmV3RmlsZW5hbWU9cGF0aC5qb2luKGRlc3RGaWxlUGF0aF9wYXJzZS5kaXIsYCR7ZGVzdEZpbGVQYXRoX3BhcnNlLm5hbWV9ICgke2NvdW50ZXJ9KSR7ZGVzdEZpbGVQYXRoX3BhcnNlLmV4dH1gKTtcblx0XHRmaWxlRXhpc3RzID0gYXdhaXQgY2hlY2tGaWxlRXhpc3RzKG5ld0ZpbGVuYW1lKTtcblx0XHRjb3VudGVyKz0xO1xuXHR9IHdoaWxlKGZpbGVFeGlzdHMpO1xuXG5cdHJldHVybiBuZXdGaWxlbmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzRmlsZUluVmF1bHQodmF1bHRQYXRoOnN0cmluZyxmaWxlUGF0aDpzdHJpbmcpIHtcblx0dHJ5IHtcblx0XHQvLyBSZXNvbHZlIHRoZSByZWFsIChhYnNvbHV0ZSkgcGF0aHMgdG8gaGFuZGxlIHN5bWxpbmtzIGFuZCByZWxhdGl2ZSBwYXRoc1xuXHRcdGNvbnN0IHJlYWxGaWxlUGF0aCA9IGF3YWl0IGZzLnJlYWxwYXRoKGZpbGVQYXRoKTtcblx0XHRjb25zdCByZWFsVmF1bHRGb2xkZXJQYXRoID0gYXdhaXQgZnMucmVhbHBhdGgodmF1bHRQYXRoKTtcblxuXHRcdC8vIE5vcm1hbGl6ZSB0aGUgcGF0aHMgdG8gZW5zdXJlIHRoZXkgYXJlIGNvbXBhcmFibGVcblx0XHRjb25zdCBub3JtYWxpemVkRmlsZVBhdGggPSBwYXRoLm5vcm1hbGl6ZShyZWFsRmlsZVBhdGgpO1xuXHRcdGNvbnN0IG5vcm1hbGl6ZWRWYXVsdEZvbGRlclBhdGggPSBwYXRoLm5vcm1hbGl6ZShyZWFsVmF1bHRGb2xkZXJQYXRoKTtcblxuXHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIHBhdGggc3RhcnRzIHdpdGggdGhlIGZvbGRlciBwYXRoXG5cdFx0Ly8gRW5zdXJlIHRoZSBmb2xkZXIgcGF0aCBlbmRzIHdpdGggYSBwYXRoIHNlcGFyYXRvciB0byBhdm9pZCBwYXJ0aWFsIGZvbGRlciBuYW1lIG1hdGNoZXNcblxuXHRcdGlmKG5vcm1hbGl6ZWRGaWxlUGF0aC5zdGFydHNXaXRoKGAke25vcm1hbGl6ZWRWYXVsdEZvbGRlclBhdGh9JHtwYXRoLnNlcH1gKSkge1xuXHRcdFx0Ly8gcmV0dXJuIG5vcm1hbGl6ZWRGaWxlUGF0aC5zdWJzdHJpbmcobm9ybWFsaXplZFZhdWx0Rm9sZGVyUGF0aC5sZW5ndGgpLnJlcGxhY2UoL15cXC8vLCcnKTtcblx0XHRcdHJldHVybiBub3JtYWxpemVkRmlsZVBhdGg7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcmVzb2x2aW5nIHBhdGhzOicsIGVycm9yKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRmlsZUV4aXN0cyhmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KGZpbGVQYXRoKTtcblx0XHRyZXR1cm4gc3RhdHMuaXNGaWxlKCk7ICAvLyBDaGVjayBpZiB0aGUgcGF0aCBpcyBhIGRpcmVjdG9yeVxuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdjb2RlJyBpbiBlcnJvciAmJiBlcnJvci5jb2RlID09PSAnRU5PRU5UJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlOyAgLy8gVGhlIGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdFxuXHRcdH1cblx0XHR0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGlmIGl0J3Mgbm90IHJlbGF0ZWQgdG8gdGhlIGV4aXN0ZW5jZSBjaGVja1xuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RpcmVjdG9yeUV4aXN0cyhkaXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBzdGF0cyA9IGF3YWl0IGZzLnN0YXQoZGlyUGF0aCk7XG5cdFx0cmV0dXJuIHN0YXRzLmlzRGlyZWN0b3J5KCk7ICAvLyBDaGVjayBpZiB0aGUgcGF0aCBpcyBhIGRpcmVjdG9yeVxuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdjb2RlJyBpbiBlcnJvciAmJiBlcnJvci5jb2RlID09PSAnRU5PRU5UJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlOyAgLy8gVGhlIGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdFxuXHRcdH1cblx0XHR0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGlmIGl0J3Mgbm90IHJlbGF0ZWQgdG8gdGhlIGV4aXN0ZW5jZSBjaGVja1xuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGNvbnN0IGRvRXhpc3QgPSBhd2FpdCBjaGVja0RpcmVjdG9yeUV4aXN0cyhwYXRoKTtcblx0aWYgKCFkb0V4aXN0KSB7XG5cdFx0YXdhaXQgZnMubWtkaXIocGF0aCx7cmVjdXJzaXZlOiB0cnVlfSk7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG4iLCAiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCAiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV07XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgY29uc3QgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwgImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwgImltcG9ydCBuYXRpdmUgZnJvbSAnLi9uYXRpdmUuanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHY0OyIsICJpbXBvcnQge1dvcmtzcGFjZUxlYWYsIFRGaWxlLCBPcGVuVmlld1N0YXRlfSBmcm9tICdvYnNpZGlhbic7XG5cbmltcG9ydCBJbXBvcnRBdHRhY2htZW50cyBmcm9tICdtYWluJztcblxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxubGV0IG1ldGFLZXlQcmVzc2VkID0gZmFsc2U7XG5sZXQgYWx0S2V5UHJlc3NlZCA9IGZhbHNlO1xubGV0IGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IGZhbHNlXG5cbi8vIFNhdmUgYSByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIG1ldGhvZCBmb3IgdGhlIG1vbmtleSBwYXRjaFxubGV0IG9yaWdpbmFsT3BlbkZpbGU6ICgodGhpczogV29ya3NwYWNlTGVhZiwgZmlsZTogVEZpbGUsIG9wZW5TdGF0ZT86IE9wZW5WaWV3U3RhdGUpPT4gUHJvbWlzZTx2b2lkPikgfCBudWxsID0gbnVsbDtcblxuLy8gRnVuY3Rpb24gcmVmZXJlbmNlcyBmb3IgZXZlbnQgbGlzdGVuZXJzXG5mdW5jdGlvbiBrZXlkb3duSGFuZGxlcihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChldmVudC5tZXRhS2V5KSB7IC8vIHx8IGUuY3RybEtleVxuICAgICAgICBtZXRhS2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgYWx0S2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBrZXl1cEhhbmRsZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnTWV0YScpIHtcbiAgICAgICAgbWV0YUtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0FsdCcpIHtcbiAgICAgICAgYWx0S2V5UHJlc3NlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW91c2VIYW5kbGVyKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgIG1ldGFLZXlQcmVzc2VkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWV0YUtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgYWx0S2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsdEtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZEtleUxpc3RlbmVycygpXG57XG4gICAgLy8gTGlzdGVuIGZvciBrZXlib2FyZCBldmVudHMgdG8gZGV0ZWN0IE1FVEEga2V5IHN0YXRlXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd25IYW5kbGVyKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGtleXVwSGFuZGxlcik7XG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlSGFuZGxlciwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUtleUxpc3RlbmVycygpXG57XG4gICAgaWYoa2V5TGlzdGVuZXJzSW5zdGFsbGVkKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlkb3duSGFuZGxlcik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywga2V5dXBIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2VIYW5kbGVyLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgIGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdW5wYXRjaE9wZW5GaWxlKCkge1xuXHRpZihvcmlnaW5hbE9wZW5GaWxlKSB7XG5cdFx0V29ya3NwYWNlTGVhZi5wcm90b3R5cGUub3BlbkZpbGUgPSBvcmlnaW5hbE9wZW5GaWxlO1xuXHRcdG9yaWdpbmFsT3BlbkZpbGUgPSBudWxsO1xuXHR9IFx0XG59XG5cbmZ1bmN0aW9uIHBhdGNoT3BlbkZpbGUocGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cykge1xuXHRvcmlnaW5hbE9wZW5GaWxlID0gV29ya3NwYWNlTGVhZi5wcm90b3R5cGUub3BlbkZpbGU7XG5cdFxuXHQvLyBNb25rZXkgcGF0Y2ggdGhlIG9wZW5GaWxlIG1ldGhvZFxuXHRXb3Jrc3BhY2VMZWFmLnByb3RvdHlwZS5vcGVuRmlsZSA9IGFzeW5jIGZ1bmN0aW9uIHBhdGNoZWRPcGVuRmlsZSh0aGlzOiBXb3Jrc3BhY2VMZWFmLCBmaWxlOiBURmlsZSwgb3BlblN0YXRlPzogT3BlblZpZXdTdGF0ZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdFxuXHRcdC8vIGNvbnNvbGUubG9nKGBNZXRhIGtleSBpcyBwcmVzc2VkOiAke21ldGFLZXlQcmVzc2VkfWApO1xuXHRcdC8vIGNvbnNvbGUubG9nKGBBbHQga2V5IGlzIHByZXNzZWQ6ICR7YWx0S2V5UHJlc3NlZH1gKTtcblxuXHRcdGlmKGZpbGUuZXh0ZW5zaW9uPT09J21kJyAmJiBvcmlnaW5hbE9wZW5GaWxlKSB7XG5cdFx0XHRyZXR1cm4gb3JpZ2luYWxPcGVuRmlsZS5jYWxsKHRoaXMsIGZpbGUsIG9wZW5TdGF0ZSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbmV3RW1wdHlMZWF2ZSA9IHRoaXMuZ2V0Vmlld1N0YXRlKCk/LnR5cGUgPT0gJ2VtcHR5JztcblxuXHRcdGlmKHBsdWdpbi5zZXR0aW5ncy5yZXZlYWxBdHRhY2htZW50ICYmIG1ldGFLZXlQcmVzc2VkICYmIGFsdEtleVByZXNzZWQpe1xuXHRcdFx0XHR3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcihwYXRoLmpvaW4ocGx1Z2luLnZhdWx0UGF0aCxmaWxlLnBhdGgpKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihwbHVnaW4uc2V0dGluZ3Mub3BlbkF0dGFjaG1lbnRFeHRlcm5hbCAmJiBtZXRhS2V5UHJlc3NlZCAmJiAhYWx0S2V5UHJlc3NlZCkge1xuXHRcdFx0XHRwbHVnaW4uYXBwLm9wZW5XaXRoRGVmYXVsdEFwcChmaWxlLnBhdGgpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0aWYob3JpZ2luYWxPcGVuRmlsZSkge1xuXHRcdFx0XHRyZXR1cm4gb3JpZ2luYWxPcGVuRmlsZS5jYWxsKHRoaXMsIGZpbGUsIG9wZW5TdGF0ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmIChuZXdFbXB0eUxlYXZlKSB7XG5cdFx0XHQvLyBjbG9zZSBwcmVwYXJlZCBlbXB0eSB0YWJcblx0XHRcdHRoaXMuZGV0YWNoKCk7XG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxufVxuXG5leHBvcnQge3BhdGNoT3BlbkZpbGUsIGFkZEtleUxpc3RlbmVycywgcmVtb3ZlS2V5TGlzdGVuZXJzLCB1bnBhdGNoT3BlbkZpbGV9OyJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxJQUFBQSxtQkFZTzs7O0FDWFAsc0JBQTJCOzs7QUNBcEIsSUFBSyxtQkFBTCxrQkFBS0Msc0JBQUw7QUFDTixFQUFBQSxrQkFBQSxVQUFLO0FBQ0wsRUFBQUEsa0JBQUEsVUFBSztBQUNMLEVBQUFBLGtCQUFBLFVBQUs7QUFDTCxFQUFBQSxrQkFBQSxjQUFTO0FBSkUsU0FBQUE7QUFBQSxHQUFBO0FBT0wsSUFBSyxhQUFMLGtCQUFLQyxnQkFBTDtBQUNOLEVBQUFBLFlBQUEsU0FBSTtBQUNKLEVBQUFBLFlBQUEsUUFBRztBQUNILEVBQUFBLFlBQUEsY0FBUztBQUhFLFNBQUFBO0FBQUEsR0FBQTtBQU1MLElBQUssMkJBQUwsa0JBQUtDLDhCQUFMO0FBQ04sRUFBQUEsMEJBQUEsY0FBUztBQUNULEVBQUFBLDBCQUFBLGNBQVM7QUFDVCxFQUFBQSwwQkFBQSxZQUFPO0FBSEksU0FBQUE7QUFBQSxHQUFBO0FBV0wsSUFBSyxtQkFBTCxrQkFBS0Msc0JBQUw7QUFDTixFQUFBQSxrQkFBQSxVQUFLO0FBQ0wsRUFBQUEsa0JBQUEsV0FBTTtBQUZLLFNBQUFBO0FBQUEsR0FBQTtBQUtMLElBQUssYUFBTCxrQkFBS0Ms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QUFLLE9BQU8sU0FBUyw2QkFBNkIsRUFDM0QsU0FBUyxPQUFPLFVBQW1CO0FBQ25DLFdBQUssT0FBTyxTQUFTLGdDQUFnQztBQUNyRCxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBRUgsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUVwRSxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSwwQkFBMEIsRUFDbEMsUUFBUSxzRUFBc0UsRUFDOUUsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMscUJBQXFCLEVBQ25ELFNBQVMsT0FBTyxVQUFtQjtBQUNuQyxXQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0MsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixZQUFNLEtBQUssT0FBTyxzQkFBc0IsSUFBSTtBQUFBLElBQzlDLENBQUMsQ0FBQztBQUFBLEVBQ0o7QUFDRDsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgIkltcG9ydEFjdGlvblR5cGUiLCAiWWVzTm9UeXBlcyIsICJNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMiLCAiUmVsYXRpdmVMb2NhdGlvbiIsICJMaW5rRm9ybWF0IiwgImNyeXB0byIsICJmcyIsICJwYXRoIiwgInBhdGgiLCAiaW1wb3J0X2ZzIiwgInBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgInBhdGgiLCAiYWx0S2V5UHJlc3NlZCIsICJvbGRQYXRoIiwgImZzIl0KfQo=
