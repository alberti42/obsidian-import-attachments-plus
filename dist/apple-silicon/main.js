
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ImportAttachments
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/ImportAttachmentsModal.ts
var import_obsidian = require("obsidian");

// src/types.ts
var ImportActionType = /* @__PURE__ */ ((ImportActionType2) => {
  ImportActionType2["MOVE"] = "MOVE";
  ImportActionType2["COPY"] = "COPY";
  ImportActionType2["LINK"] = "LINK";
  ImportActionType2["ASK_USER"] = "ASK_USER";
  return ImportActionType2;
})(ImportActionType || {});
var YesNoTypes = /* @__PURE__ */ ((YesNoTypes2) => {
  YesNoTypes2["YES"] = "YES";
  YesNoTypes2["NO"] = "NO";
  YesNoTypes2["ASK_USER"] = "ASK_USER";
  return YesNoTypes2;
})(YesNoTypes || {});
var MultipleFilesImportTypes = /* @__PURE__ */ ((MultipleFilesImportTypes2) => {
  MultipleFilesImportTypes2["BULLETED"] = "BULLETED";
  MultipleFilesImportTypes2["NUMBERED"] = "NUMBERED";
  MultipleFilesImportTypes2["INLINE"] = "INLINE";
  return MultipleFilesImportTypes2;
})(MultipleFilesImportTypes || {});
var RelativeLocation = /* @__PURE__ */ ((RelativeLocation2) => {
  RelativeLocation2["SAME"] = "SAME";
  RelativeLocation2["VAULT"] = "VAULT";
  return RelativeLocation2;
})(RelativeLocation || {});
var LinkFormat = /* @__PURE__ */ ((LinkFormat2) => {
  LinkFormat2["RELATIVE"] = "RELATIVE";
  LinkFormat2["ABSOLUTE"] = "ABSOLUTE";
  return LinkFormat2;
})(LinkFormat || {});

// src/utils.ts
var import_fs = require("fs");
var path = __toESM(require("path"));
var crypto2 = __toESM(require("crypto"));

// node_modules/uuid/dist/esm-browser/rng.js
var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  if (!getRandomValues) {
    getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    }
  }
  return getRandomValues(rnds8);
}

// node_modules/uuid/dist/esm-browser/stringify.js
var byteToHex = [];
for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

// node_modules/uuid/dist/esm-browser/native.js
var randomUUID = typeof crypto !== "undefined" && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native_default = {
  randomUUID
};

// node_modules/uuid/dist/esm-browser/v4.js
function v4(options, buf, offset) {
  if (native_default.randomUUID && !buf && !options) {
    return native_default.randomUUID();
  }
  options = options || {};
  const rnds = options.random || (options.rng || rng)();
  rnds[6] = rnds[6] & 15 | 64;
  rnds[8] = rnds[8] & 63 | 128;
  if (buf) {
    offset = offset || 0;
    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }
    return buf;
  }
  return unsafeStringify(rnds);
}
var v4_default = v4;

// src/utils.ts
function getFilename(filepath) {
  return path.parse(filepath).name;
}
async function arePathsSameFile(file1, file2) {
  try {
    const realpath1 = await import_fs.promises.realpath(file1);
    const realpath2 = await import_fs.promises.realpath(file2);
    return path.relative(realpath1, realpath2) == "";
  } catch (error) {
    console.error("Error resolving paths:", error);
    return false;
  }
}
async function hashFile(filePath) {
  const hash = crypto2.createHash("md5");
  let fileHandle = null;
  try {
    fileHandle = await import_fs.promises.open(filePath, "r");
    const stream = fileHandle.createReadStream();
    for await (const chunk of stream) {
      hash.update(chunk);
    }
    return hash.digest("hex");
  } finally {
    if (fileHandle) {
      await fileHandle.close();
    }
  }
}
function formatDateTime(dateFormat) {
  try {
    const dateTime = window.moment().format(dateFormat);
    return dateTime;
  } catch (error) {
    if (error instanceof Error) {
      console.error("Error formatting date:", error.message);
    } else {
      console.error("Error formatting date:", error);
    }
    return "DATE_ERROR";
  }
}
async function createAttachmentName(namePattern, dateFormat, originalFilePath) {
  const originalFilePath_parsed = path.parse(originalFilePath);
  const fileToImportName = originalFilePath_parsed.name;
  let attachmentName = namePattern.replace(/\$\{original\}/g, fileToImportName).replace(/\$\{uuid\}/g, v4_default()).replace(/\$\{date\}/g, formatDateTime(dateFormat));
  if (namePattern.includes("${md5}")) {
    let hash = "";
    try {
      hash = await hashFile(originalFilePath);
    } catch (err) {
      console.error("Error hashing the file:", err);
    }
    attachmentName = attachmentName.replace(/\$\{md5\}/g, hash);
  }
  attachmentName += originalFilePath_parsed.ext;
  return attachmentName;
}
async function findNewFilename(destFilePath) {
  const destFilePath_parse = path.parse(destFilePath);
  let counter = 1;
  let fileExists;
  let newFilename = null;
  do {
    newFilename = path.join(destFilePath_parse.dir, `${destFilePath_parse.name} (${counter})${destFilePath_parse.ext}`);
    fileExists = await checkFileExists(newFilename);
    counter += 1;
  } while (fileExists);
  return newFilename;
}
async function isFileInVault(vaultPath, filePath) {
  try {
    const realFilePath = await import_fs.promises.realpath(filePath);
    const realVaultFolderPath = await import_fs.promises.realpath(vaultPath);
    const normalizedFilePath = path.normalize(realFilePath);
    const normalizedVaultFolderPath = path.normalize(realVaultFolderPath);
    if (normalizedFilePath.startsWith(`${normalizedVaultFolderPath}${path.sep}`)) {
      return normalizedFilePath;
    } else {
      return false;
    }
  } catch (error) {
    console.error("Error resolving paths:", error);
    return false;
  }
}
async function checkFileExists(filePath) {
  try {
    const stats = await import_fs.promises.stat(filePath);
    return stats.isFile();
  } catch (error) {
    if (error && typeof error === "object" && "code" in error && error.code === "ENOENT") {
      return false;
    }
    throw error;
  }
}
async function checkDirectoryExists(dirPath) {
  try {
    const stats = await import_fs.promises.stat(dirPath);
    return stats.isDirectory();
  } catch (error) {
    if (error && typeof error === "object" && "code" in error && error.code === "ENOENT") {
      return false;
    }
    throw error;
  }
}
async function ensureDirectoryExists(path5) {
  const doExist = await checkDirectoryExists(path5);
  if (!doExist) {
    await import_fs.promises.mkdir(path5, { recursive: true });
  }
  return true;
}

// src/ImportAttachmentsModal.ts
var path2 = __toESM(require("path"));
var ImportActionTypeModal = class extends import_obsidian.Modal {
  // Private variable to store the checkbox state
  constructor(app, plugin, lastActionFilesOnImport, lastEmbedOnImport) {
    super(app);
    this.plugin = plugin;
    this.lastActionFilesOnImport = lastActionFilesOnImport;
    this.lastEmbedOnImport = lastEmbedOnImport;
    this.resolveChoice = () => {
    };
    this.rememberChoice = false;
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
    this.selectedAction = lastActionFilesOnImport;
    this.selectedEmbedOption = lastEmbedOnImport;
  }
  createToggle(table, questionText, optionA, optionB, initialOption, callback, withSeparator = false) {
    const tr = table.createEl("tr");
    if (withSeparator) {
      tr.addClass("sep");
    }
    tr.createEl("td", { text: questionText, cls: "action-question" });
    tr.createEl("td", { text: optionA, cls: "toggle-option-A" });
    const td = tr.createEl("td");
    const switchLabel = td.createEl("label", { cls: "switch" });
    const input = switchLabel.createEl("input", { type: "checkbox" });
    if (initialOption == 0 /* A */) {
      input.checked = false;
    } else {
      input.checked = true;
    }
    switchLabel.createEl("span", { cls: "slider" });
    tr.createEl("td", { text: optionB, cls: "toggle-option-B" });
    input.addEventListener("change", () => {
      if (callback) {
        callback(input.checked ? 1 /* B */ : 0 /* A */);
      }
    });
  }
  onOpen() {
    let initialOption;
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    container.createEl("p", { text: "Configure the import options and then press either enter or the import button." });
    const table = container.createEl("table");
    switch (this.lastActionFilesOnImport) {
      case "MOVE" /* MOVE */:
        initialOption = 0 /* A */;
        break;
      case "COPY" /* COPY */:
      default:
        initialOption = 1 /* B */;
        break;
    }
    this.createToggle(table, "Do you want to move or copy the files to the vault?", "Move", "Copy", initialOption, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.selectedAction = "MOVE" /* MOVE */;
      } else {
        this.selectedAction = "COPY" /* COPY */;
      }
    }, true);
    switch (this.lastEmbedOnImport) {
      case "YES" /* YES */:
        initialOption = 0 /* A */;
        break;
      case "NO" /* NO */:
      default:
        initialOption = 1 /* B */;
        break;
    }
    this.createToggle(table, "Do you want to embed or link the files to the vault?", "Embed", "Link", initialOption, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.selectedEmbedOption = "YES" /* YES */;
      } else {
        this.selectedEmbedOption = "NO" /* NO */;
      }
    }, true);
    this.createToggle(table, "Save this answer in the settings for the future?", "Yes", "No", 1 /* B */, (selectedOption) => {
      if (selectedOption == 0 /* A */) {
        this.rememberChoice = true;
      } else {
        this.rememberChoice = false;
      }
    }, true);
    const importButtonContainer = container.createDiv({ cls: "import-buttons" });
    const importButton = importButtonContainer.createEl("button", {
      text: "Import",
      cls: "mod-cta"
    });
    importButton.addEventListener("click", () => {
      this.import();
    });
    setTimeout(() => {
      importButton.focus();
    }, 0);
  }
  async import() {
    this.resolveChoice({
      action: this.selectedAction,
      embed: this.selectedEmbedOption,
      rememberChoice: this.rememberChoice
    });
    this.close();
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};
var OverwriteChoiceModal = class extends import_obsidian.Modal {
  constructor(app, plugin, originalFilePath, destFilePath) {
    super(app);
    this.plugin = plugin;
    this.originalFilePath = originalFilePath;
    this.destFilePath = destFilePath;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
    this.filename = getFilename(destFilePath);
  }
  onOpen() {
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('You are trying to copy the file "');
    const origFileLink = paragraph.createEl("a", {
      text: this.originalFilePath,
      href: "#"
    });
    origFileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.originalFilePath);
    });
    paragraph.append('" into the vault, where a "');
    const vaultFileLink = paragraph.createEl("a", {
      text: "file",
      href: "#"
    });
    vaultFileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.destFilePath);
    });
    paragraph.append('" with the same name is already present.');
    container.createEl("p", { text: "How do you want to proceed?" });
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const keepButton = buttonContainer.createEl("button", {
      text: "Keep both",
      cls: "mod-cta"
    });
    keepButton.addEventListener("click", () => {
      this.resolveChoice(1 /* KEEPBOTH */);
      this.close();
    });
    const overwriteButton = buttonContainer.createEl("button", {
      text: "Overwrite",
      cls: "mod-warning"
    });
    overwriteButton.addEventListener("click", () => {
      this.resolveChoice(0 /* OVERWRITE */);
      this.close();
    });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    skipButton.addEventListener("click", () => {
      this.resolveChoice(2 /* SKIP */);
      this.close();
    });
    setTimeout(() => {
      keepButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};
var DeleteAttachmentFolderModal = class extends import_obsidian.Modal {
  // To resolve the promise. Initialize with a no-op function
  constructor(app, plugin, attachmentFolderPath) {
    super(app);
    this.plugin = plugin;
    this.attachmentFolderPath = attachmentFolderPath;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
  }
  onOpen() {
    const attachmentFolderPath_parsed = path2.parse(this.attachmentFolderPath);
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('Do you want to move the attachment folder "');
    const fileLink = paragraph.createEl("a", {
      text: attachmentFolderPath_parsed.name,
      href: "#"
    });
    fileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.openPath(this.attachmentFolderPath);
    });
    paragraph.append('" to the system trash?');
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const deleteButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    deleteButton.addEventListener("click", () => {
      this.resolveChoice(true);
      this.close();
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    cancelButton.addEventListener("click", () => {
      this.resolveChoice(false);
      this.close();
    });
    setTimeout(() => {
      cancelButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(false);
  }
};
var ImportFromVaultChoiceModal = class extends import_obsidian.Modal {
  // To resolve the promise. Initialize with a no-op function
  constructor(app, plugin, vaultPath, originalFilePath, importAction) {
    super(app);
    this.plugin = plugin;
    this.vaultPath = vaultPath;
    this.originalFilePath = originalFilePath;
    this.importAction = importAction;
    this.resolveChoice = () => {
    };
    this.promise = new Promise((resolve) => {
      this.resolveChoice = resolve;
    });
  }
  onOpen() {
    const { contentEl } = this;
    const container = contentEl.createDiv({ cls: "import-attach-plugin" });
    container.createEl("h2", { text: "Import Files" });
    const paragraph = container.createEl("p");
    paragraph.append('The file you are trying to import "');
    const fileLink = paragraph.createEl("a", {
      text: path2.relative(this.vaultPath, this.originalFilePath),
      href: "#"
    });
    fileLink.addEventListener("click", (e) => {
      e.preventDefault();
      window.require("electron").remote.shell.showItemInFolder(this.originalFilePath);
    });
    paragraph.append('" is already stored in the vault.');
    if (this.importAction == "MOVE" /* MOVE */) {
      container.createEl("p", { text: "You intended to move the file. 					However, moving a file that is already in the vault to a new 					destination in the same vault is not supported; 					only copying and linking operations are allowed." });
    }
    container.createEl("p", { text: "Do you want to make a copy or refer to the original file in the vault through a relative path?" });
    const buttonContainer = container.createDiv({ cls: "import-buttons" });
    const linkButton = buttonContainer.createEl("button", {
      text: "Relative path",
      cls: "mod-cta"
    });
    linkButton.addEventListener("click", () => {
      this.resolveChoice(1 /* LINK */);
      this.close();
    });
    const copyButton = buttonContainer.createEl("button", {
      text: "Copy",
      cls: "mod-warning"
    });
    copyButton.addEventListener("click", () => {
      this.resolveChoice(0 /* COPY */);
      this.close();
    });
    const skipButton = buttonContainer.createEl("button", {
      text: "Skip",
      cls: "mod-cancel"
    });
    skipButton.addEventListener("click", () => {
      this.resolveChoice(2 /* SKIP */);
      this.close();
    });
    setTimeout(() => {
      linkButton.focus();
    }, 0);
  }
  onClose() {
    this.contentEl.empty();
    this.resolveChoice(null);
  }
};

// src/main.ts
var import_fs2 = require("fs");
var path4 = __toESM(require("path"));

// src/patchOpenFile.ts
var import_obsidian2 = require("obsidian");
var path3 = __toESM(require("path"));
var metaKeyPressed = false;
var altKeyPressed = false;
var keyListenersInstalled = false;
var originalOpenFile = null;
function keydownHandler(event) {
  if (event.metaKey) {
    metaKeyPressed = true;
  }
  if (event.altKey) {
    altKeyPressed = true;
  }
}
function keyupHandler(event) {
  if (event.key === "Meta") {
    metaKeyPressed = false;
  }
  if (event.key === "Alt") {
    altKeyPressed = false;
  }
}
function mouseHandler(event) {
  if (event.metaKey) {
    metaKeyPressed = true;
  } else {
    metaKeyPressed = false;
  }
  if (event.altKey) {
    altKeyPressed = true;
  } else {
    altKeyPressed = false;
  }
}
function addKeyListeners() {
  document.addEventListener("keydown", keydownHandler);
  document.addEventListener("keyup", keyupHandler);
  document.addEventListener("mousedown", mouseHandler, { capture: true });
  keyListenersInstalled = true;
}
function removeKeyListeners() {
  if (keyListenersInstalled) {
    document.removeEventListener("keydown", keydownHandler);
    document.removeEventListener("keyup", keyupHandler);
    document.removeEventListener("mousedown", mouseHandler, { capture: true });
    keyListenersInstalled = false;
  }
}
function unpatchOpenFile() {
  if (originalOpenFile) {
    import_obsidian2.WorkspaceLeaf.prototype.openFile = originalOpenFile;
    originalOpenFile = null;
  }
}
function patchOpenFile(plugin) {
  originalOpenFile = import_obsidian2.WorkspaceLeaf.prototype.openFile;
  import_obsidian2.WorkspaceLeaf.prototype.openFile = async function patchedOpenFile(file, openState) {
    var _a;
    const newEmptyLeave = ((_a = this.getViewState()) == null ? void 0 : _a.type) == "empty";
    if (metaKeyPressed) {
      if (altKeyPressed) {
        window.require("electron").remote.shell.showItemInFolder(path3.join(plugin.vaultPath, file.path));
      } else {
        plugin.app.openWithDefaultApp(file.path);
      }
    } else {
      if (originalOpenFile) {
        return originalOpenFile.call(this, file, openState);
      }
    }
    if (newEmptyLeave) {
      this.detach();
    }
    return;
  };
}

// src/main.ts
var DEFAULT_SETTINGS = {
  actionDroppedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to asking the user
  actionPastedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to asking the user
  embedFilesOnImport: "ASK_USER" /* ASK_USER */,
  // Default to linking files
  lastActionPastedFilesOnImport: "COPY" /* COPY */,
  // Default to copying files
  lastActionDroppedFilesOnImport: "COPY" /* COPY */,
  // Default to copying files
  lastEmbedFilesOnImport: "NO" /* NO */,
  // Default to linking
  multipleFilesImportType: "BULLETED" /* BULLETED */,
  // Default to bulleted list when importing multiple files
  relativeLocation: "SAME" /* SAME */,
  // Default to vault
  folderPath: "${notename} (attachments)",
  // Default to a folder in the vault
  linkFormat: "RELATIVE" /* RELATIVE */,
  attachmentName: "${original}",
  // Default to the original name of the attachment
  dateFormat: "YYYY_MM_DDTHH_mm_ss",
  customDisplayText: true,
  // Default to true
  autoRenameAttachmentFolder: true,
  // Default to true
  autoDeleteAttachmentFolder: true,
  // Default to true
  confirmDeleteAttachmentFolder: true,
  // Default to true
  hideAttachmentFolders: true
  // Default to true
};
var ImportAttachments = class extends import_obsidian3.Plugin {
  constructor(app, manifest) {
    super(app, manifest);
    this.settings = { ...DEFAULT_SETTINGS };
    this.renameCallbackEnabled = true;
    this.deleteCallbackEnabled = true;
    this.observer = null;
    this.hideFolderNames = [];
    const adapter = this.app.vault.adapter;
    if (!(adapter instanceof import_obsidian3.FileSystemAdapter)) {
      throw new Error("The vault folder could not be determined.");
    }
    this.vaultPath = adapter.getBasePath();
  }
  setupObserver() {
    this.configureHideFolderNames();
    const callback = (mutationsList, observer) => {
      mutationsList.forEach((record) => {
        var _a, _b;
        if ((_b = (_a = record.target) == null ? void 0 : _a.parentElement) == null ? void 0 : _b.classList.contains("nav-folder")) {
          this.hideAttachmentFolders();
        }
      });
    };
    const targetNode = document.body;
    this.observer = new MutationObserver(callback);
    const config = {
      childList: true,
      subtree: true
    };
    this.observer.observe(targetNode, config);
  }
  async hideAttachmentFolders(recheckPreviouslyHiddenFolders) {
    if (recheckPreviouslyHiddenFolders) {
      document.querySelectorAll(".import-attach-hidden").forEach((folder) => {
        if (folder.parentElement) {
          folder.parentElement.style.height = "";
        }
        if (folder.parentElement) {
          folder.parentElement.style.overflow = "";
        }
        folder.removeClass(".import-attach-hidden");
      });
    }
    this.hideFolderNames.forEach((folderPattern) => {
      if (folderPattern === "")
        return;
      const folderElements = document.querySelectorAll(folderPattern);
      folderElements.forEach((folder) => {
        if (!folder || !folder.parentElement) {
          return;
        }
        folder.addClass("import-attach-hidden");
        folder.parentElement.style.height = this.settings.hideAttachmentFolders ? "0" : "";
        folder.parentElement.style.overflow = this.settings.hideAttachmentFolders ? "hidden" : "";
      });
    });
  }
  splitAroundOriginal(input, placeholder) {
    const firstIndex = input.indexOf(placeholder);
    if (firstIndex === -1) {
      return [input, ""];
    }
    const lastIndex = input.lastIndexOf(placeholder);
    const endOfPlaceholderIndex = lastIndex + placeholder.length;
    const beforeFirst = input.substring(0, firstIndex);
    const afterLast = input.substring(endOfPlaceholderIndex);
    return [beforeFirst, afterLast];
  }
  configureHideFolderNames() {
    const placeholder = "${notename}";
    if (this.settings.folderPath.includes(placeholder)) {
      const [startsWith, endsWith] = this.splitAroundOriginal(this.settings.folderPath, placeholder);
      if (endsWith != "") {
        this.hideFolderNames = [
          `[data-path$="${endsWith}"]`
        ];
      } else if (startsWith != "") {
        this.hideFolderNames = [
          `.nav-folder-title[data-path^="${startsWith}"], .nav-folder-title[data-path*="/${startsWith}"]`
        ];
      }
    } else {
      this.hideFolderNames = [
        `[data-path$="/${this.settings.folderPath}"], [data-path="${this.settings.folderPath}"]`
      ];
    }
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ImportAttachmentsSettingTab(this.app, this));
    this.setupObserver();
    patchOpenFile(this);
    addKeyListeners();
    this.addCommand({
      id: "move-file-to-vault-link",
      name: "Move File to Vault as Link",
      callback: () => this.chooseFileToImport({
        embed: false,
        action: "MOVE" /* MOVE */
      })
    });
    this.addCommand({
      id: "move-file-to-vault-embed",
      name: "Move File to Vault as Embedded",
      callback: () => this.chooseFileToImport({
        embed: true,
        action: "MOVE" /* MOVE */
      })
    });
    this.addCommand({
      id: "copy-file-to-vault-link",
      name: "Copy File to Vault as Link",
      callback: () => this.chooseFileToImport({
        embed: false,
        action: "COPY" /* COPY */
      })
    });
    this.addCommand({
      id: "copy-file-to-vault-embed",
      name: "Copy File to Vault as Embedded",
      callback: () => this.chooseFileToImport({
        embed: true,
        action: "COPY" /* COPY */
      })
    });
    this.addCommand({
      id: "open-attachments-folder",
      name: "Open Attachments Folder",
      callback: () => this.openAttachmentsFolder()
    });
    this.registerEvent(
      // check obsidian.d.ts for other types of events
      this.app.workspace.on("editor-drop", async (evt, editor, view) => {
        var _a;
        if (evt.defaultPrevented)
          return;
        if (!(view instanceof import_obsidian3.MarkdownView)) {
          console.error("No view provided");
          return;
        }
        const altKeyPressed2 = evt.altKey;
        if (altKeyPressed2) {
          return;
        } else {
          evt.preventDefault();
        }
        const doForceAsking = evt.shiftKey;
        const files = (_a = evt == null ? void 0 : evt.dataTransfer) == null ? void 0 : _a.files;
        if (files && files.length > 0) {
          await this.handleFiles(files, editor, view, doForceAsking, 1 /* DRAG_AND_DROP */);
        } else {
          console.error("No files dropped");
        }
      })
    );
    this.registerEvent(
      // check obsidian.d.ts for other types of events
      this.app.workspace.on("editor-paste", async (evt, editor, view) => {
        if (evt.defaultPrevented)
          return;
        if (!(view instanceof import_obsidian3.MarkdownView)) {
          console.error("No view provided");
          return;
        }
        const clipboardData = evt.clipboardData;
        if (clipboardData) {
          const files = clipboardData.files;
          if (files && files.length > 0) {
            evt.preventDefault();
            const doToggleEmbedPreference = false;
            await this.handleFiles(files, editor, view, doToggleEmbedPreference, 0 /* PASTE */);
          } else {
          }
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("rename", async (newFile, oldPath) => {
        if (!this.settings.autoRenameAttachmentFolder) {
          return;
        }
        if (this.renameCallbackEnabled) {
          const oldPath_parsed = path4.parse(oldPath);
          if (oldPath_parsed.ext != ".md") {
            return;
          }
          const oldAttachmentFolderPath = this.getAttachmentFolder(oldPath_parsed);
          if (!oldAttachmentFolderPath) {
            return;
          }
          if (await checkDirectoryExists(oldAttachmentFolderPath.attachmentsFolderPath)) {
            const newAttachmentFolderPath = this.getAttachmentFolder(path4.parse(newFile.path));
            if (!newAttachmentFolderPath) {
              return;
            }
            const oldPath2 = path4.relative(this.vaultPath, oldAttachmentFolderPath.attachmentsFolderPath);
            const newPath = path4.relative(this.vaultPath, newAttachmentFolderPath.attachmentsFolderPath);
            try {
              this.renameCallbackEnabled = false;
              await this.renameFile(oldPath2, newPath);
            } catch (error) {
              const msg = "Failed to rename the attachment folder";
              console.error(msg);
              console.error("Original attachment folder:", oldPath2);
              console.error("New attachment folder:", newPath);
              console.error("Error msg:", error);
              new import_obsidian3.Notice(msg + ".");
            } finally {
              this.renameCallbackEnabled = true;
            }
          }
        }
      })
    );
    this.registerEvent(
      this.app.vault.on("delete", async (file) => {
        if (!this.settings.autoDeleteAttachmentFolder) {
          return;
        }
        if (!this.settings.folderPath.includes("${notename}")) {
          return;
        }
        if (this.deleteCallbackEnabled) {
          const file_parsed = path4.parse(file.path);
          if (file_parsed.ext != ".md") {
            return;
          }
          const attachmentFolderPath = this.getAttachmentFolder(file_parsed);
          if (!attachmentFolderPath) {
            return;
          }
          if (await checkDirectoryExists(attachmentFolderPath.attachmentsFolderPath)) {
            const modal = new DeleteAttachmentFolderModal(this.app, this, attachmentFolderPath.attachmentsFolderPath);
            modal.open();
            const choice = await modal.promise;
            if (!choice)
              return;
            const filePath = path4.relative(this.vaultPath, attachmentFolderPath.attachmentsFolderPath);
            try {
              this.deleteCallbackEnabled = false;
              await this.trashFile(filePath);
            } catch (error) {
              const msg = "Failed to remove the attachment folder";
              console.error(msg + ":", filePath);
              console.error("Error msg:", error);
              new import_obsidian3.Notice(msg + ".");
            } finally {
              this.deleteCallbackEnabled = true;
            }
          }
        }
      })
    );
    console.log("Loaded plugin Import Attachments+");
  }
  onunload() {
    unpatchOpenFile();
    removeKeyListeners();
    if (this.observer) {
      this.observer.disconnect();
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async renameFile(oldFilePath, newFilePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(oldFilePath);
      if (file instanceof import_obsidian3.TAbstractFile) {
        await this.app.fileManager.renameFile(file, newFilePath);
        new import_obsidian3.Notice("Attachment folder renamed successfully.");
      } else {
        new import_obsidian3.Notice("Attachment folder could not be found at the given location.");
      }
    } catch (error) {
      const msg = "Failed to rename file";
      console.error(msg + ":", error);
      new import_obsidian3.Notice(msg + ".");
    }
  }
  async trashFile(filePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian3.TAbstractFile) {
        await await this.app.vault.adapter.trashSystem(filePath);
        new import_obsidian3.Notice("Attachment folder moved to system trash successfully.");
      } else {
        new import_obsidian3.Notice("Attachment folder could not be found at the given location.");
      }
    } catch (error) {
      const msg = "Failed to rename file";
      console.error(msg + ":", error);
      new import_obsidian3.Notice(msg + ".");
    }
  }
  async handleFiles(files, editor, view, doForceAsking, importType) {
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath, currentNoteFolderPath } = attachmentsFolder;
    let actionFilesOnImport = "COPY" /* COPY */;
    let lastActionFilesOnImport = "COPY" /* COPY */;
    switch (importType) {
      case 1 /* DRAG_AND_DROP */:
        actionFilesOnImport = this.settings.actionDroppedFilesOnImport;
        lastActionFilesOnImport = this.settings.lastActionDroppedFilesOnImport;
        break;
      case 0 /* PASTE */:
        actionFilesOnImport = this.settings.actionPastedFilesOnImport;
        lastActionFilesOnImport = this.settings.lastActionPastedFilesOnImport;
        break;
    }
    let embedOption = this.settings.embedFilesOnImport;
    const lastEmbedOption = this.settings.lastEmbedFilesOnImport;
    if (doForceAsking || actionFilesOnImport == "ASK_USER" /* ASK_USER */ || embedOption == "ASK_USER" /* ASK_USER */) {
      const modal = new ImportActionTypeModal(this.app, this, lastActionFilesOnImport, lastEmbedOption);
      modal.open();
      const choice = await modal.promise;
      if (choice == null)
        return;
      actionFilesOnImport = choice.action;
      switch (importType) {
        case 1 /* DRAG_AND_DROP */:
          if (choice.rememberChoice) {
            this.settings.actionDroppedFilesOnImport = actionFilesOnImport;
          }
          this.settings.lastActionDroppedFilesOnImport = actionFilesOnImport;
          break;
        case 0 /* PASTE */:
          if (choice.rememberChoice) {
            this.settings.actionPastedFilesOnImport = actionFilesOnImport;
          }
          this.settings.lastActionPastedFilesOnImport = actionFilesOnImport;
          break;
      }
      embedOption = choice.embed;
      if (choice.rememberChoice) {
        this.settings.embedFilesOnImport = embedOption;
      }
      this.settings.lastEmbedFilesOnImport = embedOption;
      await this.saveSettings();
    }
    const doEmbed = embedOption == "YES" /* YES */;
    const importSettings = {
      embed: doEmbed,
      action: actionFilesOnImport
    };
    this.moveFileToAttachmentsFolder(files, attachmentsFolderPath, currentNoteFolderPath, editor, view, importSettings);
  }
  getAttachmentFolder(noteFilePath = null) {
    try {
      if (!noteFilePath) {
        noteFilePath = (() => {
          const activeFile = this.app.workspace.getActiveFile();
          if (activeFile == null) {
            throw new Error("The active note could not be determined.");
          }
          return path4.parse(activeFile.path);
        })();
      }
      if (!noteFilePath || noteFilePath.ext !== ".md") {
        throw new Error("No Markdown file was found.");
      }
      if (!this.vaultPath)
        return null;
      const noteFolderPath = path4.join(this.vaultPath, noteFilePath.dir);
      const notename = noteFilePath.name;
      let referencePath = "";
      switch (this.settings.relativeLocation) {
        case "VAULT" /* VAULT */:
          referencePath = this.vaultPath;
          break;
        case "SAME" /* SAME */:
          referencePath = noteFolderPath;
          break;
      }
      const relativePath = this.settings.folderPath.replace(/\$\{notename\}/g, notename);
      const attachmentsFolderPath = path4.join(referencePath, relativePath);
      return {
        attachmentsFolderPath,
        currentNoteFolderPath: noteFolderPath
      };
    } catch (error) {
      if (error instanceof Error) {
        console.error(error.message);
        new import_obsidian3.Notice(error.message);
      } else {
        console.error("An unknown error occurred:", error);
        new import_obsidian3.Notice("An unknown error occurred");
      }
      return null;
    }
  }
  async chooseFileToImport(importSettings) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian3.MarkdownView);
    const editor = markdownView == null ? void 0 : markdownView.editor;
    if (!editor) {
      const msg = "No active markdown editor found.";
      console.error(msg);
      new import_obsidian3.Notice(msg);
      return;
    }
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath, currentNoteFolderPath: referencePath } = attachmentsFolder;
    const input = document.createElement("input");
    input.type = "file";
    input.multiple = true;
    input.onchange = async (e) => {
      const target = e.target;
      const files = target.files;
      if (files && files.length > 0) {
        await this.moveFileToAttachmentsFolder(files, attachmentsFolderPath, referencePath, editor, markdownView, importSettings);
      } else {
        const msg = "No files selected or file access error.";
        console.error(msg);
        new import_obsidian3.Notice(msg);
      }
    };
    input.click();
  }
  async moveFileToAttachmentsFolder(filesToImport, attachmentsFolderPath, currentNoteFolderPath, editor, view, importSettings) {
    await ensureDirectoryExists(attachmentsFolderPath);
    const cursor = editor.getCursor();
    if (filesToImport.length > 1 && this.settings.multipleFilesImportType != "INLINE" /* INLINE */) {
      if (cursor.ch !== 0) {
        editor.replaceRange("\n", cursor);
        editor.setCursor({ line: cursor.line + 1, ch: 0 });
      }
    }
    const multipleFiles = filesToImport.length > 1;
    const tasks = Array.from(filesToImport).map(async (fileToImport) => {
      const originalFilePath = fileToImport.path;
      let destFilePath = path4.join(
        attachmentsFolderPath,
        await createAttachmentName(this.settings.attachmentName, this.settings.dateFormat, originalFilePath)
      );
      const existingFile = await checkFileExists(destFilePath);
      if (existingFile && await arePathsSameFile(originalFilePath, destFilePath)) {
        return destFilePath;
      }
      if (!this.vaultPath)
        return null;
      const inVault = await isFileInVault(this.vaultPath, originalFilePath);
      if (inVault) {
        const modal = new ImportFromVaultChoiceModal(this.app, this, this.vaultPath, inVault, importSettings.action);
        modal.open();
        const choice = await modal.promise;
        if (choice == null) {
          return null;
        }
        switch (choice) {
          case 2 /* SKIP */:
            return null;
            break;
          case 1 /* LINK */:
            importSettings.action = "LINK" /* LINK */;
            break;
          case 0 /* COPY */:
            importSettings.action = "COPY" /* COPY */;
            break;
        }
      }
      if (existingFile && importSettings.action != "LINK" /* LINK */) {
        const modal = new OverwriteChoiceModal(this.app, this, originalFilePath, destFilePath);
        modal.open();
        const choice = await modal.promise;
        if (choice == null) {
          return null;
        }
        switch (choice) {
          case 0 /* OVERWRITE */:
            break;
          case 1 /* KEEPBOTH */:
            destFilePath = await findNewFilename(destFilePath);
            if (destFilePath == null) {
              return null;
            }
            break;
          case 2 /* SKIP */:
            return null;
            break;
        }
      }
      try {
        switch (importSettings.action) {
          case "MOVE" /* MOVE */:
            await import_fs2.promises.rename(originalFilePath, destFilePath);
            return destFilePath;
          case "COPY" /* COPY */:
            await import_fs2.promises.copyFile(originalFilePath, destFilePath);
            return destFilePath;
          case "LINK" /* LINK */:
          default:
            return originalFilePath;
        }
      } catch (error) {
        const msg = "Failed to process the file";
        new import_obsidian3.Notice(msg + ".");
        console.error(msg + ":", originalFilePath, error);
        return null;
      }
    });
    const results = await Promise.all(tasks);
    const counter = 0;
    results.forEach((importedFilePath, index) => {
      if (importedFilePath) {
        this.insertLinkToEditor(currentNoteFolderPath, importedFilePath, editor, view, importSettings, multipleFiles ? index + 1 : 0);
      }
    });
    if (counter > 0) {
      let operation = "";
      switch (importSettings.action) {
        case "MOVE" /* MOVE */:
          operation = "Moved";
          break;
        case "COPY" /* COPY */:
          operation = "Copied";
          break;
      }
      new import_obsidian3.Notice(`${operation} successfully ${counter} files to the attachments folder.`);
    }
  }
  async openAttachmentsFolder() {
    const attachmentsFolder = this.getAttachmentFolder();
    if (!attachmentsFolder) {
      return;
    }
    const { attachmentsFolderPath } = attachmentsFolder;
    if (!await checkDirectoryExists(attachmentsFolderPath)) {
      const msg = "This note does not have an attachment folder.";
      console.error(msg + ":", attachmentsFolderPath);
      new import_obsidian3.Notice(msg + ".");
    }
    const { shell } = require("electron");
    shell.openPath(attachmentsFolder.attachmentsFolderPath);
  }
  insertLinkToEditor(currentNoteFolderPath, importedFilePath, editor, view, importSettings, counter) {
    const filename = getFilename(importedFilePath);
    let relativePath;
    switch (this.settings.linkFormat) {
      case "RELATIVE" /* RELATIVE */:
        relativePath = path4.relative(currentNoteFolderPath, importedFilePath);
        break;
      case "ABSOLUTE" /* ABSOLUTE */:
      default:
        relativePath = path4.relative(this.vaultPath, importedFilePath);
        break;
    }
    let prefix = "";
    let postfix = "";
    let customDisplay = "";
    if (counter > 0) {
      switch (this.settings.multipleFilesImportType) {
        case "BULLETED" /* BULLETED */:
          prefix = "- ";
          postfix = "\n";
          break;
        case "NUMBERED" /* NUMBERED */:
          prefix = `${counter}. `;
          postfix = "\n";
          break;
        case "INLINE" /* INLINE */:
          if (counter > 1) {
            prefix = "\n\n";
          }
          break;
      }
    }
    if (this.settings.customDisplayText) {
      customDisplay = "|" + filename;
    }
    if (importSettings.embed) {
      prefix = prefix + "!";
    }
    const linkText = prefix + "[[" + relativePath + customDisplay + "]]" + postfix;
    const cursor = editor.getCursor();
    editor.replaceRange(linkText, cursor);
    if (counter == 0) {
      if (this.settings.customDisplayText) {
        const startCursorPos = {
          line: cursor.line,
          ch: cursor.ch + relativePath.length + prefix.length + 3
        };
        const endCursorPos = {
          line: cursor.line,
          ch: startCursorPos.ch + filename.length
        };
        editor.setSelection(startCursorPos, endCursorPos);
      } else {
        const newCursorPos = {
          line: cursor.line,
          ch: cursor.ch + linkText.length
        };
        editor.setCursor(newCursorPos);
      }
    } else {
      const newCursorPos = {
        line: cursor.line,
        ch: cursor.ch + linkText.length
      };
      editor.setCursor(newCursorPos);
    }
  }
};
var ImportAttachmentsSettingTab = class extends import_obsidian3.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for Import Attachments+ Plugin" });
    containerEl.createEl("h3", { text: "Import options" });
    new import_obsidian3.Setting(containerEl).setName("Whether to move or copy files that are drag-and-dropped?").setDesc("Choose whether files that are dragged and dropped into the editor should be moved or copied. Alternatively, the user is asked each time. By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("MOVE" /* MOVE */, "Move");
      dropdown.addOption("COPY" /* COPY */, "Copy");
      dropdown.setValue(this.plugin.settings.actionDroppedFilesOnImport).onChange(async (value) => {
        if (value in ImportActionType) {
          this.plugin.settings.actionDroppedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastActionDroppedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid import action type:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Whether to move or copy files that are copy-and-pasted?").setDesc("Choose whether files that are copy and pasted into the editor should be moved or copied. Alternatively, the user is asked each time.  By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("MOVE" /* MOVE */, "Move");
      dropdown.addOption("COPY" /* COPY */, "Copy");
      dropdown.setValue(this.plugin.settings.actionPastedFilesOnImport).onChange(async (value) => {
        if (value in ImportActionType) {
          this.plugin.settings.actionPastedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastActionPastedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid import action type:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Embed imported documents:").setDesc("If this option is enabled, the files are imported as an embedded document; if it is deactivated, they are imported as a linked document.  By holding the SHIFT key pressed, you will be shown the import panel, however you configured this option.").addDropdown((dropdown) => {
      dropdown.addOption("ASK_USER" /* ASK_USER */, "Ask each time");
      dropdown.addOption("YES" /* YES */, "Yes");
      dropdown.addOption("NO" /* NO */, "No");
      dropdown.setValue(this.plugin.settings.embedFilesOnImport).onChange(async (value) => {
        if (Object.values(YesNoTypes).includes(value)) {
          this.plugin.settings.embedFilesOnImport = value;
          if (value != "ASK_USER" /* ASK_USER */) {
            this.plugin.settings.lastEmbedFilesOnImport = value;
          }
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Import multiple files as:").setDesc("Choose how to import multiple files: as a bulleted list, as a numbered list, or inline without using lists.").addDropdown((dropdown) => {
      dropdown.addOption("BULLETED" /* BULLETED */, "Bulleted list");
      dropdown.addOption("NUMBERED" /* NUMBERED */, "Numbered list");
      dropdown.addOption("INLINE" /* INLINE */, "Inline");
      dropdown.setValue(this.plugin.settings.multipleFilesImportType).onChange(async (value) => {
        if (Object.values(MultipleFilesImportTypes).includes(value)) {
          this.plugin.settings.multipleFilesImportType = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Insert display text for links based on filename:").setDesc("If this option is enabled, the basename of the imported document is used as in place of the custom display text.").addToggle((toggle) => toggle.setValue(this.plugin.settings.customDisplayText).onChange(async (value) => {
      this.plugin.settings.customDisplayText = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Attachment folder configuration" });
    new import_obsidian3.Setting(containerEl).setName("Default location for new attachments:").setDesc("The reference folder for importing new attachments.").addDropdown((dropdown) => {
      dropdown.addOption("VAULT" /* VAULT */, "Vault folder");
      dropdown.addOption("SAME" /* SAME */, "Same folder as current file");
      dropdown.setValue(this.plugin.settings.relativeLocation).onChange(async (value) => {
        if (Object.values(RelativeLocation).includes(value)) {
          this.plugin.settings.relativeLocation = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Attachment folder where to import new attachments, relative to the default location:").setDesc("Where newly created notes are placed. Use ${notename} as a placeholder for the name of the note.").addText((text) => {
      text.setPlaceholder("Enter folder path");
      text.setValue(this.plugin.settings.folderPath);
      text.onChange(async (value) => {
        this.plugin.settings.folderPath = value;
        await this.plugin.saveSettings();
        this.plugin.configureHideFolderNames();
        await this.plugin.hideAttachmentFolders(true);
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Attachment link format:").setDesc("What types of links to use for the imported attachments.").addDropdown((dropdown) => {
      dropdown.addOption("RELATIVE" /* RELATIVE */, "With respect to the note's path (relative path)");
      dropdown.addOption("ABSOLUTE" /* ABSOLUTE */, "With respect to the vault's path (absolute path)");
      dropdown.setValue(this.plugin.settings.linkFormat).onChange(async (value) => {
        if (Object.values(LinkFormat).includes(value)) {
          this.plugin.settings.linkFormat = value;
          await this.plugin.saveSettings();
        } else {
          console.error("Invalid option selection:", value);
        }
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Name of the imported attachments:").setDesc(createFragment((frag) => {
      frag.appendText("Choose how to name the imported attachments, using the following variables as a placeholder:");
      frag.createEl("ul").createEl("li", { text: "${original} for the name of the original file" }).createEl("li", { text: "${date} for the current date" }).createEl("li", { text: "${uuid} for a 128-bit Universally Unique Identifier" }).createEl("li", { text: "${md5} for a MD5 hash of the imported file" });
    })).addText((text) => {
      text.setPlaceholder("Enter attachment name");
      text.setValue(this.plugin.settings.attachmentName);
      text.onChange(async (value) => {
        if (value.trim() == "") {
          value = "${original}";
        }
        this.plugin.settings.attachmentName = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian3.Setting(containerEl).setName("Date format:").setDesc(createFragment((frag) => {
      frag.appendText("Choose the date format, based on ");
      frag.createEl("a", {
        href: "https://momentjscom.readthedocs.io/en/latest/moment/04-displaying/01-format",
        text: "momentjs"
      });
      frag.appendText(" syntax.");
    })).addText((text) => {
      text.setPlaceholder("Enter date format");
      text.setValue(this.plugin.settings.dateFormat);
      text.onChange(async (value) => {
        this.plugin.settings.dateFormat = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: "Attachment management" });
    new import_obsidian3.Setting(containerEl).setName("Rename the attachment folder automatically and update all links correspondingly:").setDesc("If this option is enabled, when you rename/move an note, if the renamed note has an attachment folder connected to it, 				its attachment folder is renamed/moved to a new name/location corresponding to the new name of the note.").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoRenameAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.autoRenameAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Delete the attachment folder automatically when the corresponding note is deleted:").setDesc("If this option is enabled, when you delete a note, if the deleted note has an attachment folder connected to it, 				its attachment folder will be deleted as well. 				Note: automatic deletion only works when the name of the attachment folder contains ${notename}.").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoDeleteAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.autoDeleteAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(containerEl).setName("Ask confirmation before deleting the attachment folder:").setDesc("If enabled, the user is asked each time whether to delete the attachment folder.").addToggle((toggle) => toggle.setValue(this.plugin.settings.confirmDeleteAttachmentFolder).onChange(async (value) => {
      this.plugin.settings.confirmDeleteAttachmentFolder = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Display of attachment folders" });
    new import_obsidian3.Setting(containerEl).setName("Hide attachment folders:").setDesc("If this option is enabled, the attachment folders will not be shown.").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideAttachmentFolders).onChange(async (value) => {
      this.plugin.settings.hideAttachmentFolders = value;
      await this.plugin.saveSettings();
      await this.plugin.hideAttachmentFolders(true);
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vc3JjL0ltcG9ydEF0dGFjaG1lbnRzTW9kYWwudHMiLCAiLi4vLi4vc3JjL3R5cGVzLnRzIiwgIi4uLy4uL3NyYy91dGlscy50cyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3N0cmluZ2lmeS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL25hdGl2ZS5qcyIsICIuLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzIiwgIi4uLy4uL3NyYy9wYXRjaE9wZW5GaWxlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8taW5mZXJyYWJsZS10eXBlcyAqL1xuaW1wb3J0IHtcblx0QXBwLFxuXHRNYXJrZG93blZpZXcsXG5cdE1hcmtkb3duRmlsZUluZm8sXG5cdEVkaXRvcixcblx0Tm90aWNlLFxuXHRGaWxlU3lzdGVtQWRhcHRlcixcblx0UGx1Z2luLFxuXHRQbHVnaW5TZXR0aW5nVGFiLFxuXHRTZXR0aW5nLFxuXHRUQWJzdHJhY3RGaWxlLFxuXHRQbHVnaW5NYW5pZmVzdCxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmltcG9ydCB7SW1wb3J0QWN0aW9uVHlwZU1vZGFsLCBPdmVyd3JpdGVDaG9pY2VNb2RhbCwgSW1wb3J0RnJvbVZhdWx0Q2hvaWNlTW9kYWwsIERlbGV0ZUF0dGFjaG1lbnRGb2xkZXJNb2RhbH0gZnJvbSAnLi9JbXBvcnRBdHRhY2htZW50c01vZGFsJztcbmltcG9ydCB7XG5cdFx0SW1wb3J0QWN0aW9uVHlwZSxcblx0XHRNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMsXG5cdFx0SW1wb3J0T3BlcmF0aW9uVHlwZSxcblx0XHRJbXBvcnRBdHRhY2htZW50c1NldHRpbmdzLFxuXHRcdEF0dGFjaG1lbnRGb2xkZXJQYXRoLFxuXHRcdEltcG9ydFNldHRpbmdzSW50ZXJmYWNlLFxuXHRcdE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMsXG5cdFx0SW1wb3J0RnJvbVZhdWx0T3B0aW9ucyxcblx0XHRZZXNOb1R5cGVzLFxuXHRcdFJlbGF0aXZlTG9jYXRpb24sXG5cdFx0TGlua0Zvcm1hdCxcblx0fSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gXCJ1dGlsc1wiO1xuaW1wb3J0IHsgUGFyc2VkUGF0aCB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnOyAgLy8gVGhpcyBpbXBvcnRzIHRoZSBwcm9taXNlcyBBUEkgZnJvbSBmc1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsgICAgICAgICAvLyBTdGFuZGFyZCBpbXBvcnQgZm9yIHRoZSBwYXRoIG1vZHVsZVxuXG5pbXBvcnQge3BhdGNoT3BlbkZpbGUsIHVucGF0Y2hPcGVuRmlsZSwgYWRkS2V5TGlzdGVuZXJzLCByZW1vdmVLZXlMaXN0ZW5lcnN9IGZyb20gJ3BhdGNoT3BlbkZpbGUnO1xuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBJbXBvcnRBdHRhY2htZW50c1NldHRpbmdzID0ge1xuXHRhY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgLy8gRGVmYXVsdCB0byBhc2tpbmcgdGhlIHVzZXJcblx0YWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgLy8gRGVmYXVsdCB0byBhc2tpbmcgdGhlIHVzZXJcblx0ZW1iZWRGaWxlc09uSW1wb3J0OiBZZXNOb1R5cGVzLkFTS19VU0VSLCAvLyBEZWZhdWx0IHRvIGxpbmtpbmcgZmlsZXNcblx0bGFzdEFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGUuQ09QWSwgLy8gRGVmYXVsdCB0byBjb3B5aW5nIGZpbGVzXG5cdGxhc3RBY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZS5DT1BZLCAvLyBEZWZhdWx0IHRvIGNvcHlpbmcgZmlsZXNcblx0bGFzdEVtYmVkRmlsZXNPbkltcG9ydDogWWVzTm9UeXBlcy5OTywgLy8gRGVmYXVsdCB0byBsaW5raW5nXG5cdG11bHRpcGxlRmlsZXNJbXBvcnRUeXBlOiBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuQlVMTEVURUQsIC8vIERlZmF1bHQgdG8gYnVsbGV0ZWQgbGlzdCB3aGVuIGltcG9ydGluZyBtdWx0aXBsZSBmaWxlc1xuXHRyZWxhdGl2ZUxvY2F0aW9uOiBSZWxhdGl2ZUxvY2F0aW9uLlNBTUUsIC8vIERlZmF1bHQgdG8gdmF1bHRcblx0Zm9sZGVyUGF0aDogJyR7bm90ZW5hbWV9IChhdHRhY2htZW50cyknLCAvLyBEZWZhdWx0IHRvIGEgZm9sZGVyIGluIHRoZSB2YXVsdFxuXHRsaW5rRm9ybWF0OiBMaW5rRm9ybWF0LlJFTEFUSVZFLFxuXHRhdHRhY2htZW50TmFtZTogJyR7b3JpZ2luYWx9JywgLy8gRGVmYXVsdCB0byB0aGUgb3JpZ2luYWwgbmFtZSBvZiB0aGUgYXR0YWNobWVudFxuXHRkYXRlRm9ybWF0OiAnWVlZWV9NTV9ERFRISF9tbV9zcycsXG5cdGN1c3RvbURpc3BsYXlUZXh0OiB0cnVlLCAgLy8gRGVmYXVsdCB0byB0cnVlXG5cdGF1dG9SZW5hbWVBdHRhY2htZW50Rm9sZGVyOiB0cnVlLCAvLyBEZWZhdWx0IHRvIHRydWVcblx0YXV0b0RlbGV0ZUF0dGFjaG1lbnRGb2xkZXI6IHRydWUsIC8vIERlZmF1bHQgdG8gdHJ1ZVxuXHRjb25maXJtRGVsZXRlQXR0YWNobWVudEZvbGRlcjogdHJ1ZSwgLy8gRGVmYXVsdCB0byB0cnVlXG5cdGhpZGVBdHRhY2htZW50Rm9sZGVyczogdHJ1ZSwgLy8gRGVmYXVsdCB0byB0cnVlXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbXBvcnRBdHRhY2htZW50cyBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBJbXBvcnRBdHRhY2htZW50c1NldHRpbmdzID0gey4uLkRFRkFVTFRfU0VUVElOR1N9O1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0cHJpdmF0ZSByZW5hbWVDYWxsYmFja0VuYWJsZWQ6IGJvb2xlYW4gPSB0cnVlO1xuXHRwcml2YXRlIGRlbGV0ZUNhbGxiYWNrRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG5cdHByaXZhdGUgb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBoaWRlRm9sZGVyTmFtZXMgOiBBcnJheTxzdHJpbmc+ID0gW107XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBQbHVnaW5NYW5pZmVzdCkge1xuXHRcdHN1cGVyKGFwcCwgbWFuaWZlc3QpO1xuXG5cdFx0Ly8gc3RvcmUgdGhlIHZhdWx0IHBhdGhcblx0XHRjb25zdCBhZGFwdGVyID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlcjtcblx0XHRpZiAoIShhZGFwdGVyIGluc3RhbmNlb2YgRmlsZVN5c3RlbUFkYXB0ZXIpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmF1bHQgZm9sZGVyIGNvdWxkIG5vdCBiZSBkZXRlcm1pbmVkLlwiKTtcblx0XHR9XG5cdFx0dGhpcy52YXVsdFBhdGggPSBhZGFwdGVyLmdldEJhc2VQYXRoKCk7XG5cdH1cblxuXHRzZXR1cE9ic2VydmVyKCkge1xuXHRcdHRoaXMuY29uZmlndXJlSGlkZUZvbGRlck5hbWVzKCk7XG5cblx0XHRjb25zdCBjYWxsYmFjazogTXV0YXRpb25DYWxsYmFjayA9IChtdXRhdGlvbnNMaXN0LCBvYnNlcnZlcikgPT4ge1xuXHRcdFx0bXV0YXRpb25zTGlzdC5mb3JFYWNoKHJlY29yZCA9PiB7XG5cdFx0XHRcdGlmKHJlY29yZC50YXJnZXQ/LnBhcmVudEVsZW1lbnQ/LmNsYXNzTGlzdC5jb250YWlucyhcIm5hdi1mb2xkZXJcIikpIHtcblx0XHRcdFx0XHR0aGlzLmhpZGVBdHRhY2htZW50Rm9sZGVycygpO1xuXHRcdFx0fX0pO1xuXHRcdH07XG5cblx0XHRjb25zdCB0YXJnZXROb2RlID0gZG9jdW1lbnQuYm9keTsgLy8gT3IgYW55IHNwZWNpZmljIGVsZW1lbnQgeW91J3JlIGludGVyZXN0ZWQgaW5cblxuXHRcdHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XG5cblx0XHRjb25zdCBjb25maWcgPSB7XG5cdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRzdWJ0cmVlOiB0cnVlLFxuXHRcdH07XG5cblx0XHR0aGlzLm9ic2VydmVyLm9ic2VydmUodGFyZ2V0Tm9kZSwgY29uZmlnKTtcblx0fVxuXG5cdGFzeW5jIGhpZGVBdHRhY2htZW50Rm9sZGVycyhyZWNoZWNrUHJldmlvdXNseUhpZGRlbkZvbGRlcnM/OiBib29sZWFuKSB7XG5cdFx0aWYgKHJlY2hlY2tQcmV2aW91c2x5SGlkZGVuRm9sZGVycykge1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbXBvcnQtYXR0YWNoLWhpZGRlblwiKS5mb3JFYWNoKChmb2xkZXIpID0+IHtcblx0XHRcdFx0aWYoZm9sZGVyLnBhcmVudEVsZW1lbnQpeyBmb2xkZXIucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIlwiIH1cblx0XHRcdFx0aWYoZm9sZGVyLnBhcmVudEVsZW1lbnQpeyBmb2xkZXIucGFyZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiXCIgfVxuXHRcdFx0XHRmb2xkZXIucmVtb3ZlQ2xhc3MoXCIuaW1wb3J0LWF0dGFjaC1oaWRkZW5cIik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLmhpZGVGb2xkZXJOYW1lcy5mb3JFYWNoKGZvbGRlclBhdHRlcm4gPT4ge1xuXHRcdFx0aWYoZm9sZGVyUGF0dGVybiA9PT0gXCJcIikgcmV0dXJuO1xuXHRcdFx0Y29uc3QgZm9sZGVyRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvbGRlclBhdHRlcm4pO1xuXHRcdFx0XG5cdFx0XHRmb2xkZXJFbGVtZW50cy5mb3JFYWNoKChmb2xkZXIpID0+IHtcblx0XHRcdFx0aWYgKCFmb2xkZXIgfHwgIWZvbGRlci5wYXJlbnRFbGVtZW50KSB7XHRyZXR1cm47IH1cblx0XHRcdFx0XG5cdFx0XHRcdGZvbGRlci5hZGRDbGFzcyhcImltcG9ydC1hdHRhY2gtaGlkZGVuXCIpO1xuXHRcdFx0XHRmb2xkZXIucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLnNldHRpbmdzLmhpZGVBdHRhY2htZW50Rm9sZGVycyA/IFwiMFwiIDogXCJcIjtcblx0XHRcdFx0Zm9sZGVyLnBhcmVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSB0aGlzLnNldHRpbmdzLmhpZGVBdHRhY2htZW50Rm9sZGVycyA/IFwiaGlkZGVuXCIgOiBcIlwiO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRzcGxpdEFyb3VuZE9yaWdpbmFsKGlucHV0OiBzdHJpbmcsIHBsYWNlaG9sZGVyOiBzdHJpbmcpOiBbc3RyaW5nLCBzdHJpbmddIHtcblx0XHQvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiB0aGUgcGxhY2Vob2xkZXJcblx0XHRjb25zdCBmaXJzdEluZGV4ID0gaW5wdXQuaW5kZXhPZihwbGFjZWhvbGRlcik7XG5cblx0XHQvLyBJZiB0aGUgcGxhY2Vob2xkZXIgaXMgbm90IGZvdW5kLCByZXR1cm4gdGhlIHdob2xlIHN0cmluZyBhcyB0aGUgZmlyc3QgcGFydCBhbmQgYW4gZW1wdHkgc3RyaW5nIGFzIHRoZSBzZWNvbmQgcGFydFxuXHRcdGlmIChmaXJzdEluZGV4ID09PSAtMSkge1xuXHRcdFx0cmV0dXJuIFtpbnB1dCwgXCJcIl07XG5cdFx0fVxuXG5cdFx0Ly8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiB0aGUgcGxhY2Vob2xkZXJcblx0XHRjb25zdCBsYXN0SW5kZXggPSBpbnB1dC5sYXN0SW5kZXhPZihwbGFjZWhvbGRlcik7XG5cblx0XHQvLyBDYWxjdWxhdGUgdGhlIHN0YXJ0aW5nIGluZGV4IG9mIHRoZSB0ZXh0IGFmdGVyIHRoZSBwbGFjZWhvbGRlclxuXHRcdGNvbnN0IGVuZE9mUGxhY2Vob2xkZXJJbmRleCA9IGxhc3RJbmRleCArIHBsYWNlaG9sZGVyLmxlbmd0aDtcblxuXHRcdC8vIEV4dHJhY3QgdGhlIHBhcnRzIGJlZm9yZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBhbmQgYWZ0ZXIgdGhlIGxhc3Qgb2NjdXJyZW5jZSBvZiB0aGUgcGxhY2Vob2xkZXJcblx0XHRjb25zdCBiZWZvcmVGaXJzdCA9IGlucHV0LnN1YnN0cmluZygwLCBmaXJzdEluZGV4KTtcblx0XHRjb25zdCBhZnRlckxhc3QgPSBpbnB1dC5zdWJzdHJpbmcoZW5kT2ZQbGFjZWhvbGRlckluZGV4KTtcblxuXHRcdHJldHVybiBbYmVmb3JlRmlyc3QsIGFmdGVyTGFzdF07XG5cdH1cblxuXHRjb25maWd1cmVIaWRlRm9sZGVyTmFtZXMoKSB7XG5cdFx0Y29uc3QgcGxhY2Vob2xkZXIgPSBcIiR7bm90ZW5hbWV9XCI7XG5cdFx0aWYodGhpcy5zZXR0aW5ncy5mb2xkZXJQYXRoLmluY2x1ZGVzKHBsYWNlaG9sZGVyKSkge1xuXHRcdFx0Y29uc3QgW3N0YXJ0c1dpdGgsIGVuZHNXaXRoXSA9IHRoaXMuc3BsaXRBcm91bmRPcmlnaW5hbCh0aGlzLnNldHRpbmdzLmZvbGRlclBhdGgscGxhY2Vob2xkZXIpO1xuXHRcdFx0aWYoZW5kc1dpdGghPVwiXCIpIHtcblx0XHRcdFx0dGhpcy5oaWRlRm9sZGVyTmFtZXMgPSBbXG5cdFx0XHRcdFx0XHRgW2RhdGEtcGF0aCQ9XCIke2VuZHNXaXRofVwiXWBcblx0XHRcdFx0XHRdO1xuXHRcdFx0fSBlbHNlIGlmKHN0YXJ0c1dpdGghPVwiXCIpIHtcblx0XHRcdFx0dGhpcy5oaWRlRm9sZGVyTmFtZXMgPSBbXG5cdFx0XHRcdFx0XHRgLm5hdi1mb2xkZXItdGl0bGVbZGF0YS1wYXRoXj1cIiR7c3RhcnRzV2l0aH1cIl0sIC5uYXYtZm9sZGVyLXRpdGxlW2RhdGEtcGF0aCo9XCIvJHtzdGFydHNXaXRofVwiXWBcblx0XHRcdFx0XHRdO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhpZGVGb2xkZXJOYW1lcyA9IFtcblx0XHRcdFx0YFtkYXRhLXBhdGgkPVwiLyR7dGhpcy5zZXR0aW5ncy5mb2xkZXJQYXRofVwiXSwgW2RhdGEtcGF0aD1cIiR7dGhpcy5zZXR0aW5ncy5mb2xkZXJQYXRofVwiXWBcblx0XHRcdFx0XTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Ly8gTG9hZCBhbmQgYWRkIHNldHRpbmdzIHRhYlxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBJbXBvcnRBdHRhY2htZW50c1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIHNldCB1cCB0aGUgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIGhpZGluZyBmb2xkZXJzXG5cdFx0dGhpcy5zZXR1cE9ic2VydmVyKCk7XG5cblx0XHQvLyBtb25rZXkgcGF0Y2ggb2YgdGhlIG9wZW5GaWxlIGZ1bmN0aW9uXG5cdFx0cGF0Y2hPcGVuRmlsZSh0aGlzKTtcblx0XHQvLyBhZGQga2V5IGxpc3RlbmVycyBmb3IgbW9kaWZ5aW5nIHRoZSBiZWhhdmlvciB3aGVuIG9wZW5pbmcgZmlsZXNcbiAgICAgICAgYWRkS2V5TGlzdGVuZXJzKCk7XG5cblx0XHQvLyBDb21tYW5kIGZvciBpbXBvcnRpbmcgYXMgYSBzdGFuZGFyZCBsaW5rXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm1vdmUtZmlsZS10by12YXVsdC1saW5rXCIsXG5cdFx0XHRuYW1lOiBcIk1vdmUgRmlsZSB0byBWYXVsdCBhcyBMaW5rXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5jaG9vc2VGaWxlVG9JbXBvcnQoe1xuXHRcdFx0XHRlbWJlZDogZmFsc2UsXG5cdFx0XHRcdGFjdGlvbjogSW1wb3J0QWN0aW9uVHlwZS5NT1ZFLFxuXHRcdFx0fSksXG5cdFx0fSk7XG5cblx0XHQvLyBDb21tYW5kIGZvciBpbXBvcnRpbmcgYXMgYW4gZW1iZWRkZWQgaW1hZ2UvbGlua1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJtb3ZlLWZpbGUtdG8tdmF1bHQtZW1iZWRcIixcblx0XHRcdG5hbWU6IFwiTW92ZSBGaWxlIHRvIFZhdWx0IGFzIEVtYmVkZGVkXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5jaG9vc2VGaWxlVG9JbXBvcnQoe1xuXHRcdFx0XHRlbWJlZDogdHJ1ZSxcblx0XHRcdFx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlLk1PVkUsXG5cdFx0XHR9KSxcblx0XHR9KTtcblxuXHRcdC8vIENvbW1hbmQgZm9yIGltcG9ydGluZyBhcyBhIHN0YW5kYXJkIGxpbmtcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiY29weS1maWxlLXRvLXZhdWx0LWxpbmtcIixcblx0XHRcdG5hbWU6IFwiQ29weSBGaWxlIHRvIFZhdWx0IGFzIExpbmtcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmNob29zZUZpbGVUb0ltcG9ydCh7XG5cdFx0XHRcdGVtYmVkOiBmYWxzZSxcblx0XHRcdFx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlLkNPUFksXG5cdFx0XHR9KSxcblx0XHR9KTtcblxuXHRcdC8vIENvbW1hbmQgZm9yIGltcG9ydGluZyBhcyBhbiBlbWJlZGRlZCBpbWFnZS9saW5rXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImNvcHktZmlsZS10by12YXVsdC1lbWJlZFwiLFxuXHRcdFx0bmFtZTogXCJDb3B5IEZpbGUgdG8gVmF1bHQgYXMgRW1iZWRkZWRcIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmNob29zZUZpbGVUb0ltcG9ydCh7XG5cdFx0XHRcdGVtYmVkOiB0cnVlLFxuXHRcdFx0XHRhY3Rpb246IEltcG9ydEFjdGlvblR5cGUuQ09QWSxcblx0XHRcdH0pLFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmVnaXN0ZXIgdGhlIGNvbW1hbmQgdG8gb3BlbiB0aGUgYXR0YWNobWVudHMgZm9sZGVyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcIm9wZW4tYXR0YWNobWVudHMtZm9sZGVyXCIsXG5cdFx0XHRuYW1lOiBcIk9wZW4gQXR0YWNobWVudHMgRm9sZGVyXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuQXR0YWNobWVudHNGb2xkZXIoKSxcblx0XHR9KTtcblxuXHRcdC8qXG5cdFx0Ly8gVGhlIGNvZGUgYmVsb3cgaGFuZGxlcyBgZHJvcGAgZXZlbnRzIG1hbnVhbGx5XG5cdFx0Ly9cblx0XHQvLyBTZXQgdXAgdGhlIGV2ZW50IGxpc3RlbmVyXG5cdFx0Y29uc3QgZHJvcEhhbmRsZXIgPSAoZXZlbnQ6IERyYWdFdmVudCkgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG5cdFx0XHRjb25zdCBmaWxlcyA9IGV2ZW50Py5kYXRhVHJhbnNmZXI/LmZpbGVzO1xuXHRcdFx0aWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Ly8gdGhpcy5oYW5kbGVGaWxlcyhmaWxlcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdObyBmaWxlcyBkcm9wcGVkJyk7XG5cdFx0XHR9XG5cdFx0fTtcblx0XHQvLyBBZGQgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBkb2N1bWVudCBib2R5XG5cdFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZHJvcEhhbmRsZXIpO1xuXHRcdC8vIEVuc3VyZSB0aGUgZXZlbnQgbGlzdGVuZXIgaXMgcmVtb3ZlZCB3aGVuIHRoZSBwbHVnaW4gaXMgdW5sb2FkZWRcblx0XHR0aGlzLnJlZ2lzdGVyKCgpID0+IGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIGRyb3BIYW5kbGVyKSk7XG5cdFx0Ki9cblxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdC8vIGNoZWNrIG9ic2lkaWFuLmQudHMgZm9yIG90aGVyIHR5cGVzIG9mIGV2ZW50c1xuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItZHJvcCcsIGFzeW5jIChldnQ6IERyYWdFdmVudCwgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldyB8IE1hcmtkb3duRmlsZUluZm8pID0+IHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZFxuXHRcdFx0XHRpZiAoZXZ0LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblxuXHRcdFx0XHRpZiAoISh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ05vIHZpZXcgcHJvdmlkZWQnKVx0XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBhbHRLZXlQcmVzc2VkID0gZXZ0LmFsdEtleTsgLy8gQ2hlY2sgaWYgU2hpZnQgd2FzIHByZXNzZWRcblx0XHRcdFx0aWYoYWx0S2V5UHJlc3NlZCkgeyBcblx0XHRcdFx0XHQvLyBGb2xsb3cgc3RhbmRhcmQgYmVoYXZpb3Igd2hlcmUgYSBsaW5rIHRvIHRoZSBleHRlcm5hbCBmaWxlIGlzIGNyZWF0ZWRcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gUHJldmVudCBvdGhlciBoYW5kbGVycyBmcm9tIGV4ZWN1dGluZ1xuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgZG9Gb3JjZUFza2luZyA9IGV2dC5zaGlmdEtleTsgLy8gQ2hlY2sgaWYgU2hpZnQgd2FzIHByZXNzZWRcblx0XHRcdFx0XG5cdFx0XHRcdC8vIEhhbmRsZSB0aGUgZHJvcHBlZCBmaWxlc1xuXHRcdFx0XHRjb25zdCBmaWxlcyA9IGV2dD8uZGF0YVRyYW5zZmVyPy5maWxlcztcblx0XHRcdFx0aWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzLCBlZGl0b3IsIHZpZXcsIGRvRm9yY2VBc2tpbmcsIEltcG9ydE9wZXJhdGlvblR5cGUuRFJBR19BTkRfRFJPUCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignTm8gZmlsZXMgZHJvcHBlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHQvLyBjaGVjayBvYnNpZGlhbi5kLnRzIGZvciBvdGhlciB0eXBlcyBvZiBldmVudHNcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLXBhc3RlJywgYXN5bmMgKGV2dDogQ2xpcGJvYXJkRXZlbnQsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcgfCBNYXJrZG93bkZpbGVJbmZvKSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcblx0XHRcdFx0aWYgKGV2dC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG5cblx0XHRcdFx0aWYgKCEodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdObyB2aWV3IHByb3ZpZGVkJylcdFxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGNsaXBib2FyZERhdGEgPSBldnQuY2xpcGJvYXJkRGF0YTtcblx0XHRcdFx0aWYgKGNsaXBib2FyZERhdGEpIHtcblx0XHRcdFx0XHRjb25zdCBmaWxlcyA9IGNsaXBib2FyZERhdGEuZmlsZXM7XG5cdFx0XHRcdFx0Ly8gY29uc3QgaXRlbXMgPSBjbGlwYm9hcmREYXRhLml0ZW1zO1xuXG5cdFx0XHRcdFx0aWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBIYW5kbGUgZmlsZXNcblx0XHRcdFx0XHRcdGNvbnN0IGRvVG9nZ2xlRW1iZWRQcmVmZXJlbmNlID0gZmFsc2U7IC8vIFByZXRlbmQgc2hpZnQgd2FzIG5vdCBwcmVzc2VkXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzLCBlZGl0b3IsIHZpZXcsIGRvVG9nZ2xlRW1iZWRQcmVmZXJlbmNlLCBJbXBvcnRPcGVyYXRpb25UeXBlLlBBU1RFKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBjb25zb2xlLmVycm9yKFwiTm8gZmlsZXMgZGV0ZWN0ZWQgaW4gcGFzdGUgZGF0YS5cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC52YXVsdC5vbigncmVuYW1lJywgYXN5bmMgKG5ld0ZpbGU6IFRBYnN0cmFjdEZpbGUsIG9sZFBhdGg6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRpZighdGhpcy5zZXR0aW5ncy5hdXRvUmVuYW1lQXR0YWNobWVudEZvbGRlcikgeyByZXR1cm4gfVxuXG5cdFx0XHRcdGlmKHRoaXMucmVuYW1lQ2FsbGJhY2tFbmFibGVkKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb2xkUGF0aF9wYXJzZWQgPSBwYXRoLnBhcnNlKG9sZFBhdGgpO1xuXHRcdFx0XHRcdGlmKG9sZFBhdGhfcGFyc2VkLmV4dCAhPSBcIi5tZFwiKSB7IHJldHVybiB9XG5cblx0XHRcdFx0XHRjb25zdCBvbGRBdHRhY2htZW50Rm9sZGVyUGF0aCA9IHRoaXMuZ2V0QXR0YWNobWVudEZvbGRlcihvbGRQYXRoX3BhcnNlZCk7XG5cdFx0XHRcdFx0aWYoIW9sZEF0dGFjaG1lbnRGb2xkZXJQYXRoKSB7IHJldHVybiB9XG5cdFxuXHRcdFx0XHRcdGlmKGF3YWl0IFV0aWxzLmNoZWNrRGlyZWN0b3J5RXhpc3RzKG9sZEF0dGFjaG1lbnRGb2xkZXJQYXRoLmF0dGFjaG1lbnRzRm9sZGVyUGF0aCkpIHtcblx0XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdBdHRhY2htZW50Rm9sZGVyUGF0aCA9IHRoaXMuZ2V0QXR0YWNobWVudEZvbGRlcihwYXRoLnBhcnNlKG5ld0ZpbGUucGF0aCkpO1xuXHRcdFx0XHRcdFx0aWYoIW5ld0F0dGFjaG1lbnRGb2xkZXJQYXRoKSB7IHJldHVybiB9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGNvbnN0IG9sZFBhdGggPSBwYXRoLnJlbGF0aXZlKHRoaXMudmF1bHRQYXRoLG9sZEF0dGFjaG1lbnRGb2xkZXJQYXRoLmF0dGFjaG1lbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aC5yZWxhdGl2ZSh0aGlzLnZhdWx0UGF0aCxuZXdBdHRhY2htZW50Rm9sZGVyUGF0aC5hdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5hbWVDYWxsYmFja0VuYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5yZW5hbWVGaWxlKG9sZFBhdGgsbmV3UGF0aCk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBtc2cgPSAnRmFpbGVkIHRvIHJlbmFtZSB0aGUgYXR0YWNobWVudCBmb2xkZXInO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKG1zZyk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJPcmlnaW5hbCBhdHRhY2htZW50IGZvbGRlcjpcIixvbGRQYXRoKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIk5ldyBhdHRhY2htZW50IGZvbGRlcjpcIixuZXdQYXRoKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIG1zZzpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKG1zZysnLicpO1xuXHRcdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5hbWVDYWxsYmFja0VuYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAudmF1bHQub24oXCJkZWxldGVcIiwgYXN5bmMgKGZpbGU6IFRBYnN0cmFjdEZpbGUpID0+IHtcblx0XHRcdFx0aWYoIXRoaXMuc2V0dGluZ3MuYXV0b0RlbGV0ZUF0dGFjaG1lbnRGb2xkZXIpIHsgcmV0dXJuIH1cblx0XHRcblx0XHRcdFx0Ly8gYXV0b21hdGljIGRlbGV0aW9uIG9ubHkgd29ya3Mgd2hlbiB0aGUgYXR0YWNobWVudCBuYW1lIGNvbnRhaW5zICR7bm90ZW5hbWV9XG5cdFx0XHRcdC8vIGluIG9yZGVyIHRvIGF2b2lkIGRlbGV0aW5nIGNvbW1vbiBhdHRhY2htZW50IGZvbGRlciwgc2hhcmVkIGJldHdlZW4gbXVsdGlwbGUgbm90ZXNcblx0XHRcdFx0aWYoIXRoaXMuc2V0dGluZ3MuZm9sZGVyUGF0aC5pbmNsdWRlcygnJHtub3RlbmFtZX0nKSkgeyByZXR1cm4gfVxuXG5cdFx0XHRcdGlmKHRoaXMuZGVsZXRlQ2FsbGJhY2tFbmFibGVkKSB7XG5cdFx0XHRcdFx0Y29uc3QgZmlsZV9wYXJzZWQgPSBwYXRoLnBhcnNlKGZpbGUucGF0aCk7XG5cdFx0XHRcdFx0aWYoZmlsZV9wYXJzZWQuZXh0ICE9IFwiLm1kXCIpIHsgcmV0dXJuIH1cblxuXHRcdFx0XHRcdGNvbnN0IGF0dGFjaG1lbnRGb2xkZXJQYXRoID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKGZpbGVfcGFyc2VkKTtcblx0XHRcdFx0XHRpZighYXR0YWNobWVudEZvbGRlclBhdGgpIHsgcmV0dXJuIH1cblxuXHRcdFx0XHRcdGlmKGF3YWl0IFV0aWxzLmNoZWNrRGlyZWN0b3J5RXhpc3RzKGF0dGFjaG1lbnRGb2xkZXJQYXRoLmF0dGFjaG1lbnRzRm9sZGVyUGF0aCkpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERlbGV0ZUF0dGFjaG1lbnRGb2xkZXJNb2RhbCh0aGlzLmFwcCwgdGhpcywgYXR0YWNobWVudEZvbGRlclBhdGguYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHRcdGNvbnN0IGNob2ljZSA9IGF3YWl0IG1vZGFsLnByb21pc2U7XG5cdFx0XHRcdFx0XHRpZiAoIWNob2ljZSkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVsYXRpdmUodGhpcy52YXVsdFBhdGgsYXR0YWNobWVudEZvbGRlclBhdGguYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGVsZXRlQ2FsbGJhY2tFbmFibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMudHJhc2hGaWxlKGZpbGVQYXRoKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1zZyA9ICdGYWlsZWQgdG8gcmVtb3ZlIHRoZSBhdHRhY2htZW50IGZvbGRlcic7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IobXNnICsgXCI6XCIsIGZpbGVQYXRoKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIG1zZzpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKG1zZysnLicpO1xuXHRcdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kZWxldGVDYWxsYmFja0VuYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0Y29uc29sZS5sb2coJ0xvYWRlZCBwbHVnaW4gSW1wb3J0IEF0dGFjaG1lbnRzKycpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG4gICAgICAgIHVucGF0Y2hPcGVuRmlsZSgpO1xuICAgICAgICByZW1vdmVLZXlMaXN0ZW5lcnMoKTtcblx0XHRpZih0aGlzLm9ic2VydmVyKXtcblx0XHRcdHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1x0XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRhc3luYyByZW5hbWVGaWxlKG9sZEZpbGVQYXRoOiBzdHJpbmcsIG5ld0ZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvbGRGaWxlUGF0aCk7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRBYnN0cmFjdEZpbGUpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdGaWxlUGF0aCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0F0dGFjaG1lbnQgZm9sZGVyIHJlbmFtZWQgc3VjY2Vzc2Z1bGx5LicpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV3IE5vdGljZSgnQXR0YWNobWVudCBmb2xkZXIgY291bGQgbm90IGJlIGZvdW5kIGF0IHRoZSBnaXZlbiBsb2NhdGlvbi4nKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdFx0Y29uc3QgbXNnID0gJ0ZhaWxlZCB0byByZW5hbWUgZmlsZSc7XG5cdFx0XHRjb25zb2xlLmVycm9yKG1zZysnOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UobXNnKycuJyk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgdHJhc2hGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRBYnN0cmFjdEZpbGUpIHtcblx0XHRcdFx0YXdhaXQgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci50cmFzaFN5c3RlbShmaWxlUGF0aCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0F0dGFjaG1lbnQgZm9sZGVyIG1vdmVkIHRvIHN5c3RlbSB0cmFzaCBzdWNjZXNzZnVsbHkuJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXcgTm90aWNlKCdBdHRhY2htZW50IGZvbGRlciBjb3VsZCBub3QgYmUgZm91bmQgYXQgdGhlIGdpdmVuIGxvY2F0aW9uLicpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0XHRjb25zdCBtc2cgPSAnRmFpbGVkIHRvIHJlbmFtZSBmaWxlJztcblx0XHRcdGNvbnNvbGUuZXJyb3IobXNnKyc6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZShtc2crJy4nKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBoYW5kbGVGaWxlcyhmaWxlczogRmlsZUxpc3QsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcsIGRvRm9yY2VBc2tpbmc6IGJvb2xlYW4sIGltcG9ydFR5cGU6IEltcG9ydE9wZXJhdGlvblR5cGUpIHtcblx0XHRjb25zdCBhdHRhY2htZW50c0ZvbGRlciA9IHRoaXMuZ2V0QXR0YWNobWVudEZvbGRlcigpO1xuXHRcdGlmKCFhdHRhY2htZW50c0ZvbGRlcil7IHJldHVybiB9XG5cblx0XHRjb25zdCB7IGF0dGFjaG1lbnRzRm9sZGVyUGF0aCwgY3VycmVudE5vdGVGb2xkZXJQYXRoIH0gPSBhdHRhY2htZW50c0ZvbGRlcjtcblxuXHRcdGxldCBhY3Rpb25GaWxlc09uSW1wb3J0PUltcG9ydEFjdGlvblR5cGUuQ09QWTsgLy8gZm9yIHNhZmV0eSwgdGhlIGRlZnVhbHQgaXMgQ09QWVxuXHRcdGxldCBsYXN0QWN0aW9uRmlsZXNPbkltcG9ydD1JbXBvcnRBY3Rpb25UeXBlLkNPUFk7IC8vIGZvciBzYWZldHksIHRoZSBkZWZ1YWx0IGlzIENPUFlcblx0XHRzd2l0Y2goaW1wb3J0VHlwZSlcblx0XHR7XG5cdFx0Y2FzZSBJbXBvcnRPcGVyYXRpb25UeXBlLkRSQUdfQU5EX0RST1A6XG5cdFx0XHRhY3Rpb25GaWxlc09uSW1wb3J0PXRoaXMuc2V0dGluZ3MuYWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQ7XG5cdFx0XHRsYXN0QWN0aW9uRmlsZXNPbkltcG9ydD10aGlzLnNldHRpbmdzLmxhc3RBY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgSW1wb3J0T3BlcmF0aW9uVHlwZS5QQVNURTpcblx0XHRcdGFjdGlvbkZpbGVzT25JbXBvcnQ9dGhpcy5zZXR0aW5ncy5hY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0O1xuXHRcdFx0bGFzdEFjdGlvbkZpbGVzT25JbXBvcnQ9dGhpcy5zZXR0aW5ncy5sYXN0QWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydDtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGxldCBlbWJlZE9wdGlvbiA9IHRoaXMuc2V0dGluZ3MuZW1iZWRGaWxlc09uSW1wb3J0O1xuXHRcdGNvbnN0IGxhc3RFbWJlZE9wdGlvbiA9IHRoaXMuc2V0dGluZ3MubGFzdEVtYmVkRmlsZXNPbkltcG9ydDtcblxuXHRcdGlmIChkb0ZvcmNlQXNraW5nIHx8IGFjdGlvbkZpbGVzT25JbXBvcnQgPT0gSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiB8fCBlbWJlZE9wdGlvbiA9PSBZZXNOb1R5cGVzLkFTS19VU0VSKSB7XG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBJbXBvcnRBY3Rpb25UeXBlTW9kYWwodGhpcy5hcHAsIHRoaXMsIGxhc3RBY3Rpb25GaWxlc09uSW1wb3J0LCBsYXN0RW1iZWRPcHRpb24pO1xuXHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0Y29uc3QgY2hvaWNlID0gYXdhaXQgbW9kYWwucHJvbWlzZTtcblx0XHRcdGlmIChjaG9pY2UgPT0gbnVsbCkgcmV0dXJuOyAvLyByZXR1cm4gaWYgdGhlIHVzZXIgY2xvc2VzIHRoZSBtb2RhbCB3aXRob3V0IHByZWZlcmVuY2VzICAgICAgICBcdFx0XG5cdFx0XHRhY3Rpb25GaWxlc09uSW1wb3J0ID0gY2hvaWNlLmFjdGlvbjtcblx0XHRcdHN3aXRjaCAoaW1wb3J0VHlwZSkge1xuXHRcdFx0XHRjYXNlIEltcG9ydE9wZXJhdGlvblR5cGUuRFJBR19BTkRfRFJPUDpcblx0XHRcdFx0XHRpZiAoY2hvaWNlLnJlbWVtYmVyQ2hvaWNlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0ID0gYWN0aW9uRmlsZXNPbkltcG9ydDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5sYXN0QWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQgPSBhY3Rpb25GaWxlc09uSW1wb3J0O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIEltcG9ydE9wZXJhdGlvblR5cGUuUEFTVEU6XG5cdFx0XHRcdFx0aWYgKGNob2ljZS5yZW1lbWJlckNob2ljZSkge1xuXHRcdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0ID0gYWN0aW9uRmlsZXNPbkltcG9ydDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5zZXR0aW5ncy5sYXN0QWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydCA9IGFjdGlvbkZpbGVzT25JbXBvcnQ7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlbWJlZE9wdGlvbiA9IGNob2ljZS5lbWJlZDtcblx0XHRcdGlmIChjaG9pY2UucmVtZW1iZXJDaG9pY2UpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5lbWJlZEZpbGVzT25JbXBvcnQgPSBlbWJlZE9wdGlvbjtcdFxuXHRcdFx0fVxuXHRcdFx0dGhpcy5zZXR0aW5ncy5sYXN0RW1iZWRGaWxlc09uSW1wb3J0ID0gZW1iZWRPcHRpb247XG5cdFx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGRvRW1iZWQgPSAoZW1iZWRPcHRpb24gPT0gWWVzTm9UeXBlcy5ZRVMpO1xuXG5cdFx0Y29uc3QgaW1wb3J0U2V0dGluZ3MgPSB7XG5cdFx0XHRlbWJlZDogZG9FbWJlZCxcblx0XHRcdGFjdGlvbjogYWN0aW9uRmlsZXNPbkltcG9ydCxcblx0XHR9O1xuXG5cdFx0dGhpcy5tb3ZlRmlsZVRvQXR0YWNobWVudHNGb2xkZXIoZmlsZXMsIGF0dGFjaG1lbnRzRm9sZGVyUGF0aCwgY3VycmVudE5vdGVGb2xkZXJQYXRoLCBlZGl0b3IsIHZpZXcsIGltcG9ydFNldHRpbmdzKTtcblx0fVxuXG5cdGdldEF0dGFjaG1lbnRGb2xkZXIobm90ZUZpbGVQYXRoOiBQYXJzZWRQYXRoIHwgbnVsbCA9IG51bGwpOiBBdHRhY2htZW50Rm9sZGVyUGF0aCB8IG51bGwge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIG5vdGUgaWYgbm90ZUZpbGVQYXRoIGlzIG5vdCBwcm92aWRlZFxuXHRcdFx0aWYoIW5vdGVGaWxlUGF0aCkge1xuXHRcdFx0XHRub3RlRmlsZVBhdGggPSAoICgpOlBhcnNlZFBhdGggPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdFx0XHRcdGlmKGFjdGl2ZUZpbGU9PW51bGwpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlRoZSBhY3RpdmUgbm90ZSBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZC5cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlKGFjdGl2ZUZpbGUucGF0aCk7XG5cdFx0XHRcdH0pKClcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKCFub3RlRmlsZVBhdGggfHwgbm90ZUZpbGVQYXRoLmV4dCAhPT0gXCIubWRcIikge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyBNYXJrZG93biBmaWxlIHdhcyBmb3VuZC5cIik7XG5cdFx0XHR9XG5cblx0XHRcdGlmKCF0aGlzLnZhdWx0UGF0aCkgcmV0dXJuIG51bGw7XG5cblx0XHRcdGNvbnN0IG5vdGVGb2xkZXJQYXRoID0gcGF0aC5qb2luKHRoaXMudmF1bHRQYXRoLG5vdGVGaWxlUGF0aC5kaXIpO1xuXHRcdFx0Y29uc3Qgbm90ZW5hbWUgPSBub3RlRmlsZVBhdGgubmFtZTtcblx0XHRcdFxuXHRcdFx0bGV0IHJlZmVyZW5jZVBhdGggPSAnJztcblx0XHRcdHN3aXRjaCh0aGlzLnNldHRpbmdzLnJlbGF0aXZlTG9jYXRpb24pIHtcblx0XHRcdGNhc2UgUmVsYXRpdmVMb2NhdGlvbi5WQVVMVDpcblx0XHRcdFx0cmVmZXJlbmNlUGF0aCA9IHRoaXMudmF1bHRQYXRoO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgUmVsYXRpdmVMb2NhdGlvbi5TQU1FOlxuXHRcdFx0XHRyZWZlcmVuY2VQYXRoID0gbm90ZUZvbGRlclBhdGg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSB0aGlzLnNldHRpbmdzLmZvbGRlclBhdGgucmVwbGFjZSgvXFwkXFx7bm90ZW5hbWVcXH0vZywgbm90ZW5hbWUpO1xuXG5cdFx0XHRjb25zdCBhdHRhY2htZW50c0ZvbGRlclBhdGggPSBwYXRoLmpvaW4ocmVmZXJlbmNlUGF0aCxyZWxhdGl2ZVBhdGgpO1xuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRhdHRhY2htZW50c0ZvbGRlclBhdGgsXG5cdFx0XHRcdGN1cnJlbnROb3RlRm9sZGVyUGF0aDogbm90ZUZvbGRlclBhdGgsXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yLm1lc3NhZ2UpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGVycm9yLm1lc3NhZ2UpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSWYgaXQncyBub3QgYW4gRXJyb3IsIGxvZyBpdCBhcyBhIHN0cmluZyBvciB1c2UgYSBkZWZhdWx0IG1lc3NhZ2Vcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWQ6XCIsIGVycm9yKTtcblx0XHRcdFx0bmV3IE5vdGljZShcIkFuIHVua25vd24gZXJyb3Igb2NjdXJyZWRcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBjaG9vc2VGaWxlVG9JbXBvcnQoaW1wb3J0U2V0dGluZ3M6IEltcG9ydFNldHRpbmdzSW50ZXJmYWNlKSB7XG5cdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRjb25zdCBlZGl0b3IgPSBtYXJrZG93blZpZXc/LmVkaXRvcjtcblxuXHRcdGlmKCFlZGl0b3IpXG5cdFx0e1xuXHRcdFx0Y29uc3QgbXNnID0gXCJObyBhY3RpdmUgbWFya2Rvd24gZWRpdG9yIGZvdW5kLlwiO1xuXHRcdFx0Y29uc29sZS5lcnJvcihtc2cpO1xuXHRcdFx0bmV3IE5vdGljZShtc2cpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGF0dGFjaG1lbnRzRm9sZGVyID0gdGhpcy5nZXRBdHRhY2htZW50Rm9sZGVyKCk7XG5cdFx0aWYoIWF0dGFjaG1lbnRzRm9sZGVyKXsgcmV0dXJuIH1cblxuXHRcdGNvbnN0IHsgYXR0YWNobWVudHNGb2xkZXJQYXRoLCBjdXJyZW50Tm90ZUZvbGRlclBhdGg6IHJlZmVyZW5jZVBhdGggfSA9IGF0dGFjaG1lbnRzRm9sZGVyO1xuXG5cdFx0Y29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0aW5wdXQudHlwZSA9IFwiZmlsZVwiO1xuXHRcdGlucHV0Lm11bHRpcGxlID0gdHJ1ZTsgIC8vIEFsbG93IHNlbGVjdGlvbiBvZiBtdWx0aXBsZSBmaWxlc1xuXHRcdFxuXHRcdGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGU6IEV2ZW50KSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0Y29uc3QgZmlsZXMgPSB0YXJnZXQuZmlsZXM7IC8vIFRoaXMgaXMgYWxyZWFkeSBhIEZpbGVMaXN0XG5cblx0XHRcdGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdC8vIERpcmVjdGx5IHBhc3MgdGhlIEZpbGVMaXN0IHRvIHRoZSBwcm9jZXNzaW5nIGZ1bmN0aW9uXG5cdFx0XHRcdGF3YWl0IHRoaXMubW92ZUZpbGVUb0F0dGFjaG1lbnRzRm9sZGVyKGZpbGVzLCBhdHRhY2htZW50c0ZvbGRlclBhdGgsIHJlZmVyZW5jZVBhdGgsIGVkaXRvciwgbWFya2Rvd25WaWV3LCBpbXBvcnRTZXR0aW5ncyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBtc2cgPSBcIk5vIGZpbGVzIHNlbGVjdGVkIG9yIGZpbGUgYWNjZXNzIGVycm9yLlwiO1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKG1zZyk7XG5cdFx0XHRcdG5ldyBOb3RpY2UobXNnKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdGlucHV0LmNsaWNrKCk7IC8vIFRyaWdnZXIgdGhlIGZpbGUgaW5wdXQgZGlhbG9nXG5cdH1cblxuXHRhc3luYyBtb3ZlRmlsZVRvQXR0YWNobWVudHNGb2xkZXIoZmlsZXNUb0ltcG9ydDogRmlsZUxpc3QsIGF0dGFjaG1lbnRzRm9sZGVyUGF0aDogc3RyaW5nLCBjdXJyZW50Tm90ZUZvbGRlclBhdGg6IHN0cmluZywgZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldywgaW1wb3J0U2V0dGluZ3M6IEltcG9ydFNldHRpbmdzSW50ZXJmYWNlKSB7XG5cdFx0Ly8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzIGJlZm9yZSBtb3ZpbmcgdGhlIGZpbGVcblx0XHRhd2FpdCBVdGlscy5lbnN1cmVEaXJlY3RvcnlFeGlzdHMoYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblxuXHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTsgLy8gR2V0IHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiBiZWZvcmUgaW5zZXJ0aW9uXG5cblx0XHRpZiAoZmlsZXNUb0ltcG9ydC5sZW5ndGg+MSAmJiB0aGlzLnNldHRpbmdzLm11bHRpcGxlRmlsZXNJbXBvcnRUeXBlICE9IE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcy5JTkxJTkUpIHtcblx0XHRcdC8vIENoZWNrIGlmIHRoZSBjdXJzb3IgaXMgYXQgdGhlIGJlZ2lubmluZyBvZiBhIGxpbmVcblx0XHRcdGlmIChjdXJzb3IuY2ggIT09IDApIHtcblx0XHRcdFx0Ly8gSWYgbm90LCBpbnNlcnQgYSBuZXdsaW5lIGJlZm9yZSB0aGUgbGlua1xuXHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKCdcXG4nLCBjdXJzb3IpO1xuXHRcdFx0XHQvLyBZb3UgbmVlZCB0byBleHBsaWNpdGx5IHNldCB0aGUgY3Vyc29yIHRvIHRoZSBuZXcgcG9zaXRpb24gYWZ0ZXIgdGhlIG5ld2xpbmVcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGN1cnNvci5saW5lICsgMSwgY2g6IDAgfSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgbXVsdGlwbGVGaWxlcyA9IGZpbGVzVG9JbXBvcnQubGVuZ3RoPjE7XG5cblx0XHRjb25zdCB0YXNrcyA9IEFycmF5LmZyb20oZmlsZXNUb0ltcG9ydCkubWFwKGFzeW5jIChmaWxlVG9JbXBvcnQpOlByb21pc2U8c3RyaW5nfG51bGw+ID0+IHtcblx0XHRcdGNvbnN0IG9yaWdpbmFsRmlsZVBhdGggPSBmaWxlVG9JbXBvcnQucGF0aDtcblx0XHRcdGxldCBkZXN0RmlsZVBhdGggPSBwYXRoLmpvaW4oYXR0YWNobWVudHNGb2xkZXJQYXRoLFxuXHRcdFx0XHRcdFx0XHRhd2FpdCBVdGlscy5jcmVhdGVBdHRhY2htZW50TmFtZSh0aGlzLnNldHRpbmdzLmF0dGFjaG1lbnROYW1lLHRoaXMuc2V0dGluZ3MuZGF0ZUZvcm1hdCxvcmlnaW5hbEZpbGVQYXRoKSk7XG5cblx0XHRcdC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHMgaW4gdGhlIHZhdWx0XG5cdFx0XHRjb25zdCBleGlzdGluZ0ZpbGUgPSBhd2FpdCBVdGlscy5jaGVja0ZpbGVFeGlzdHMoZGVzdEZpbGVQYXRoKTtcblx0XHRcdC8vIElmIHRoZXkgYXJlIHRoZSBzYW1lIGZpbGUsIHRoZW4gc2tpcCBjb3B5aW5nL21vdmluZywgd2UgYXJlIGFscmFkeSBkb25lXG5cdFx0XHRpZihleGlzdGluZ0ZpbGUgJiYgYXdhaXQgVXRpbHMuYXJlUGF0aHNTYW1lRmlsZShvcmlnaW5hbEZpbGVQYXRoLGRlc3RGaWxlUGF0aCkpIHtcblx0XHRcdFx0cmV0dXJuIGRlc3RGaWxlUGF0aDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhlIG9yaWdpbmFsIGZpbGUgaXMgYWxyZWFkeSBpbiB0aGUgdmF1bHRcblx0XHRcdGlmKCF0aGlzLnZhdWx0UGF0aCkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCBpblZhdWx0ID0gYXdhaXQgVXRpbHMuaXNGaWxlSW5WYXVsdCh0aGlzLnZhdWx0UGF0aCxvcmlnaW5hbEZpbGVQYXRoKVxuXHRcdFx0aWYoaW5WYXVsdClcblx0XHRcdHtcblx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSW1wb3J0RnJvbVZhdWx0Q2hvaWNlTW9kYWwodGhpcy5hcHAsIHRoaXMsIHRoaXMudmF1bHRQYXRoLCBpblZhdWx0LCBpbXBvcnRTZXR0aW5ncy5hY3Rpb24pO1xuXHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdGNvbnN0IGNob2ljZSA9IGF3YWl0IG1vZGFsLnByb21pc2U7XG5cdFx0XHRcdGlmKGNob2ljZT09bnVsbCkgeyByZXR1cm4gbnVsbDsgfVxuXHRcdFx0XHRzd2l0Y2goY2hvaWNlKSB7XG5cdFx0XHRcdGNhc2UgSW1wb3J0RnJvbVZhdWx0T3B0aW9ucy5TS0lQOlxuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIEltcG9ydEZyb21WYXVsdE9wdGlvbnMuTElOSzpcblx0XHRcdFx0XHRpbXBvcnRTZXR0aW5ncy5hY3Rpb24gPSBJbXBvcnRBY3Rpb25UeXBlLkxJTks7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgSW1wb3J0RnJvbVZhdWx0T3B0aW9ucy5DT1BZOlxuXHRcdFx0XHRcdGltcG9ydFNldHRpbmdzLmFjdGlvbiA9IEltcG9ydEFjdGlvblR5cGUuQ09QWTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBEZWNpZGUgd2hhdCB0byBkbyBpZiBhIGZpbGUgd2l0aCB0aGUgc2FtZSBuYW1lIGFscmVhZHkgZXhpc3RzIGF0IHRoZSBkZXN0aW5hdGlvblxuXHRcdFx0aWYgKGV4aXN0aW5nRmlsZSAmJiBpbXBvcnRTZXR0aW5ncy5hY3Rpb24gIT0gSW1wb3J0QWN0aW9uVHlwZS5MSU5LKSB7XG5cdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IE92ZXJ3cml0ZUNob2ljZU1vZGFsKHRoaXMuYXBwLCB0aGlzLCBvcmlnaW5hbEZpbGVQYXRoLCBkZXN0RmlsZVBhdGgpO1xuXHRcdFx0XHRtb2RhbC5vcGVuKCk7XG5cdFx0XHRcdGNvbnN0IGNob2ljZSA9IGF3YWl0IG1vZGFsLnByb21pc2U7XG5cdFx0XHRcdGlmKGNob2ljZT09bnVsbCkgeyByZXR1cm4gbnVsbDsgfVxuXHRcdFx0XHRzd2l0Y2goY2hvaWNlKSB7XG5cdFx0XHRcdGNhc2UgT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5PVkVSV1JJVEU6XG5cdFx0XHRcdFx0Ly8gY29udGludWVcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBPdmVyd3JpdGVDaG9pY2VPcHRpb25zLktFRVBCT1RIOlxuXHRcdFx0XHRcdGRlc3RGaWxlUGF0aCA9IGF3YWl0IFV0aWxzLmZpbmROZXdGaWxlbmFtZShkZXN0RmlsZVBhdGgpO1xuXHRcdFx0XHRcdGlmKGRlc3RGaWxlUGF0aD09bnVsbCkgeyByZXR1cm4gbnVsbDsgfVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMuU0tJUDpcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzd2l0Y2ggKGltcG9ydFNldHRpbmdzLmFjdGlvbikge1xuXHRcdFx0XHRcdGNhc2UgSW1wb3J0QWN0aW9uVHlwZS5NT1ZFOlxuXHRcdFx0XHRcdFx0YXdhaXQgZnMucmVuYW1lKG9yaWdpbmFsRmlsZVBhdGgsZGVzdEZpbGVQYXRoKTtcblx0XHRcdFx0XHRcdHJldHVybiBkZXN0RmlsZVBhdGg7XG5cdFx0XHRcdFx0Y2FzZSBJbXBvcnRBY3Rpb25UeXBlLkNPUFk6XG5cdFx0XHRcdFx0XHRhd2FpdCBmcy5jb3B5RmlsZShvcmlnaW5hbEZpbGVQYXRoLGRlc3RGaWxlUGF0aCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVzdEZpbGVQYXRoO1xuXHRcdFx0XHRcdGNhc2UgSW1wb3J0QWN0aW9uVHlwZS5MSU5LOlxuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRyZXR1cm4gb3JpZ2luYWxGaWxlUGF0aDtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Y29uc3QgbXNnID0gXCJGYWlsZWQgdG8gcHJvY2VzcyB0aGUgZmlsZVwiO1xuXHRcdFx0XHRuZXcgTm90aWNlKG1zZyArIFwiLlwiKTtcblx0XHRcdFx0Y29uc29sZS5lcnJvciggbXNnICsgXCI6XCIsIG9yaWdpbmFsRmlsZVBhdGgsIGVycm9yKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7IC8vIEluZGljYXRlIGZhaWx1cmUgaW4gcHJvY2Vzc2luZyB0aGlzIGZpbGVcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFdhaXQgZm9yIGFsbCB0YXNrcyB0byBjb21wbGV0ZVxuXHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcyk7XG5cblx0XHQvLyBOb3cgcHJvY2VzcyB0aGUgcmVzdWx0c1xuXHRcdGNvbnN0IGNvdW50ZXIgPSAwO1xuXHRcdHJlc3VsdHMuZm9yRWFjaCgoaW1wb3J0ZWRGaWxlUGF0aDogKHN0cmluZ3xudWxsKSwgaW5kZXg6IG51bWJlcikgPT4ge1xuXHRcdFx0aWYgKGltcG9ydGVkRmlsZVBhdGgpIHtcblx0XHRcdFx0dGhpcy5pbnNlcnRMaW5rVG9FZGl0b3IoY3VycmVudE5vdGVGb2xkZXJQYXRoLCBpbXBvcnRlZEZpbGVQYXRoLCBlZGl0b3IsIHZpZXcsIGltcG9ydFNldHRpbmdzLCBtdWx0aXBsZUZpbGVzID8gaW5kZXgrMSA6IDApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYoY291bnRlcj4wKSB7XG5cdFx0XHRsZXQgb3BlcmF0aW9uID0gJyc7XG5cdFx0XHRzd2l0Y2goaW1wb3J0U2V0dGluZ3MuYWN0aW9uKVxuXHRcdFx0e1xuXHRcdFx0Y2FzZSBJbXBvcnRBY3Rpb25UeXBlLk1PVkU6XG5cdFx0XHRcdG9wZXJhdGlvbiA9ICdNb3ZlZCc7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBJbXBvcnRBY3Rpb25UeXBlLkNPUFk6XG5cdFx0XHRcdG9wZXJhdGlvbiA9ICdDb3BpZWQnO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdG5ldyBOb3RpY2UoYCR7b3BlcmF0aW9ufSBzdWNjZXNzZnVsbHkgJHtjb3VudGVyfSBmaWxlcyB0byB0aGUgYXR0YWNobWVudHMgZm9sZGVyLmApO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG9wZW5BdHRhY2htZW50c0ZvbGRlcigpIHtcblx0XHRjb25zdCBhdHRhY2htZW50c0ZvbGRlciA9IHRoaXMuZ2V0QXR0YWNobWVudEZvbGRlcigpO1xuXHRcdGlmKCFhdHRhY2htZW50c0ZvbGRlcil7IHJldHVybiB9XG5cblx0XHRjb25zdCB7IGF0dGFjaG1lbnRzRm9sZGVyUGF0aCB9ID0gYXR0YWNobWVudHNGb2xkZXI7XG5cdFx0XG5cdFx0aWYoISBhd2FpdCBVdGlscy5jaGVja0RpcmVjdG9yeUV4aXN0cyhhdHRhY2htZW50c0ZvbGRlclBhdGgpKVxuXHRcdHtcblx0XHRcdGNvbnN0IG1zZz1cIlRoaXMgbm90ZSBkb2VzIG5vdCBoYXZlIGFuIGF0dGFjaG1lbnQgZm9sZGVyLlwiO1xuXHRcdFx0Y29uc29sZS5lcnJvcihtc2crXCI6XCIsIGF0dGFjaG1lbnRzRm9sZGVyUGF0aCk7XG5cdFx0XHRuZXcgTm90aWNlKG1zZytcIi5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gT3BlbiB0aGUgZm9sZGVyIGluIHRoZSBzeXN0ZW0ncyBkZWZhdWx0IGZpbGUgZXhwbG9yZXJcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuXHRcdGNvbnN0IHsgc2hlbGwgfSA9IHJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5cdFx0Ly8gd2luZG93LnJlcXVpcmUoJ2VsZWN0cm9uJykucmVtb3RlLnNoZWxsLnNob3dJdGVtSW5Gb2xkZXIoYXR0YWNobWVudHNGb2xkZXIuYXR0YWNobWVudHNGb2xkZXJQYXRoKTtcblx0XHRzaGVsbC5vcGVuUGF0aChhdHRhY2htZW50c0ZvbGRlci5hdHRhY2htZW50c0ZvbGRlclBhdGgpO1xuXHR9XG5cblx0aW5zZXJ0TGlua1RvRWRpdG9yKGN1cnJlbnROb3RlRm9sZGVyUGF0aDogc3RyaW5nLCBpbXBvcnRlZEZpbGVQYXRoOiBzdHJpbmcsIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcsIGltcG9ydFNldHRpbmdzOiBJbXBvcnRTZXR0aW5nc0ludGVyZmFjZSwgY291bnRlcjogbnVtYmVyKSB7XG5cdFx0Ly8gRXh0cmFjdCBqdXN0IHRoZSBmaWxlIG5hbWUgZnJvbSB0aGUgcGF0aFxuXG5cdFx0Y29uc3QgZmlsZW5hbWU9VXRpbHMuZ2V0RmlsZW5hbWUoaW1wb3J0ZWRGaWxlUGF0aCk7XG5cblx0XHRsZXQgcmVsYXRpdmVQYXRoO1xuXHRcdHN3aXRjaCh0aGlzLnNldHRpbmdzLmxpbmtGb3JtYXQpIHtcblx0XHRjYXNlIExpbmtGb3JtYXQuUkVMQVRJVkU6XG5cdFx0XHRyZWxhdGl2ZVBhdGg9cGF0aC5yZWxhdGl2ZShjdXJyZW50Tm90ZUZvbGRlclBhdGgsIGltcG9ydGVkRmlsZVBhdGgpO1x0XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIExpbmtGb3JtYXQuQUJTT0xVVEU6XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJlbGF0aXZlUGF0aD1wYXRoLnJlbGF0aXZlKHRoaXMudmF1bHRQYXRoLGltcG9ydGVkRmlsZVBhdGgpO1x0XG5cdFx0XHRicmVhaztcblx0XHR9XHRcblx0XHRcblx0XHRsZXQgcHJlZml4ID0gJyc7XG5cdFx0bGV0IHBvc3RmaXggPSAnJztcblx0XHRsZXQgY3VzdG9tRGlzcGxheSA9ICcnO1xuXHRcdGlmKGNvdW50ZXI+MCkge1xuXHRcdFx0c3dpdGNoICh0aGlzLnNldHRpbmdzLm11bHRpcGxlRmlsZXNJbXBvcnRUeXBlKSB7XG5cdFx0XHRcdGNhc2UgTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzLkJVTExFVEVEOlxuXHRcdFx0XHRcdHByZWZpeCA9ICctICc7XG5cdFx0XHRcdFx0cG9zdGZpeCA9ICdcXG4nO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcy5OVU1CRVJFRDpcblx0XHRcdFx0XHRwcmVmaXggPSBgJHtjb3VudGVyfS4gYDtcblx0XHRcdFx0XHRwb3N0Zml4ID0gJ1xcbic7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzLklOTElORTpcblx0XHRcdFx0XHRpZihjb3VudGVyPjEpe1xuXHRcdFx0XHRcdFx0Ly8gaWYgaXQgaXMgbm90IHRoZSBmaXJzdCBpdGVtXG5cdFx0XHRcdFx0XHRwcmVmaXggPSAnXFxuXFxuJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuY3VzdG9tRGlzcGxheVRleHQpIHtcblx0XHRcdGN1c3RvbURpc3BsYXkgPSAnfCcgKyBmaWxlbmFtZTtcblx0XHR9XG5cdFx0aWYoaW1wb3J0U2V0dGluZ3MuZW1iZWQpIHtcblx0XHRcdHByZWZpeCA9IHByZWZpeCArICchJztcblx0XHR9XG5cblx0XHRjb25zdCBsaW5rVGV4dCA9IHByZWZpeCArICdbWycgKyByZWxhdGl2ZVBhdGggKyBjdXN0b21EaXNwbGF5ICsgJ11dJyArIHBvc3RmaXg7XG5cblx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7IC8vIEdldCB0aGUgY3VycmVudCBjdXJzb3IgcG9zaXRpb24gYmVmb3JlIGluc2VydGlvblxuXG5cdFx0Ly8gSW5zZXJ0IHRoZSBsaW5rIHRleHQgYXQgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uXG5cdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShsaW5rVGV4dCwgY3Vyc29yKTtcblxuXHRcdGlmKGNvdW50ZXI9PTApIHtcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuY3VzdG9tRGlzcGxheVRleHQpIHtcblx0XHRcdFx0Ly8gRGVmaW5lIHRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBmb3Igc2VsZWN0aW5nICdiYXNlTmFtZScgd2l0aGluIHRoZSBpbnNlcnRlZCBsaW5rXG5cdFx0XHRcdGNvbnN0IHN0YXJ0Q3Vyc29yUG9zID0ge1xuXHRcdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxuXHRcdFx0XHRcdGNoOiBjdXJzb3IuY2ggKyByZWxhdGl2ZVBhdGgubGVuZ3RoICsgcHJlZml4Lmxlbmd0aCArIDMsXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IGVuZEN1cnNvclBvcyA9IHtcblx0XHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcblx0XHRcdFx0XHRjaDogc3RhcnRDdXJzb3JQb3MuY2ggKyBmaWxlbmFtZS5sZW5ndGgsXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBzZWxlY3Rpb24gcmFuZ2UgdG8gaGlnaGxpZ2h0ICdiYXNlTmFtZSdcblx0XHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbihzdGFydEN1cnNvclBvcywgZW5kQ3Vyc29yUG9zKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IG5ld0N1cnNvclBvcyA9IHtcblx0XHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdFx0Y2g6IGN1cnNvci5jaCArIGxpbmtUZXh0Lmxlbmd0aFxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIE1vdmUgY3Vyc29yIHRvIHRoZSBwb3NpdGlvbiByaWdodCBhZnRlciB0aGUgbGlua1xuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvcyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlXG5cdFx0e1xuXHRcdFx0Y29uc3QgbmV3Q3Vyc29yUG9zID0ge1xuXHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdGNoOiBjdXJzb3IuY2ggKyBsaW5rVGV4dC5sZW5ndGhcblx0XHRcdH07XG5cblx0XHRcdC8vIE1vdmUgY3Vyc29yIHRvIHRoZSBwb3NpdGlvbiByaWdodCBhZnRlciB0aGUgbGlua1xuXHRcdFx0ZWRpdG9yLnNldEN1cnNvcihuZXdDdXJzb3JQb3MpO1xuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBJbXBvcnRBdHRhY2htZW50c1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cykge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZXR0aW5ncyBmb3IgSW1wb3J0IEF0dGFjaG1lbnRzKyBQbHVnaW4nIH0pO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSW1wb3J0IG9wdGlvbnMnIH0pO1xuXHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1doZXRoZXIgdG8gbW92ZSBvciBjb3B5IGZpbGVzIHRoYXQgYXJlIGRyYWctYW5kLWRyb3BwZWQ/Jylcblx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hldGhlciBmaWxlcyB0aGF0IGFyZSBkcmFnZ2VkIGFuZCBkcm9wcGVkIGludG8gdGhlIGVkaXRvciBzaG91bGQgYmUgbW92ZWQgb3IgY29waWVkLiBBbHRlcm5hdGl2ZWx5LCB0aGUgdXNlciBpcyBhc2tlZCBlYWNoIHRpbWUuIEJ5IGhvbGRpbmcgdGhlIFNISUZUIGtleSBwcmVzc2VkLCB5b3Ugd2lsbCBiZSBzaG93biB0aGUgaW1wb3J0IHBhbmVsLCBob3dldmVyIHlvdSBjb25maWd1cmVkIHRoaXMgb3B0aW9uLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgJ0FzayBlYWNoIHRpbWUnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKEltcG9ydEFjdGlvblR5cGUuTU9WRSwgJ01vdmUnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKEltcG9ydEFjdGlvblR5cGUuQ09QWSwgJ0NvcHknKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdGlmICh2YWx1ZSBpbiBJbXBvcnRBY3Rpb25UeXBlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIEltcG9ydEFjdGlvblR5cGU7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPSBJbXBvcnRBY3Rpb25UeXBlLkFTS19VU0VSKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RBY3Rpb25Ecm9wcGVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIEltcG9ydEFjdGlvblR5cGU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBpbXBvcnQgYWN0aW9uIHR5cGU6JywgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdH0pfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdXaGV0aGVyIHRvIG1vdmUgb3IgY29weSBmaWxlcyB0aGF0IGFyZSBjb3B5LWFuZC1wYXN0ZWQ/Jylcblx0XHRcdC5zZXREZXNjKCdDaG9vc2Ugd2hldGhlciBmaWxlcyB0aGF0IGFyZSBjb3B5IGFuZCBwYXN0ZWQgaW50byB0aGUgZWRpdG9yIHNob3VsZCBiZSBtb3ZlZCBvciBjb3BpZWQuIEFsdGVybmF0aXZlbHksIHRoZSB1c2VyIGlzIGFza2VkIGVhY2ggdGltZS4gIEJ5IGhvbGRpbmcgdGhlIFNISUZUIGtleSBwcmVzc2VkLCB5b3Ugd2lsbCBiZSBzaG93biB0aGUgaW1wb3J0IHBhbmVsLCBob3dldmVyIHlvdSBjb25maWd1cmVkIHRoaXMgb3B0aW9uLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUiwgJ0FzayBlYWNoIHRpbWUnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKEltcG9ydEFjdGlvblR5cGUuTU9WRSwgJ01vdmUnKTtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKEltcG9ydEFjdGlvblR5cGUuQ09QWSwgJ0NvcHknKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlIGluIEltcG9ydEFjdGlvblR5cGUpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQgPSB2YWx1ZSBhcyBJbXBvcnRBY3Rpb25UeXBlO1xuXHRcdFx0XHRcdFx0aWYodmFsdWUgIT0gSW1wb3J0QWN0aW9uVHlwZS5BU0tfVVNFUikge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0QWN0aW9uUGFzdGVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIEltcG9ydEFjdGlvblR5cGU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW52YWxpZCBpbXBvcnQgYWN0aW9uIHR5cGU6JywgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdH0pfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbWJlZCBpbXBvcnRlZCBkb2N1bWVudHM6Jylcblx0XHRcdC5zZXREZXNjKCdJZiB0aGlzIG9wdGlvbiBpcyBlbmFibGVkLCB0aGUgZmlsZXMgYXJlIGltcG9ydGVkIGFzIGFuIGVtYmVkZGVkIGRvY3VtZW50OyBpZiBpdCBpcyBkZWFjdGl2YXRlZCwgdGhleSBhcmUgaW1wb3J0ZWQgYXMgYSBsaW5rZWQgZG9jdW1lbnQuICBCeSBob2xkaW5nIHRoZSBTSElGVCBrZXkgcHJlc3NlZCwgeW91IHdpbGwgYmUgc2hvd24gdGhlIGltcG9ydCBwYW5lbCwgaG93ZXZlciB5b3UgY29uZmlndXJlZCB0aGlzIG9wdGlvbi4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKFllc05vVHlwZXMuQVNLX1VTRVIsICdBc2sgZWFjaCB0aW1lJyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihZZXNOb1R5cGVzLllFUywgJ1llcycpO1xuXHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oWWVzTm9UeXBlcy5OTywgJ05vJyk7XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkRmlsZXNPbkltcG9ydClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC52YWx1ZXMoWWVzTm9UeXBlcykuaW5jbHVkZXModmFsdWUgYXMgWWVzTm9UeXBlcykpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVtYmVkRmlsZXNPbkltcG9ydCA9IHZhbHVlIGFzIFllc05vVHlwZXM7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPSBZZXNOb1R5cGVzLkFTS19VU0VSKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RFbWJlZEZpbGVzT25JbXBvcnQgPSB2YWx1ZSBhcyBZZXNOb1R5cGVzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbjonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0ltcG9ydCBtdWx0aXBsZSBmaWxlcyBhczonKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBob3cgdG8gaW1wb3J0IG11bHRpcGxlIGZpbGVzOiBhcyBhIGJ1bGxldGVkIGxpc3QsIGFzIGEgbnVtYmVyZWQgbGlzdCwgb3IgaW5saW5lIHdpdGhvdXQgdXNpbmcgbGlzdHMuJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuQlVMTEVURUQsICdCdWxsZXRlZCBsaXN0Jyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuTlVNQkVSRUQsICdOdW1iZXJlZCBsaXN0Jyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMuSU5MSU5FLCAnSW5saW5lJyk7XG5cdFx0XHRcdGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm11bHRpcGxlRmlsZXNJbXBvcnRUeXBlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LnZhbHVlcyhNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXMpLmluY2x1ZGVzKHZhbHVlIGFzIE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcykpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm11bHRpcGxlRmlsZXNJbXBvcnRUeXBlID0gdmFsdWUgYXMgTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbjonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0luc2VydCBkaXNwbGF5IHRleHQgZm9yIGxpbmtzIGJhc2VkIG9uIGZpbGVuYW1lOicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCwgdGhlIGJhc2VuYW1lIG9mIHRoZSBpbXBvcnRlZCBkb2N1bWVudCBpcyB1c2VkIGFzIGluIHBsYWNlIG9mIHRoZSBjdXN0b20gZGlzcGxheSB0ZXh0LicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbURpc3BsYXlUZXh0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRGlzcGxheVRleHQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0F0dGFjaG1lbnQgZm9sZGVyIGNvbmZpZ3VyYXRpb24nIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBsb2NhdGlvbiBmb3IgbmV3IGF0dGFjaG1lbnRzOicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIHJlZmVyZW5jZSBmb2xkZXIgZm9yIGltcG9ydGluZyBuZXcgYXR0YWNobWVudHMuJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihSZWxhdGl2ZUxvY2F0aW9uLlZBVUxULCAnVmF1bHQgZm9sZGVyJyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihSZWxhdGl2ZUxvY2F0aW9uLlNBTUUsICdTYW1lIGZvbGRlciBhcyBjdXJyZW50IGZpbGUnKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVMb2NhdGlvbilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC52YWx1ZXMoUmVsYXRpdmVMb2NhdGlvbikuaW5jbHVkZXModmFsdWUgYXMgUmVsYXRpdmVMb2NhdGlvbikpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbGF0aXZlTG9jYXRpb24gPSB2YWx1ZSBhcyBSZWxhdGl2ZUxvY2F0aW9uO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbjonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0F0dGFjaG1lbnQgZm9sZGVyIHdoZXJlIHRvIGltcG9ydCBuZXcgYXR0YWNobWVudHMsIHJlbGF0aXZlIHRvIHRoZSBkZWZhdWx0IGxvY2F0aW9uOicpXG5cdFx0XHQuc2V0RGVzYygnV2hlcmUgbmV3bHkgY3JlYXRlZCBub3RlcyBhcmUgcGxhY2VkLiBVc2UgJHtub3RlbmFtZX0gYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIG5hbWUgb2YgdGhlIG5vdGUuJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBmb2xkZXIgcGF0aCcpO1xuXHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlclBhdGgpO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLmNvbmZpZ3VyZUhpZGVGb2xkZXJOYW1lcygpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmhpZGVBdHRhY2htZW50Rm9sZGVycyh0cnVlKTtcblx0XHRcdH0pfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBdHRhY2htZW50IGxpbmsgZm9ybWF0OicpXG5cdFx0XHQuc2V0RGVzYygnV2hhdCB0eXBlcyBvZiBsaW5rcyB0byB1c2UgZm9yIHRoZSBpbXBvcnRlZCBhdHRhY2htZW50cy4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKExpbmtGb3JtYXQuUkVMQVRJVkUsICdXaXRoIHJlc3BlY3QgdG8gdGhlIG5vdGVcXCdzIHBhdGggKHJlbGF0aXZlIHBhdGgpJyk7XG5cdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbihMaW5rRm9ybWF0LkFCU09MVVRFLCAnV2l0aCByZXNwZWN0IHRvIHRoZSB2YXVsdFxcJ3MgcGF0aCAoYWJzb2x1dGUgcGF0aCknKTtcblx0XHRcdFx0ZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlua0Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC52YWx1ZXMoTGlua0Zvcm1hdCkuaW5jbHVkZXModmFsdWUgYXMgTGlua0Zvcm1hdCkpIHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxpbmtGb3JtYXQgPSB2YWx1ZSBhcyBMaW5rRm9ybWF0O1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGlvbjonLCB2YWx1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ05hbWUgb2YgdGhlIGltcG9ydGVkIGF0dGFjaG1lbnRzOicpXG5cdFx0XHQuc2V0RGVzYyhjcmVhdGVGcmFnbWVudCgoZnJhZykgPT4ge1xuXHRcdFx0XHRmcmFnLmFwcGVuZFRleHQoJ0Nob29zZSBob3cgdG8gbmFtZSB0aGUgaW1wb3J0ZWQgYXR0YWNobWVudHMsIHVzaW5nIHRoZSBmb2xsb3dpbmcgdmFyaWFibGVzIGFzIGEgcGxhY2Vob2xkZXI6Jyk7XG5cdFx0XHRcdGZyYWcuY3JlYXRlRWwoJ3VsJylcblx0XHRcdFx0LmNyZWF0ZUVsKCdsaScse3RleHQ6ICcke29yaWdpbmFsfSBmb3IgdGhlIG5hbWUgb2YgdGhlIG9yaWdpbmFsIGZpbGUnfSlcblx0XHRcdFx0LmNyZWF0ZUVsKCdsaScse3RleHQ6ICcke2RhdGV9IGZvciB0aGUgY3VycmVudCBkYXRlJ30pXG5cdFx0XHRcdC5jcmVhdGVFbCgnbGknLHt0ZXh0OiAnJHt1dWlkfSBmb3IgYSAxMjgtYml0IFVuaXZlcnNhbGx5IFVuaXF1ZSBJZGVudGlmaWVyJ30pXG5cdFx0XHRcdC5jcmVhdGVFbCgnbGknLHt0ZXh0OiAnJHttZDV9IGZvciBhIE1ENSBoYXNoIG9mIHRoZSBpbXBvcnRlZCBmaWxlJ30pO1xuXHRcdFx0fSkpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcblx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcignRW50ZXIgYXR0YWNobWVudCBuYW1lJyk7XG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNobWVudE5hbWUpO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0aWYodmFsdWUudHJpbSgpPT0nJykge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSAnJHtvcmlnaW5hbH0nOyAvLyBUT0RPOiBpbXByb3ZlIGNoZWNraW5nIHRoZSBpbnB1dCBieSB0aGUgdXNlciB0aGF0IGl0IGlzIG5vdCBlbXB0eVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2htZW50TmFtZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSl9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RhdGUgZm9ybWF0OicpXG5cdFx0XHQuc2V0RGVzYyhjcmVhdGVGcmFnbWVudCgoZnJhZykgPT4ge1xuXHRcdFx0XHRcdGZyYWcuYXBwZW5kVGV4dCgnQ2hvb3NlIHRoZSBkYXRlIGZvcm1hdCwgYmFzZWQgb24gJyk7XG5cdFx0XHRcdFx0ZnJhZy5jcmVhdGVFbCgnYScsIHtcblx0XHRcdFx0XHRcdGhyZWY6ICdodHRwczovL21vbWVudGpzY29tLnJlYWR0aGVkb2NzLmlvL2VuL2xhdGVzdC9tb21lbnQvMDQtZGlzcGxheWluZy8wMS1mb3JtYXQnLFxuXHRcdFx0XHRcdFx0dGV4dDogJ21vbWVudGpzJyxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRmcmFnLmFwcGVuZFRleHQoJyBzeW50YXguJyl9KSlcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xuXHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBkYXRlIGZvcm1hdCcpO1xuXHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpO1xuXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSl9KTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0F0dGFjaG1lbnQgbWFuYWdlbWVudCcgfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZW5hbWUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIGF1dG9tYXRpY2FsbHkgYW5kIHVwZGF0ZSBhbGwgbGlua3MgY29ycmVzcG9uZGluZ2x5OicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdGhpcyBvcHRpb24gaXMgZW5hYmxlZCwgd2hlbiB5b3UgcmVuYW1lL21vdmUgYW4gbm90ZSwgaWYgdGhlIHJlbmFtZWQgbm90ZSBoYXMgYW4gYXR0YWNobWVudCBmb2xkZXIgY29ubmVjdGVkIHRvIGl0LCBcXFxuXHRcdFx0XHRpdHMgYXR0YWNobWVudCBmb2xkZXIgaXMgcmVuYW1lZC9tb3ZlZCB0byBhIG5ldyBuYW1lL2xvY2F0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5ldyBuYW1lIG9mIHRoZSBub3RlLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9SZW5hbWVBdHRhY2htZW50Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1JlbmFtZUF0dGFjaG1lbnRGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0RlbGV0ZSB0aGUgYXR0YWNobWVudCBmb2xkZXIgYXV0b21hdGljYWxseSB3aGVuIHRoZSBjb3JyZXNwb25kaW5nIG5vdGUgaXMgZGVsZXRlZDonKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgb3B0aW9uIGlzIGVuYWJsZWQsIHdoZW4geW91IGRlbGV0ZSBhIG5vdGUsIGlmIHRoZSBkZWxldGVkIG5vdGUgaGFzIGFuIGF0dGFjaG1lbnQgZm9sZGVyIGNvbm5lY3RlZCB0byBpdCwgXFxcblx0XHRcdFx0aXRzIGF0dGFjaG1lbnQgZm9sZGVyIHdpbGwgYmUgZGVsZXRlZCBhcyB3ZWxsLiBcXFxuXHRcdFx0XHROb3RlOiBhdXRvbWF0aWMgZGVsZXRpb24gb25seSB3b3JrcyB3aGVuIHRoZSBuYW1lIG9mIHRoZSBhdHRhY2htZW50IGZvbGRlciBjb250YWlucyAke25vdGVuYW1lfS4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvRGVsZXRlQXR0YWNobWVudEZvbGRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9EZWxldGVBdHRhY2htZW50Rm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBc2sgY29uZmlybWF0aW9uIGJlZm9yZSBkZWxldGluZyB0aGUgYXR0YWNobWVudCBmb2xkZXI6Jylcblx0XHRcdC5zZXREZXNjKCdJZiBlbmFibGVkLCB0aGUgdXNlciBpcyBhc2tlZCBlYWNoIHRpbWUgd2hldGhlciB0byBkZWxldGUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGVBdHRhY2htZW50Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0ZUF0dGFjaG1lbnRGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0Rpc3BsYXkgb2YgYXR0YWNobWVudCBmb2xkZXJzJyB9KTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdIaWRlIGF0dGFjaG1lbnQgZm9sZGVyczonKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgb3B0aW9uIGlzIGVuYWJsZWQsIHRoZSBhdHRhY2htZW50IGZvbGRlcnMgd2lsbCBub3QgYmUgc2hvd24uJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUF0dGFjaG1lbnRGb2xkZXJzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uaGlkZUF0dGFjaG1lbnRGb2xkZXJzKHRydWUpO1xuXHRcdFx0fSkpO1xuXHR9XG59XG4iLCAiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWluZmVycmFibGUtdHlwZXMgKi9cbi8vIEltcG9ydEF0dGFjaG1lbnRzTW9kYWwudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge1xuXHRcdEltcG9ydEFjdGlvblR5cGUsXG5cdFx0SW1wb3J0QWN0aW9uQ2hvaWNlUmVzdWx0LFxuXHRcdE92ZXJ3cml0ZUNob2ljZVJlc3VsdCxcblx0XHRPdmVyd3JpdGVDaG9pY2VPcHRpb25zLFxuXHRcdEltcG9ydEZyb21WYXVsdE9wdGlvbnMsXG5cdFx0SW1wb3J0RnJvbVZhdWx0Q2hvaWNlUmVzdWx0LFxuXHRcdENoZWNrYm94T3B0aW9ucyxcblx0XHRZZXNOb1R5cGVzLFxuXHRcdC8vIEltcG9ydE9wZXJhdGlvblR5cGUsXG5cdH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tIFwidXRpbHNcIjtcbmltcG9ydCB0eXBlIEltcG9ydEF0dGFjaG1lbnRzIGZyb20gJ21haW4nOyAvLyBJbXBvcnQgdGhlIHR5cGUgb2YgeW91ciBwbHVnaW4gY2xhc3MgaWYgbmVlZGVkIGZvciB0eXBlIGhpbnRpbmdcblxuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiOyAvLyBOb2RlLmpzIHBhdGggbW9kdWxlIHRvIGhhbmRsZSBwYXRoIG9wZXJhdGlvbnNcblxuZXhwb3J0IGNsYXNzIEltcG9ydEFjdGlvblR5cGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cHJvbWlzZTogUHJvbWlzZTxJbXBvcnRBY3Rpb25DaG9pY2VSZXN1bHQ+O1xuXHRwcml2YXRlIHJlc29sdmVDaG9pY2U6IChyZXN1bHQ6IEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdCkgPT4gdm9pZCA9ICgpID0+IHt9OyAgLy8gVG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4gSW5pdGlhbGl6ZSB3aXRoIGEgbm8tb3AgZnVuY3Rpb25cblx0cHJpdmF0ZSBzZWxlY3RlZEFjdGlvbjogSW1wb3J0QWN0aW9uVHlwZTtcblx0cHJpdmF0ZSBzZWxlY3RlZEVtYmVkT3B0aW9uOiBZZXNOb1R5cGVzO1xuXHRwcml2YXRlIHJlbWVtYmVyQ2hvaWNlOiBib29sZWFuID0gZmFsc2U7ICAvLyBQcml2YXRlIHZhcmlhYmxlIHRvIHN0b3JlIHRoZSBjaGVja2JveCBzdGF0ZVxuXHRcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgcGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cywgcHJpdmF0ZSBsYXN0QWN0aW9uRmlsZXNPbkltcG9ydDogSW1wb3J0QWN0aW9uVHlwZSwgcHJpdmF0ZSBsYXN0RW1iZWRPbkltcG9ydDogWWVzTm9UeXBlcykge1xuXHRcdC8vIHVzZSBUeXBlU2NyaXB0IGBwYXJhbWV0ZXIgcHJvcGVydGllc2AgdG8gaW5pdGlhbGl6ZSBgcGx1Z2luYC5cblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlPEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdD4oKHJlc29sdmUpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZSA9IHJlc29sdmU7XG5cdFx0fSk7XG5cdFx0dGhpcy5zZWxlY3RlZEFjdGlvbiA9IGxhc3RBY3Rpb25GaWxlc09uSW1wb3J0O1xuXHRcdHRoaXMuc2VsZWN0ZWRFbWJlZE9wdGlvbiA9IGxhc3RFbWJlZE9uSW1wb3J0O1xuXHR9XG5cblx0Y3JlYXRlVG9nZ2xlKHRhYmxlOiBIVE1MVGFibGVFbGVtZW50LCBxdWVzdGlvblRleHQ6IHN0cmluZywgb3B0aW9uQTogc3RyaW5nLCBvcHRpb25COiBzdHJpbmcsIGluaXRpYWxPcHRpb246IENoZWNrYm94T3B0aW9ucywgY2FsbGJhY2s6IChzZWxlY3RlZE9wdGlvbjpDaGVja2JveE9wdGlvbnMpID0+IHZvaWQsIHdpdGhTZXBhcmF0b3I6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdC8vIE1haW4gY29udGFpbmVyIHRoYXQgaG9sZHMgYm90aCB0aGUgcXVlc3Rpb24gYW5kIHRoZSB0b2dnbGUgZ3JvdXBcblx0XHRjb25zdCB0ciA9IHRhYmxlLmNyZWF0ZUVsKCd0cicpO1xuXHRcdGlmKHdpdGhTZXBhcmF0b3IpIHtcblx0XHRcdHRyLmFkZENsYXNzKCdzZXAnKTtcblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHF1ZXN0aW9uIGFsaWduZWQgdG8gdGhlIGxlZnRcblx0XHR0ci5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHF1ZXN0aW9uVGV4dCwgY2xzOiAnYWN0aW9uLXF1ZXN0aW9uJyB9KTtcblxuXHRcdC8vIExhYmVsIGZvciBvcHRpb24gQSAoZS5nLiwgXCJNb3ZlXCIpXG5cdFx0dHIuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBvcHRpb25BLCBjbHM6ICd0b2dnbGUtb3B0aW9uLUEnIH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0b2dnbGUgc3dpdGNoXG5cdFx0Y29uc3QgdGQgPSB0ci5jcmVhdGVFbCgndGQnKTtcblx0XHRjb25zdCBzd2l0Y2hMYWJlbCA9IHRkLmNyZWF0ZUVsKCdsYWJlbCcsIHsgY2xzOiAnc3dpdGNoJyB9KTtcblx0XHRjb25zdCBpbnB1dCA9IHN3aXRjaExhYmVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcblx0XHRpZihpbml0aWFsT3B0aW9uPT1DaGVja2JveE9wdGlvbnMuQSkge1xuXHRcdFx0aW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpbnB1dC5jaGVja2VkID0gdHJ1ZTtcblx0XHR9XG5cdFx0XG5cdFx0c3dpdGNoTGFiZWwuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3NsaWRlcicgfSk7XG5cblx0XHQvLyBMYWJlbCBmb3Igb3B0aW9uIEIgKGUuZy4sIFwiQ29weVwiKVxuXHRcdHRyLmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogb3B0aW9uQiwgY2xzOiAndG9nZ2xlLW9wdGlvbi1CJyB9KTtcblxuXHRcdC8vIEV2ZW50IGxpc3RlbmVyIGZvciB0b2dnbGVcblx0XHRpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0Y2FsbGJhY2soaW5wdXQuY2hlY2tlZCA/IENoZWNrYm94T3B0aW9ucy5CIDogQ2hlY2tib3hPcHRpb25zLkEpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGxldCBpbml0aWFsT3B0aW9uO1xuXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnaW1wb3J0LWF0dGFjaC1wbHVnaW4nIH0pO1xuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ltcG9ydCBGaWxlcycgfSk7XG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ29uZmlndXJlIHRoZSBpbXBvcnQgb3B0aW9ucyBhbmQgdGhlbiBwcmVzcyBlaXRoZXIgZW50ZXIgb3IgdGhlIGltcG9ydCBidXR0b24uJyB9KTtcblxuXHRcdGNvbnN0IHRhYmxlID0gY29udGFpbmVyLmNyZWF0ZUVsKCd0YWJsZScpO1xuXHRcdFxuXHRcdHN3aXRjaCh0aGlzLmxhc3RBY3Rpb25GaWxlc09uSW1wb3J0KXtcblx0XHRjYXNlIEltcG9ydEFjdGlvblR5cGUuTU9WRTpcblx0XHRcdGluaXRpYWxPcHRpb24gPSBDaGVja2JveE9wdGlvbnMuQTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgSW1wb3J0QWN0aW9uVHlwZS5DT1BZOlxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRpbml0aWFsT3B0aW9uID0gQ2hlY2tib3hPcHRpb25zLkI7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHQvLyBDcmVhdGluZyBhY3Rpb24gdG9nZ2xlXG5cdFx0dGhpcy5jcmVhdGVUb2dnbGUodGFibGUsICdEbyB5b3Ugd2FudCB0byBtb3ZlIG9yIGNvcHkgdGhlIGZpbGVzIHRvIHRoZSB2YXVsdD8nLCAnTW92ZScsICdDb3B5JywgaW5pdGlhbE9wdGlvbiwgKHNlbGVjdGVkT3B0aW9uOkNoZWNrYm94T3B0aW9ucykgPT4ge1xuXHRcdFx0aWYoc2VsZWN0ZWRPcHRpb249PUNoZWNrYm94T3B0aW9ucy5BKXtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEFjdGlvbiA9IEltcG9ydEFjdGlvblR5cGUuTU9WRTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuc2VsZWN0ZWRBY3Rpb24gPSBJbXBvcnRBY3Rpb25UeXBlLkNPUFk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSk7XG5cblx0XHRzd2l0Y2godGhpcy5sYXN0RW1iZWRPbkltcG9ydCl7XG5cdFx0Y2FzZSBZZXNOb1R5cGVzLllFUzpcblx0XHRcdGluaXRpYWxPcHRpb24gPSBDaGVja2JveE9wdGlvbnMuQTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgWWVzTm9UeXBlcy5OTzpcblx0XHRkZWZhdWx0OlxuXHRcdFx0aW5pdGlhbE9wdGlvbiA9IENoZWNrYm94T3B0aW9ucy5CO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRpbmcgYWN0aW9uIHRvZ2dsZVxuXHRcdHRoaXMuY3JlYXRlVG9nZ2xlKHRhYmxlLCAnRG8geW91IHdhbnQgdG8gZW1iZWQgb3IgbGluayB0aGUgZmlsZXMgdG8gdGhlIHZhdWx0PycsICdFbWJlZCcsICdMaW5rJywgaW5pdGlhbE9wdGlvbiwgKHNlbGVjdGVkT3B0aW9uOkNoZWNrYm94T3B0aW9ucykgPT4ge1xuXHRcdFx0aWYoc2VsZWN0ZWRPcHRpb249PUNoZWNrYm94T3B0aW9ucy5BKXtcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEVtYmVkT3B0aW9uID0gWWVzTm9UeXBlcy5ZRVM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNlbGVjdGVkRW1iZWRPcHRpb24gPSBZZXNOb1R5cGVzLk5PO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdFx0Ly8gQ3JlYXRpbmcgcmVtZW1iZXIgdG9nZ2xlXG5cdFx0dGhpcy5jcmVhdGVUb2dnbGUodGFibGUsICdTYXZlIHRoaXMgYW5zd2VyIGluIHRoZSBzZXR0aW5ncyBmb3IgdGhlIGZ1dHVyZT8nLCAnWWVzJywgJ05vJywgQ2hlY2tib3hPcHRpb25zLkIsIChzZWxlY3RlZE9wdGlvbjpDaGVja2JveE9wdGlvbnMpID0+IHtcblx0XHRcdGlmKHNlbGVjdGVkT3B0aW9uPT1DaGVja2JveE9wdGlvbnMuQSl7XG5cdFx0XHRcdHRoaXMucmVtZW1iZXJDaG9pY2UgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yZW1lbWJlckNob2ljZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSAnTW92ZScgYnV0dG9uIGluc2lkZSB0aGUgY29udGFpbmVyXG5cdFx0Y29uc3QgaW1wb3J0QnV0dG9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7Y2xzOidpbXBvcnQtYnV0dG9ucyd9KTtcblxuXHRcdC8qXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gaW1wb3J0QnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ2FuY2VsJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdH0pO1xuXHRcdCovXG5cblx0XHRjb25zdCBpbXBvcnRCdXR0b24gPSBpbXBvcnRCdXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdJbXBvcnQnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YSdcblx0XHR9KTtcblx0XHRpbXBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmltcG9ydCgpO1xuXHRcdH0pO1xuXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHQvLyBTZXQgZm9jdXMgd2l0aCBhIHNsaWdodCBkZWxheTpcblx0XHRcdC8vIHRoaXMgbWV0aG9kIGxldmVyYWdlcyBKYXZhU2NyaXB0J3MgZXZlbnQgbG9vcCwgZW5zdXJpbmcgdGhhdCBmb2N1c2luZyB0aGUgYnV0dG9uXG5cdFx0XHQvLyBpcyBlbnF1ZXVlZCBhZnRlciBhbGwgdGhlIGVsZW1lbnRzIGFyZSBwcm9wZXJseSByZW5kZXJlZCBhbmQgdGhlIERPTSBpcyBmdWxseSB1cGRhdGVkLlxuXHRcdFx0aW1wb3J0QnV0dG9uLmZvY3VzKCk7XG5cdFx0fSwgMCk7IC8vIEEgdGltZW91dCBvZiAwIG1zIGlzIG9mdGVuIGVub3VnaFxuXG5cdFx0Lypcblx0XHRjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0aW1wb3J0QnV0dG9uLmNsaWNrKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ki9cblx0fVxuXG5cdGFzeW5jIGltcG9ydCgpIHtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2Uoe1xuXHRcdFx0YWN0aW9uOiB0aGlzLnNlbGVjdGVkQWN0aW9uLFxuXHRcdFx0ZW1iZWQ6IHRoaXMuc2VsZWN0ZWRFbWJlZE9wdGlvbixcblx0XHRcdHJlbWVtYmVyQ2hvaWNlOiB0aGlzLnJlbWVtYmVyQ2hvaWNlXG5cdFx0fSk7XG5cdFx0dGhpcy5jbG9zZSgpOyBcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2UobnVsbCk7ICAvLyBSZXNvbHZlIHdpdGggbnVsbCBpZiB0aGUgbW9kYWwgaXMgY2xvc2VkIHdpdGhvdXQgYSBjaG9pY2Vcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgT3ZlcndyaXRlQ2hvaWNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8T3ZlcndyaXRlQ2hvaWNlUmVzdWx0Pjtcblx0cHJpdmF0ZSByZXNvbHZlQ2hvaWNlOiAocmVzdWx0OiBPdmVyd3JpdGVDaG9pY2VSZXN1bHQpID0+IHZvaWQgPSAoKSA9PiB7fTsgIC8vIFRvIHJlc29sdmUgdGhlIHByb21pc2UuIEluaXRpYWxpemUgd2l0aCBhIG5vLW9wIGZ1bmN0aW9uXG5cdHByaXZhdGUgZmlsZW5hbWU6IHN0cmluZztcblx0XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1wb3J0QXR0YWNobWVudHMsIHByaXZhdGUgb3JpZ2luYWxGaWxlUGF0aDogc3RyaW5nLCBwcml2YXRlIGRlc3RGaWxlUGF0aDogc3RyaW5nKSB7XG5cdFx0Ly8gdXNlIFR5cGVTY3JpcHQgYHBhcmFtZXRlciBwcm9wZXJ0aWVzYCB0byBpbml0aWFsaXplIGBwbHVnaW5gLlxuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5wcm9taXNlID0gbmV3IFByb21pc2U8T3ZlcndyaXRlQ2hvaWNlUmVzdWx0PigocmVzb2x2ZSkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHZlQ2hvaWNlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0XHR0aGlzLmZpbGVuYW1lID0gVXRpbHMuZ2V0RmlsZW5hbWUoZGVzdEZpbGVQYXRoKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdpbXBvcnQtYXR0YWNoLXBsdWdpbicgfSk7XG5cblx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSW1wb3J0IEZpbGVzJyB9KTtcblx0XHRjb25zdCBwYXJhZ3JhcGggPSBjb250YWluZXIuY3JlYXRlRWwoJ3AnKTtcblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdZb3UgYXJlIHRyeWluZyB0byBjb3B5IHRoZSBmaWxlIFwiJyk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIGEgaHlwZXJsaW5rIGZvciB0aGUgZmlsZW5hbWVcblx0XHRjb25zdCBvcmlnRmlsZUxpbmsgPSBwYXJhZ3JhcGguY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiB0aGlzLm9yaWdpbmFsRmlsZVBhdGgsXG5cdFx0XHRocmVmOiAnIycsXG5cdFx0fSk7XG5cdFx0b3JpZ0ZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHR3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLm9yaWdpbmFsRmlsZVBhdGgpO1xuXHRcdH0pO1xuXG5cdFx0cGFyYWdyYXBoLmFwcGVuZCgnXCIgaW50byB0aGUgdmF1bHQsIHdoZXJlIGEgXCInKTtcblxuXHRcdC8vIENyZWF0ZSBhIGh5cGVybGluayBmb3IgdGhlIGZpbGVuYW1lXG5cdFx0Y29uc3QgdmF1bHRGaWxlTGluayA9IHBhcmFncmFwaC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdmaWxlJyxcblx0XHRcdGhyZWY6ICcjJyxcblx0XHR9KTtcblx0XHR2YXVsdEZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHR3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLmRlc3RGaWxlUGF0aCk7XG5cdFx0fSk7XG5cblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdcIiB3aXRoIHRoZSBzYW1lIG5hbWUgaXMgYWxyZWFkeSBwcmVzZW50LicpO1xuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJyx7dGV4dDogJ0hvdyBkbyB5b3Ugd2FudCB0byBwcm9jZWVkPyd9KTtcblxuXHRcdC8vIENyZWF0ZSB0aGUgJ01vdmUnIGJ1dHRvbiBpbnNpZGUgdGhlIGNvbnRhaW5lclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe2NsczonaW1wb3J0LWJ1dHRvbnMnfSk7XG5cdFx0Y29uc3Qga2VlcEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0tlZXAgYm90aCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdH0pO1xuXHRcdGtlZXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5LRUVQQk9USCk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1xuXHRcdGNvbnN0IG92ZXJ3cml0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ092ZXJ3cml0ZScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRvdmVyd3JpdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5PVkVSV1JJVEUpO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRjb25zdCBza2lwQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnU2tpcCcsXG5cdFx0XHRjbHM6ICdtb2QtY2FuY2VsJ1xuXHRcdH0pO1xuXHRcdHNraXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucy5TS0lQKTtcblx0XHRcdHRoaXMuY2xvc2UoKTsgXG5cdFx0fSk7XG5cdFx0XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHQvLyBTZXQgZm9jdXMgd2l0aCBhIHNsaWdodCBkZWxheTpcblx0XHRcdC8vIHRoaXMgbWV0aG9kIGxldmVyYWdlcyBKYXZhU2NyaXB0J3MgZXZlbnQgbG9vcCwgZW5zdXJpbmcgdGhhdCBmb2N1c2luZyB0aGUgYnV0dG9uXG5cdFx0XHQvLyBpcyBlbnF1ZXVlZCBhZnRlciBhbGwgdGhlIGVsZW1lbnRzIGFyZSBwcm9wZXJseSByZW5kZXJlZCBhbmQgdGhlIERPTSBpcyBmdWxseSB1cGRhdGVkLlxuXHRcdFx0a2VlcEJ1dHRvbi5mb2N1cygpO1xuXHRcdH0sIDApOyAvLyBBIHRpbWVvdXQgb2YgMCBtcyBpcyBvZnRlbiBlbm91Z2hcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnJlc29sdmVDaG9pY2UobnVsbCk7ICAvLyBSZXNvbHZlIHdpdGggbnVsbCBpZiB0aGUgbW9kYWwgaXMgY2xvc2VkIHdpdGhvdXQgYSBjaG9pY2Vcblx0fVxufVxuXG5cbmV4cG9ydCBjbGFzcyBEZWxldGVBdHRhY2htZW50Rm9sZGVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8Ym9vbGVhbj47XG5cdHByaXZhdGUgcmVzb2x2ZUNob2ljZTogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZCA9ICgpID0+IHt9OyAgLy8gVG8gcmVzb2x2ZSB0aGUgcHJvbWlzZS4gSW5pdGlhbGl6ZSB3aXRoIGEgbm8tb3AgZnVuY3Rpb25cblx0XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1wb3J0QXR0YWNobWVudHMsIHByaXZhdGUgYXR0YWNobWVudEZvbGRlclBhdGg6IHN0cmluZykge1xuXHRcdC8vIHVzZSBUeXBlU2NyaXB0IGBwYXJhbWV0ZXIgcHJvcGVydGllc2AgdG8gaW5pdGlhbGl6ZSBgcGx1Z2luYC5cblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXG5cdFx0Y29uc3QgYXR0YWNobWVudEZvbGRlclBhdGhfcGFyc2VkID0gcGF0aC5wYXJzZSh0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltcG9ydC1hdHRhY2gtcGx1Z2luJyB9KTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdJbXBvcnQgRmlsZXMnIH0pO1xuXHRcdGNvbnN0IHBhcmFncmFwaCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ0RvIHlvdSB3YW50IHRvIG1vdmUgdGhlIGF0dGFjaG1lbnQgZm9sZGVyIFwiJyk7XG5cdFx0XG5cdFx0Ly8gQ3JlYXRlIGEgaHlwZXJsaW5rIGZvciB0aGUgZmlsZW5hbWVcblx0XHRjb25zdCBmaWxlTGluayA9IHBhcmFncmFwaC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6IGF0dGFjaG1lbnRGb2xkZXJQYXRoX3BhcnNlZC5uYW1lLFxuXHRcdFx0aHJlZjogJyMnLFxuXHRcdH0pO1xuXHRcdGZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhbmNob3IgYmVoYXZpb3Jcblx0XHRcdC8vIE9wZW4gdGhlIGZvbGRlciBpbiB0aGUgc3lzdGVtJ3MgZGVmYXVsdCBmaWxlIGV4cGxvcmVyXG5cdFx0XHQvLyB3aW5kb3cucmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwuc2hvd0l0ZW1JbkZvbGRlcih0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblx0XHRcdHdpbmRvdy5yZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5zaGVsbC5vcGVuUGF0aCh0aGlzLmF0dGFjaG1lbnRGb2xkZXJQYXRoKTtcblx0XHR9KTtcblxuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ1wiIHRvIHRoZSBzeXN0ZW0gdHJhc2g/Jyk7XG5cblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6J2ltcG9ydC1idXR0b25zJ30pO1xuXHRcdGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0RlbGV0ZScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UodHJ1ZSk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1x0ICAgIFxuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ1NraXAnLFxuXHRcdFx0Y2xzOiAnbW9kLWNhbmNlbCdcblx0XHR9KTtcblx0XHRjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UoZmFsc2UpO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIFNldCBmb2N1cyB3aXRoIGEgc2xpZ2h0IGRlbGF5OlxuXHRcdFx0Ly8gdGhpcyBtZXRob2QgbGV2ZXJhZ2VzIEphdmFTY3JpcHQncyBldmVudCBsb29wLCBlbnN1cmluZyB0aGF0IGZvY3VzaW5nIHRoZSBidXR0b25cblx0XHRcdC8vIGlzIGVucXVldWVkIGFmdGVyIGFsbCB0aGUgZWxlbWVudHMgYXJlIHByb3Blcmx5IHJlbmRlcmVkIGFuZCB0aGUgRE9NIGlzIGZ1bGx5IHVwZGF0ZWQuXG5cdFx0XHRjYW5jZWxCdXR0b24uZm9jdXMoKTtcblx0XHR9LCAwKTsgLy8gQSB0aW1lb3V0IG9mIDAgbXMgaXMgb2Z0ZW4gZW5vdWdoXG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKGZhbHNlKTsgIC8vIFJlc29sdmUgd2l0aCBudWxsIGlmIHRoZSBtb2RhbCBpcyBjbG9zZWQgd2l0aG91dCBhIGNob2ljZVxuXHR9XG59XG5cblxuXG5leHBvcnQgY2xhc3MgSW1wb3J0RnJvbVZhdWx0Q2hvaWNlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHByb21pc2U6IFByb21pc2U8SW1wb3J0RnJvbVZhdWx0Q2hvaWNlUmVzdWx0Pjtcblx0cHJpdmF0ZSByZXNvbHZlQ2hvaWNlOiAocmVzdWx0OiBJbXBvcnRGcm9tVmF1bHRDaG9pY2VSZXN1bHQpID0+IHZvaWQgPSAoKSA9PiB7fTsgIC8vIFRvIHJlc29sdmUgdGhlIHByb21pc2UuIEluaXRpYWxpemUgd2l0aCBhIG5vLW9wIGZ1bmN0aW9uXG5cdFxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBwbHVnaW46IEltcG9ydEF0dGFjaG1lbnRzLCBwcml2YXRlIHZhdWx0UGF0aDogc3RyaW5nLCBwcml2YXRlIG9yaWdpbmFsRmlsZVBhdGg6IHN0cmluZywgcHJpdmF0ZSBpbXBvcnRBY3Rpb246IEltcG9ydEFjdGlvblR5cGUpIHtcblx0XHQvLyB1c2UgVHlwZVNjcmlwdCBgcGFyYW1ldGVyIHByb3BlcnRpZXNgIHRvIGluaXRpYWxpemUgYHBsdWdpbmAuXG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZTxJbXBvcnRGcm9tVmF1bHRDaG9pY2VSZXN1bHQ+KChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLnJlc29sdmVDaG9pY2UgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0Y29uc3QgY29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2ltcG9ydC1hdHRhY2gtcGx1Z2luJyB9KTtcblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdJbXBvcnQgRmlsZXMnIH0pO1xuXHRcdGNvbnN0IHBhcmFncmFwaCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcpO1xuXHRcdHBhcmFncmFwaC5hcHBlbmQoJ1RoZSBmaWxlIHlvdSBhcmUgdHJ5aW5nIHRvIGltcG9ydCBcIicpO1xuXHRcdFxuXHRcdC8vIENyZWF0ZSBhIGh5cGVybGluayBmb3IgdGhlIGZpbGVuYW1lXG5cdFx0Y29uc3QgZmlsZUxpbmsgPSBwYXJhZ3JhcGguY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiBwYXRoLnJlbGF0aXZlKHRoaXMudmF1bHRQYXRoLHRoaXMub3JpZ2luYWxGaWxlUGF0aCksXG5cdFx0XHRocmVmOiAnIycsXG5cdFx0fSk7XG5cdFx0ZmlsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGFuY2hvciBiZWhhdmlvclxuXHRcdFx0Ly8gT3BlbiB0aGUgZm9sZGVyIGluIHRoZSBzeXN0ZW0ncyBkZWZhdWx0IGZpbGUgZXhwbG9yZXJcblx0XHRcdHdpbmRvdy5yZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5zaGVsbC5zaG93SXRlbUluRm9sZGVyKHRoaXMub3JpZ2luYWxGaWxlUGF0aCk7XG5cdFx0fSk7XG5cblx0XHRwYXJhZ3JhcGguYXBwZW5kKCdcIiBpcyBhbHJlYWR5IHN0b3JlZCBpbiB0aGUgdmF1bHQuJyk7XG5cblx0XHRpZih0aGlzLmltcG9ydEFjdGlvbj09SW1wb3J0QWN0aW9uVHlwZS5NT1ZFKSB7XG5cdFx0XHRjb250YWluZXIuY3JlYXRlRWwoJ3AnLHt0ZXh0OiAnWW91IGludGVuZGVkIHRvIG1vdmUgdGhlIGZpbGUuIFxcXG5cdFx0XHRcdFx0SG93ZXZlciwgbW92aW5nIGEgZmlsZSB0aGF0IGlzIGFscmVhZHkgaW4gdGhlIHZhdWx0IHRvIGEgbmV3IFxcXG5cdFx0XHRcdFx0ZGVzdGluYXRpb24gaW4gdGhlIHNhbWUgdmF1bHQgaXMgbm90IHN1cHBvcnRlZDsgXFxcblx0XHRcdFx0XHRvbmx5IGNvcHlpbmcgYW5kIGxpbmtpbmcgb3BlcmF0aW9ucyBhcmUgYWxsb3dlZC4nfSk7XG5cdFx0fVxuXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdwJyx7dGV4dDogJ0RvIHlvdSB3YW50IHRvIG1ha2UgYSBjb3B5IG9yIHJlZmVyIHRvIHRoZSBvcmlnaW5hbCBmaWxlIGluIHRoZSB2YXVsdCB0aHJvdWdoIGEgcmVsYXRpdmUgcGF0aD8nfSk7XG5cblx0XHQvLyBDcmVhdGUgdGhlICdNb3ZlJyBidXR0b24gaW5zaWRlIHRoZSBjb250YWluZXJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6J2ltcG9ydC1idXR0b25zJ30pO1xuXHRcdGNvbnN0IGxpbmtCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdSZWxhdGl2ZSBwYXRoJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0bGlua0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZShJbXBvcnRGcm9tVmF1bHRPcHRpb25zLkxJTkspO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRjb25zdCBjb3B5QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ29weScsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZydcblx0XHR9KTtcblx0XHRjb3B5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKEltcG9ydEZyb21WYXVsdE9wdGlvbnMuQ09QWSk7XG5cdFx0XHR0aGlzLmNsb3NlKCk7IFxuXHRcdH0pO1x0ICAgIFxuXHRcdGNvbnN0IHNraXBCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdTa2lwJyxcblx0XHRcdGNsczogJ21vZC1jYW5jZWwnXG5cdFx0fSk7XG5cdFx0c2tpcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMucmVzb2x2ZUNob2ljZShJbXBvcnRGcm9tVmF1bHRPcHRpb25zLlNLSVApO1xuXHRcdFx0dGhpcy5jbG9zZSgpOyBcblx0XHR9KTtcblx0XHRcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdC8vIFNldCBmb2N1cyB3aXRoIGEgc2xpZ2h0IGRlbGF5OlxuXHRcdFx0Ly8gdGhpcyBtZXRob2QgbGV2ZXJhZ2VzIEphdmFTY3JpcHQncyBldmVudCBsb29wLCBlbnN1cmluZyB0aGF0IGZvY3VzaW5nIHRoZSBidXR0b25cblx0XHRcdC8vIGlzIGVucXVldWVkIGFmdGVyIGFsbCB0aGUgZWxlbWVudHMgYXJlIHByb3Blcmx5IHJlbmRlcmVkIGFuZCB0aGUgRE9NIGlzIGZ1bGx5IHVwZGF0ZWQuXG5cdFx0XHRsaW5rQnV0dG9uLmZvY3VzKCk7XG5cdFx0fSwgMCk7IC8vIEEgdGltZW91dCBvZiAwIG1zIGlzIG9mdGVuIGVub3VnaFxuXG5cdFx0Lypcblx0XHRjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdFx0a2VlcEJ1dHRvbi5jbGljaygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdCovXG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5yZXNvbHZlQ2hvaWNlKG51bGwpOyAgLy8gUmVzb2x2ZSB3aXRoIG51bGwgaWYgdGhlIG1vZGFsIGlzIGNsb3NlZCB3aXRob3V0IGEgY2hvaWNlXG5cdH1cbn1cbiIsICIvLyB0eXBlcy50c1xuXG5leHBvcnQgZW51bSBJbXBvcnRBY3Rpb25UeXBlIHtcblx0TU9WRT0nTU9WRScsXG5cdENPUFk9J0NPUFknLFxuXHRMSU5LPSdMSU5LJyxcblx0QVNLX1VTRVI9J0FTS19VU0VSJ1xufVxuXG5leHBvcnQgZW51bSBZZXNOb1R5cGVzIHtcblx0WUVTPSdZRVMnLFxuXHROTz0nTk8nLFxuXHRBU0tfVVNFUj0nQVNLX1VTRVInXG59XG5cbmV4cG9ydCBlbnVtIE11bHRpcGxlRmlsZXNJbXBvcnRUeXBlcyB7XG5cdEJVTExFVEVEPSdCVUxMRVRFRCcsXG5cdE5VTUJFUkVEPSdOVU1CRVJFRCcsXG5cdElOTElORT0nSU5MSU5FJ1xufVxuXG5leHBvcnQgZW51bSBJbXBvcnRPcGVyYXRpb25UeXBlIHtcblx0UEFTVEUsXG5cdERSQUdfQU5EX0RST1Bcbn1cblxuZXhwb3J0IGVudW0gUmVsYXRpdmVMb2NhdGlvbiB7XG5cdFNBTUU9J1NBTUUnLCAvLyBTYW1lIGZvbGRlciBhcyBjdXJyZW50IGZpbGVcblx0VkFVTFQ9J1ZBVUxUJywgLy8gVmF1bHQgZm9sZGVyXG59XG5cbmV4cG9ydCBlbnVtIExpbmtGb3JtYXQge1xuXHRSRUxBVElWRT0nUkVMQVRJVkUnLCAvLyBTYW1lIGZvbGRlciBhcyBjdXJyZW50IGZpbGVcblx0QUJTT0xVVEU9J0FCU09MVVRFJywgLy8gVmF1bHQgZm9sZGVyXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0QXR0YWNobWVudHNTZXR0aW5ncyB7XG5cdGFjdGlvbkRyb3BwZWRGaWxlc09uSW1wb3J0OiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRsYXN0QWN0aW9uRHJvcHBlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGU7XG5cdGFjdGlvblBhc3RlZEZpbGVzT25JbXBvcnQ6IEltcG9ydEFjdGlvblR5cGU7XG5cdGxhc3RBY3Rpb25QYXN0ZWRGaWxlc09uSW1wb3J0OiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRlbWJlZEZpbGVzT25JbXBvcnQ6IFllc05vVHlwZXM7XG5cdGxhc3RFbWJlZEZpbGVzT25JbXBvcnQ6IFllc05vVHlwZXM7XG5cdG11bHRpcGxlRmlsZXNJbXBvcnRUeXBlOiBNdWx0aXBsZUZpbGVzSW1wb3J0VHlwZXM7XG5cdGN1c3RvbURpc3BsYXlUZXh0OiBib29sZWFuO1xuXHRyZWxhdGl2ZUxvY2F0aW9uOiBSZWxhdGl2ZUxvY2F0aW9uO1xuXHRmb2xkZXJQYXRoOiBzdHJpbmc7XG5cdGxpbmtGb3JtYXQ6IExpbmtGb3JtYXQ7XG5cdGRhdGVGb3JtYXQ6IHN0cmluZztcblx0YXR0YWNobWVudE5hbWU6IHN0cmluZztcblx0YXV0b1JlbmFtZUF0dGFjaG1lbnRGb2xkZXI6IGJvb2xlYW47XG5cdGF1dG9EZWxldGVBdHRhY2htZW50Rm9sZGVyOiBib29sZWFuO1xuXHRjb25maXJtRGVsZXRlQXR0YWNobWVudEZvbGRlcjogYm9vbGVhbjtcblx0aGlkZUF0dGFjaG1lbnRGb2xkZXJzOiBib29sZWFuO1xufVxuXG4vLyBEZWZpbmUgYW4gaW50ZXJmYWNlIGZvciB0aGUgcmV0dXJuIHR5cGVcbmV4cG9ydCBpbnRlcmZhY2UgQXR0YWNobWVudEZvbGRlclBhdGgge1xuXHRhdHRhY2htZW50c0ZvbGRlclBhdGg6IHN0cmluZztcblx0Y3VycmVudE5vdGVGb2xkZXJQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0U2V0dGluZ3NJbnRlcmZhY2Uge1xuXHRlbWJlZDogYm9vbGVhbjtcblx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlO1xufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIEltcG9ydEFjdGlvbkNob2ljZVJlc3VsdCA9IHtcblx0YWN0aW9uOiBJbXBvcnRBY3Rpb25UeXBlO1xuXHRlbWJlZDogWWVzTm9UeXBlcztcblx0cmVtZW1iZXJDaG9pY2U6IGJvb2xlYW47XG59IHwgbnVsbDtcblxuZXhwb3J0IGVudW0gT3ZlcndyaXRlQ2hvaWNlT3B0aW9ucyB7XG5cdE9WRVJXUklURSxcblx0S0VFUEJPVEgsXG5cdFNLSVAsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwIHtcblx0b3BlbldpdGhEZWZhdWx0QXBwKGZpbGVwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIE92ZXJ3cml0ZUNob2ljZVJlc3VsdCA9IE92ZXJ3cml0ZUNob2ljZU9wdGlvbnMgfCBudWxsO1xuXG5leHBvcnQgZW51bSBJbXBvcnRGcm9tVmF1bHRPcHRpb25zIHtcblx0Q09QWSxcblx0TElOSyxcblx0U0tJUFxufVxuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB3aGF0IHJlc29sdmVDaG9pY2Ugd2lsbCBhY2NlcHRcbmV4cG9ydCB0eXBlIEltcG9ydEZyb21WYXVsdENob2ljZVJlc3VsdCA9IEltcG9ydEZyb21WYXVsdE9wdGlvbnMgfCBudWxsO1xuXG5leHBvcnQgZW51bSBDaGVja2JveE9wdGlvbnMge1xuXHRBLFxuXHRCXG59XG4iLCAiLy8gdXRpbHMudHNcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnOyAgLy8gVGhpcyBpbXBvcnRzIHRoZSBwcm9taXNlcyBBUEkgZnJvbSBmc1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJzsgICAgICAgICAvLyBTdGFuZGFyZCBpbXBvcnQgZm9yIHRoZSBwYXRoIG1vZHVsZVxuaW1wb3J0ICogYXMgY3J5cHRvIGZyb20gJ2NyeXB0byc7XG5cbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZW5hbWUoZmlsZXBhdGg6IHN0cmluZykge1xuXHRyZXR1cm4gcGF0aC5wYXJzZShmaWxlcGF0aCkubmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFyZVBhdGhzU2FtZUZpbGUoZmlsZTE6c3RyaW5nLCBmaWxlMjpzdHJpbmcpIHtcblx0dHJ5IHtcblx0XHRjb25zdCByZWFscGF0aDEgPSBhd2FpdCBmcy5yZWFscGF0aChmaWxlMSk7XG5cdFx0Y29uc3QgcmVhbHBhdGgyID0gYXdhaXQgZnMucmVhbHBhdGgoZmlsZTIpO1xuXHRcdHJldHVybiBwYXRoLnJlbGF0aXZlKHJlYWxwYXRoMSxyZWFscGF0aDIpPT0nJ1xuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc29sdmluZyBwYXRoczonLCBlcnJvcik7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhc2hGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRjb25zdCBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goJ21kNScpO1xuXHRsZXQgZmlsZUhhbmRsZSA9IG51bGw7XG5cdHRyeSB7XG5cdFx0ZmlsZUhhbmRsZSA9IGF3YWl0IGZzLm9wZW4oZmlsZVBhdGgsICdyJyk7IC8vIE9wZW4gdGhlIGZpbGUgdG8gZ2V0IGEgZmlsZWhhbmRsZVxuXHRcdGNvbnN0IHN0cmVhbSA9IGZpbGVIYW5kbGUuY3JlYXRlUmVhZFN0cmVhbSgpOyAgLy8gQ3JlYXRlIGEgcmVhZCBzdHJlYW0gZnJvbSB0aGUgZmlsZSBoYW5kbGVcblxuXHRcdGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG5cdFx0XHRoYXNoLnVwZGF0ZShjaHVuayk7ICAvLyBVcGRhdGUgaGFzaCB3aXRoIGRhdGEgY2h1bmtcblx0XHR9XG5cdFx0cmV0dXJuIGhhc2guZGlnZXN0KCdoZXgnKTsgIC8vIFJldHVybiB0aGUgaGV4IGRpZ2VzdFxuXHR9IGZpbmFsbHkge1xuXHRcdGlmIChmaWxlSGFuZGxlKSB7XG5cdFx0XHRhd2FpdCBmaWxlSGFuZGxlLmNsb3NlKCk7ICAvLyBNYWtlIHN1cmUgdG8gY2xvc2UgdGhlIGZpbGUgaGFuZGxlXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGVUaW1lKGRhdGVGb3JtYXQ6c3RyaW5nKTpzdHJpbmcge1xuXHR0cnkge1xuXHRcdC8vIHVzZSBvZiBNb21lbnQuanMgdG8gZm9ybWF0IHRoZSBjdXJyZW50IGRhdGVcblx0XHRjb25zdCBkYXRlVGltZSA9IHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoZGF0ZUZvcm1hdCk7XG5cdFx0cmV0dXJuIGRhdGVUaW1lOyBcblx0fSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcblx0XHRpZihlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBmb3JtYXR0aW5nIGRhdGU6JywgZXJyb3IubWVzc2FnZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZvcm1hdHRpbmcgZGF0ZTonLCBlcnJvcik7XG5cdFx0fVxuXHRcdHJldHVybiAnREFURV9FUlJPUic7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF0dGFjaG1lbnROYW1lKG5hbWVQYXR0ZXJuOnN0cmluZyxkYXRlRm9ybWF0OnN0cmluZyxvcmlnaW5hbEZpbGVQYXRoOnN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cblx0Y29uc3Qgb3JpZ2luYWxGaWxlUGF0aF9wYXJzZWQgPSBwYXRoLnBhcnNlKG9yaWdpbmFsRmlsZVBhdGgpO1xuXG5cdGNvbnN0IGZpbGVUb0ltcG9ydE5hbWUgPSBvcmlnaW5hbEZpbGVQYXRoX3BhcnNlZC5uYW1lO1xuXHRcblx0bGV0IGF0dGFjaG1lbnROYW1lID0gbmFtZVBhdHRlcm4ucmVwbGFjZSgvXFwkXFx7b3JpZ2luYWxcXH0vZywgZmlsZVRvSW1wb3J0TmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdC5yZXBsYWNlKC9cXCRcXHt1dWlkXFx9L2csIHV1aWR2NCgpKVxuXHRcdFx0XHRcdFx0XHRcdFx0LnJlcGxhY2UoL1xcJFxce2RhdGVcXH0vZywgZm9ybWF0RGF0ZVRpbWUoZGF0ZUZvcm1hdCkpO1xuXG5cdGlmKG5hbWVQYXR0ZXJuLmluY2x1ZGVzKCcke21kNX0nKSkge1xuXHRcdGxldCBoYXNoID0gJydcblx0XHR0cnkge1xuXHRcdFx0aGFzaCA9IGF3YWl0IGhhc2hGaWxlKG9yaWdpbmFsRmlsZVBhdGgpO1xuXHRcdH0gY2F0Y2ggKGVycjogdW5rbm93bikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgaGFzaGluZyB0aGUgZmlsZTonLCBlcnIpO1xuXHRcdH1cblx0XHRhdHRhY2htZW50TmFtZSA9IGF0dGFjaG1lbnROYW1lLnJlcGxhY2UoL1xcJFxce21kNVxcfS9nLCBoYXNoKTtcblx0fVxuXG5cdC8vIGFkZCB0aGUgZXh0ZW5zaW9uXG5cdGF0dGFjaG1lbnROYW1lICs9IG9yaWdpbmFsRmlsZVBhdGhfcGFyc2VkLmV4dDtcblx0XG5cdHJldHVybiBhdHRhY2htZW50TmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmROZXdGaWxlbmFtZShkZXN0RmlsZVBhdGg6IHN0cmluZywpXG57XG5cdGNvbnN0IGRlc3RGaWxlUGF0aF9wYXJzZSA9IHBhdGgucGFyc2UoZGVzdEZpbGVQYXRoKTtcblxuXHRsZXQgY291bnRlciA9IDE7XG5cdGxldCBmaWxlRXhpc3RzO1xuXHRsZXQgbmV3RmlsZW5hbWUgPSBudWxsO1xuXHRkbyB7XG5cdFx0bmV3RmlsZW5hbWU9cGF0aC5qb2luKGRlc3RGaWxlUGF0aF9wYXJzZS5kaXIsYCR7ZGVzdEZpbGVQYXRoX3BhcnNlLm5hbWV9ICgke2NvdW50ZXJ9KSR7ZGVzdEZpbGVQYXRoX3BhcnNlLmV4dH1gKTtcblx0XHRmaWxlRXhpc3RzID0gYXdhaXQgY2hlY2tGaWxlRXhpc3RzKG5ld0ZpbGVuYW1lKTtcblx0XHRjb3VudGVyKz0xO1xuXHR9IHdoaWxlKGZpbGVFeGlzdHMpO1xuXG5cdHJldHVybiBuZXdGaWxlbmFtZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzRmlsZUluVmF1bHQodmF1bHRQYXRoOnN0cmluZyxmaWxlUGF0aDpzdHJpbmcpIHtcblx0dHJ5IHtcblx0XHQvLyBSZXNvbHZlIHRoZSByZWFsIChhYnNvbHV0ZSkgcGF0aHMgdG8gaGFuZGxlIHN5bWxpbmtzIGFuZCByZWxhdGl2ZSBwYXRoc1xuXHRcdGNvbnN0IHJlYWxGaWxlUGF0aCA9IGF3YWl0IGZzLnJlYWxwYXRoKGZpbGVQYXRoKTtcblx0XHRjb25zdCByZWFsVmF1bHRGb2xkZXJQYXRoID0gYXdhaXQgZnMucmVhbHBhdGgodmF1bHRQYXRoKTtcblxuXHRcdC8vIE5vcm1hbGl6ZSB0aGUgcGF0aHMgdG8gZW5zdXJlIHRoZXkgYXJlIGNvbXBhcmFibGVcblx0XHRjb25zdCBub3JtYWxpemVkRmlsZVBhdGggPSBwYXRoLm5vcm1hbGl6ZShyZWFsRmlsZVBhdGgpO1xuXHRcdGNvbnN0IG5vcm1hbGl6ZWRWYXVsdEZvbGRlclBhdGggPSBwYXRoLm5vcm1hbGl6ZShyZWFsVmF1bHRGb2xkZXJQYXRoKTtcblxuXHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIHBhdGggc3RhcnRzIHdpdGggdGhlIGZvbGRlciBwYXRoXG5cdFx0Ly8gRW5zdXJlIHRoZSBmb2xkZXIgcGF0aCBlbmRzIHdpdGggYSBwYXRoIHNlcGFyYXRvciB0byBhdm9pZCBwYXJ0aWFsIGZvbGRlciBuYW1lIG1hdGNoZXNcblxuXHRcdGlmKG5vcm1hbGl6ZWRGaWxlUGF0aC5zdGFydHNXaXRoKGAke25vcm1hbGl6ZWRWYXVsdEZvbGRlclBhdGh9JHtwYXRoLnNlcH1gKSkge1xuXHRcdFx0Ly8gcmV0dXJuIG5vcm1hbGl6ZWRGaWxlUGF0aC5zdWJzdHJpbmcobm9ybWFsaXplZFZhdWx0Rm9sZGVyUGF0aC5sZW5ndGgpLnJlcGxhY2UoL15cXC8vLCcnKTtcblx0XHRcdHJldHVybiBub3JtYWxpemVkRmlsZVBhdGg7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG5cdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcmVzb2x2aW5nIHBhdGhzOicsIGVycm9yKTtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRmlsZUV4aXN0cyhmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc3RhdHMgPSBhd2FpdCBmcy5zdGF0KGZpbGVQYXRoKTtcblx0XHRyZXR1cm4gc3RhdHMuaXNGaWxlKCk7ICAvLyBDaGVjayBpZiB0aGUgcGF0aCBpcyBhIGRpcmVjdG9yeVxuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdjb2RlJyBpbiBlcnJvciAmJiBlcnJvci5jb2RlID09PSAnRU5PRU5UJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlOyAgLy8gVGhlIGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdFxuXHRcdH1cblx0XHR0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGlmIGl0J3Mgbm90IHJlbGF0ZWQgdG8gdGhlIGV4aXN0ZW5jZSBjaGVja1xuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RpcmVjdG9yeUV4aXN0cyhkaXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBzdGF0cyA9IGF3YWl0IGZzLnN0YXQoZGlyUGF0aCk7XG5cdFx0cmV0dXJuIHN0YXRzLmlzRGlyZWN0b3J5KCk7ICAvLyBDaGVjayBpZiB0aGUgcGF0aCBpcyBhIGRpcmVjdG9yeVxuXHR9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuXHRcdGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdjb2RlJyBpbiBlcnJvciAmJiBlcnJvci5jb2RlID09PSAnRU5PRU5UJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlOyAgLy8gVGhlIGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdFxuXHRcdH1cblx0XHR0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIGlmIGl0J3Mgbm90IHJlbGF0ZWQgdG8gdGhlIGV4aXN0ZW5jZSBjaGVja1xuXHR9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEaXJlY3RvcnlFeGlzdHMocGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGNvbnN0IGRvRXhpc3QgPSBhd2FpdCBjaGVja0RpcmVjdG9yeUV4aXN0cyhwYXRoKTtcblx0aWYgKCFkb0V4aXN0KSB7XG5cdFx0YXdhaXQgZnMubWtkaXIocGF0aCx7cmVjdXJzaXZlOiB0cnVlfSk7XG5cdH1cblx0cmV0dXJuIHRydWU7XG59XG4iLCAiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5sZXQgZ2V0UmFuZG9tVmFsdWVzO1xuY29uc3Qgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCAiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbmNvbnN0IGJ5dGVUb0hleCA9IFtdO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICByZXR1cm4gYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV07XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgY29uc3QgdXVpZCA9IHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwgImNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJhbmRvbVVVSURcbn07IiwgImltcG9ydCBuYXRpdmUgZnJvbSAnLi9uYXRpdmUuanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgeyB1bnNhZmVTdHJpbmdpZnkgfSBmcm9tICcuL3N0cmluZ2lmeS5qcyc7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhYnVmICYmICFvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5hdGl2ZS5yYW5kb21VVUlEKCk7XG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY29uc3Qgcm5kcyA9IG9wdGlvbnMucmFuZG9tIHx8IChvcHRpb25zLnJuZyB8fCBybmcpKCk7IC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcblxuICBybmRzWzZdID0gcm5kc1s2XSAmIDB4MGYgfCAweDQwO1xuICBybmRzWzhdID0gcm5kc1s4XSAmIDB4M2YgfCAweDgwOyAvLyBDb3B5IGJ5dGVzIHRvIGJ1ZmZlciwgaWYgcHJvdmlkZWRcblxuICBpZiAoYnVmKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyArK2kpIHtcbiAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHJuZHNbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1ZjtcbiAgfVxuXG4gIHJldHVybiB1bnNhZmVTdHJpbmdpZnkocm5kcyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHY0OyIsICJpbXBvcnQge1dvcmtzcGFjZUxlYWYsIFRGaWxlLCBPcGVuVmlld1N0YXRlfSBmcm9tICdvYnNpZGlhbic7XG5cbmltcG9ydCBJbXBvcnRBdHRhY2htZW50cyBmcm9tICdtYWluJztcblxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxubGV0IG1ldGFLZXlQcmVzc2VkID0gZmFsc2U7XG5sZXQgYWx0S2V5UHJlc3NlZCA9IGZhbHNlO1xubGV0IGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IGZhbHNlXG5cbi8vIFNhdmUgYSByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIG1ldGhvZCBmb3IgdGhlIG1vbmtleSBwYXRjaFxubGV0IG9yaWdpbmFsT3BlbkZpbGU6ICgodGhpczogV29ya3NwYWNlTGVhZiwgZmlsZTogVEZpbGUsIG9wZW5TdGF0ZT86IE9wZW5WaWV3U3RhdGUpPT4gUHJvbWlzZTx2b2lkPikgfCBudWxsID0gbnVsbDtcblxuLy8gRnVuY3Rpb24gcmVmZXJlbmNlcyBmb3IgZXZlbnQgbGlzdGVuZXJzXG5mdW5jdGlvbiBrZXlkb3duSGFuZGxlcihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChldmVudC5tZXRhS2V5KSB7IC8vIHx8IGUuY3RybEtleVxuICAgICAgICBtZXRhS2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgICAgYWx0S2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBrZXl1cEhhbmRsZXIoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnTWV0YScpIHtcbiAgICAgICAgbWV0YUtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0FsdCcpIHtcbiAgICAgICAgYWx0S2V5UHJlc3NlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW91c2VIYW5kbGVyKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgaWYgKGV2ZW50Lm1ldGFLZXkpIHtcbiAgICAgIG1ldGFLZXlQcmVzc2VkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWV0YUtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgYWx0S2V5UHJlc3NlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsdEtleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZEtleUxpc3RlbmVycygpXG57XG4gICAgLy8gTGlzdGVuIGZvciBrZXlib2FyZCBldmVudHMgdG8gZGV0ZWN0IE1FVEEga2V5IHN0YXRlXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleWRvd25IYW5kbGVyKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGtleXVwSGFuZGxlcik7XG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlSGFuZGxlciwgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgIGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUtleUxpc3RlbmVycygpXG57XG4gICAgaWYoa2V5TGlzdGVuZXJzSW5zdGFsbGVkKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlkb3duSGFuZGxlcik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywga2V5dXBIYW5kbGVyKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2VIYW5kbGVyLCB7IGNhcHR1cmU6IHRydWUgfSk7XG4gICAgICAgIGtleUxpc3RlbmVyc0luc3RhbGxlZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdW5wYXRjaE9wZW5GaWxlKCkge1xuXHRpZihvcmlnaW5hbE9wZW5GaWxlKSB7XG5cdFx0V29ya3NwYWNlTGVhZi5wcm90b3R5cGUub3BlbkZpbGUgPSBvcmlnaW5hbE9wZW5GaWxlO1xuXHRcdG9yaWdpbmFsT3BlbkZpbGUgPSBudWxsO1xuXHR9IFx0XG59XG5cbmZ1bmN0aW9uIHBhdGNoT3BlbkZpbGUocGx1Z2luOiBJbXBvcnRBdHRhY2htZW50cykge1xuXHRvcmlnaW5hbE9wZW5GaWxlID0gV29ya3NwYWNlTGVhZi5wcm90b3R5cGUub3BlbkZpbGU7XG5cdFxuXHQvLyBNb25rZXkgcGF0Y2ggdGhlIG9wZW5GaWxlIG1ldGhvZFxuXHRXb3Jrc3BhY2VMZWFmLnByb3RvdHlwZS5vcGVuRmlsZSA9IGFzeW5jIGZ1bmN0aW9uIHBhdGNoZWRPcGVuRmlsZSh0aGlzOiBXb3Jrc3BhY2VMZWFmLCBmaWxlOiBURmlsZSwgb3BlblN0YXRlPzogT3BlblZpZXdTdGF0ZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdFxuXHRcdC8vIGNvbnNvbGUubG9nKGBNZXRhIGtleSBpcyBwcmVzc2VkOiAke21ldGFLZXlQcmVzc2VkfWApO1xuXHRcdC8vIGNvbnNvbGUubG9nKGBBbHQga2V5IGlzIHByZXNzZWQ6ICR7YWx0S2V5UHJlc3NlZH1gKTtcblxuXHRcdGNvbnN0IG5ld0VtcHR5TGVhdmUgPSB0aGlzLmdldFZpZXdTdGF0ZSgpPy50eXBlID09ICdlbXB0eSc7XG5cblx0XHRpZihtZXRhS2V5UHJlc3NlZCl7XG5cdFx0XHRpZihhbHRLZXlQcmVzc2VkKXtcblx0XHRcdFx0d2luZG93LnJlcXVpcmUoJ2VsZWN0cm9uJykucmVtb3RlLnNoZWxsLnNob3dJdGVtSW5Gb2xkZXIocGF0aC5qb2luKHBsdWdpbi52YXVsdFBhdGgsZmlsZS5wYXRoKSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0cGx1Z2luLmFwcC5vcGVuV2l0aERlZmF1bHRBcHAoZmlsZS5wYXRoKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGlmKG9yaWdpbmFsT3BlbkZpbGUpIHtcblx0XHRcdFx0cmV0dXJuIG9yaWdpbmFsT3BlbkZpbGUuY2FsbCh0aGlzLCBmaWxlLCBvcGVuU3RhdGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAobmV3RW1wdHlMZWF2ZSkge1xuXHRcdFx0Ly8gY2xvc2UgcHJlcGFyZWQgZW1wdHkgdGFiXG5cdFx0XHR0aGlzLmRldGFjaCgpO1xuXHRcdH1cblx0XHRyZXR1cm47XG5cdH1cbn1cblxuZXhwb3J0IHtwYXRjaE9wZW5GaWxlLCBhZGRLZXlMaXN0ZW5lcnMsIHJlbW92ZUtleUxpc3RlbmVycywgdW5wYXRjaE9wZW5GaWxlfTsiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EsSUFBQUEsbUJBWU87OztBQ1hQLHNCQUEyQjs7O0FDQXBCLElBQUssbUJBQUwsa0JBQUtDLHNCQUFMO0FBQ04sRUFBQUEsa0JBQUEsVUFBSztBQUNMLEVBQUFBLGtCQUFBLFVBQUs7QUFDTCxFQUFBQSxrQkFBQSxVQUFLO0FBQ0wsRUFBQUEsa0JBQUEsY0FBUztBQUpFLFNBQUFBO0FBQUEsR0FBQTtBQU9MLElBQUssYUFBTCxrQkFBS0MsZ0JBQUw7QUFDTixFQUFBQSxZQUFBLFNBQUk7QUFDSixFQUFBQSxZQUFBLFFBQUc7QUFDSCxFQUFBQSxZQUFBLGNBQVM7QUFIRSxTQUFBQTtBQUFBLEdBQUE7QUFNTCxJQUFLLDJCQUFMLGtCQUFLQyw4QkFBTDtBQUNOLEVBQUFBLDBCQUFBLGNBQVM7QUFDVCxFQUFBQSwwQkFBQSxjQUFTO0FBQ1QsRUFBQUEsMEJBQUEsWUFBTztBQUhJLFNBQUFBO0FBQUEsR0FBQTtBQVdMLElBQUssbUJBQUwsa0JBQUtDLHNCQUFMO0FBQ04sRUFBQUEsa0JBQUEsVUFBSztBQUNMLEVBQUFBLGtCQUFBLFdBQU07QUFGSyxTQUFBQTtBQUFBLEdBQUE7QUFLTCxJQUFLLGFBQUwsa0JBQUtDLGdCQUFMO0FBQ04sRUFBQUEsWUFBQSxjQUFTO0FBQ1QsRUFBQUEsWUFBQSxjQUFTO0FBRkUsU0FBQUE7QUFBQSxHQUFBOzs7QUM5QlosZ0JBQStCO0FBQy9CLFdBQXNCO0FBQ3RCLElBQUFDLFVBQXdCOzs7QUNBeEIsSUFBSTtBQUNKLElBQU0sUUFBUSxJQUFJLFdBQVcsRUFBRTtBQUNoQixTQUFSLE1BQXVCO0FBRTVCLE1BQUksQ0FBQyxpQkFBaUI7QUFFcEIsc0JBQWtCLE9BQU8sV0FBVyxlQUFlLE9BQU8sbUJBQW1CLE9BQU8sZ0JBQWdCLEtBQUssTUFBTTtBQUUvRyxRQUFJLENBQUMsaUJBQWlCO0FBQ3BCLFlBQU0sSUFBSSxNQUFNLDBHQUEwRztBQUFBLElBQzVIO0FBQUEsRUFDRjtBQUVBLFNBQU8sZ0JBQWdCLEtBQUs7QUFDOUI7OztBQ1hBLElBQU0sWUFBWSxDQUFDO0FBRW5CLFNBQVMsSUFBSSxHQUFHLElBQUksS0FBSyxFQUFFLEdBQUc7QUFDNUIsWUFBVSxNQUFNLElBQUksS0FBTyxTQUFTLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNsRDtBQUVPLFNBQVMsZ0JBQWdCLEtBQUssU0FBUyxHQUFHO0FBRy9DLFNBQU8sVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksTUFBTSxVQUFVLElBQUksU0FBUyxDQUFDLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxDQUFDLENBQUMsSUFBSSxNQUFNLFVBQVUsSUFBSSxTQUFTLENBQUMsQ0FBQyxJQUFJLFVBQVUsSUFBSSxTQUFTLENBQUMsQ0FBQyxJQUFJLE1BQU0sVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksVUFBVSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksTUFBTSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUMsSUFBSSxVQUFVLElBQUksU0FBUyxFQUFFLENBQUM7QUFDbmY7OztBQ2hCQSxJQUFNLGFBQWEsT0FBTyxXQUFXLGVBQWUsT0FBTyxjQUFjLE9BQU8sV0FBVyxLQUFLLE1BQU07QUFDdEcsSUFBTyxpQkFBUTtBQUFBLEVBQ2I7QUFDRjs7O0FDQ0EsU0FBUyxHQUFHLFNBQVMsS0FBSyxRQUFRO0FBQ2hDLE1BQUksZUFBTyxjQUFjLENBQUMsT0FBTyxDQUFDLFNBQVM7QUFDekMsV0FBTyxlQUFPLFdBQVc7QUFBQSxFQUMzQjtBQUVBLFlBQVUsV0FBVyxDQUFDO0FBQ3RCLFFBQU0sT0FBTyxRQUFRLFdBQVcsUUFBUSxPQUFPLEtBQUs7QUFFcEQsT0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLElBQUksS0FBTztBQUMzQixPQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFPO0FBRTNCLE1BQUksS0FBSztBQUNQLGFBQVMsVUFBVTtBQUVuQixhQUFTLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxHQUFHO0FBQzNCLFVBQUksU0FBUyxDQUFDLElBQUksS0FBSyxDQUFDO0FBQUEsSUFDMUI7QUFFQSxXQUFPO0FBQUEsRUFDVDtBQUVBLFNBQU8sZ0JBQWdCLElBQUk7QUFDN0I7QUFFQSxJQUFPLGFBQVE7OztBSnJCUixTQUFTLFlBQVksVUFBa0I7QUFDN0MsU0FBWSxXQUFNLFFBQVEsRUFBRTtBQUM3QjtBQUVBLGVBQXNCLGlCQUFpQixPQUFjLE9BQWM7QUFDbEUsTUFBSTtBQUNILFVBQU0sWUFBWSxNQUFNLFVBQUFDLFNBQUcsU0FBUyxLQUFLO0FBQ3pDLFVBQU0sWUFBWSxNQUFNLFVBQUFBLFNBQUcsU0FBUyxLQUFLO0FBQ3pDLFdBQVksY0FBUyxXQUFVLFNBQVMsS0FBRztBQUFBLEVBQzVDLFNBQVMsT0FBUDtBQUNELFlBQVEsTUFBTSwwQkFBMEIsS0FBSztBQUM3QyxXQUFPO0FBQUEsRUFDUjtBQUNEO0FBRUEsZUFBZSxTQUFTLFVBQW1DO0FBQzFELFFBQU0sT0FBYyxtQkFBVyxLQUFLO0FBQ3BDLE1BQUksYUFBYTtBQUNqQixNQUFJO0FBQ0gsaUJBQWEsTUFBTSxVQUFBQSxTQUFHLEtBQUssVUFBVSxHQUFHO0FBQ3hDLFVBQU0sU0FBUyxXQUFXLGlCQUFpQjtBQUUzQyxxQkFBaUIsU0FBUyxRQUFRO0FBQ2pDLFdBQUssT0FBTyxLQUFLO0FBQUEsSUFDbEI7QUFDQSxXQUFPLEtBQUssT0FBTyxLQUFLO0FBQUEsRUFDekIsVUFBRTtBQUNELFFBQUksWUFBWTtBQUNmLFlBQU0sV0FBVyxNQUFNO0FBQUEsSUFDeEI7QUFBQSxFQUNEO0FBQ0Q7QUFFQSxTQUFTLGVBQWUsWUFBMEI7QUFDakQsTUFBSTtBQUVILFVBQU0sV0FBVyxPQUFPLE9BQU8sRUFBRSxPQUFPLFVBQVU7QUFDbEQsV0FBTztBQUFBLEVBQ1IsU0FBUyxPQUFQO0FBQ0QsUUFBRyxpQkFBaUIsT0FBTztBQUMxQixjQUFRLE1BQU0sMEJBQTBCLE1BQU0sT0FBTztBQUFBLElBQ3RELE9BQU87QUFDTixjQUFRLE1BQU0sMEJBQTBCLEtBQUs7QUFBQSxJQUM5QztBQUNBLFdBQU87QUFBQSxFQUNSO0FBQ0Q7QUFFQSxlQUFzQixxQkFBcUIsYUFBbUIsWUFBa0Isa0JBQTBDO0FBRXpILFFBQU0sMEJBQStCLFdBQU0sZ0JBQWdCO0FBRTNELFFBQU0sbUJBQW1CLHdCQUF3QjtBQUVqRCxNQUFJLGlCQUFpQixZQUFZLFFBQVEsbUJBQW1CLGdCQUFnQixFQUNuRSxRQUFRLGVBQWUsV0FBTyxDQUFDLEVBQy9CLFFBQVEsZUFBZSxlQUFlLFVBQVUsQ0FBQztBQUUxRCxNQUFHLFlBQVksU0FBUyxRQUFRLEdBQUc7QUFDbEMsUUFBSSxPQUFPO0FBQ1gsUUFBSTtBQUNILGFBQU8sTUFBTSxTQUFTLGdCQUFnQjtBQUFBLElBQ3ZDLFNBQVMsS0FBUDtBQUNELGNBQVEsTUFBTSwyQkFBMkIsR0FBRztBQUFBLElBQzdDO0FBQ0EscUJBQWlCLGVBQWUsUUFBUSxjQUFjLElBQUk7QUFBQSxFQUMzRDtBQUdBLG9CQUFrQix3QkFBd0I7QUFFMUMsU0FBTztBQUNSO0FBRUEsZUFBc0IsZ0JBQWdCLGNBQ3RDO0FBQ0MsUUFBTSxxQkFBMEIsV0FBTSxZQUFZO0FBRWxELE1BQUksVUFBVTtBQUNkLE1BQUk7QUFDSixNQUFJLGNBQWM7QUFDbEIsS0FBRztBQUNGLGtCQUFpQixVQUFLLG1CQUFtQixLQUFJLEdBQUcsbUJBQW1CLFNBQVMsV0FBVyxtQkFBbUIsS0FBSztBQUMvRyxpQkFBYSxNQUFNLGdCQUFnQixXQUFXO0FBQzlDLGVBQVM7QUFBQSxFQUNWLFNBQVE7QUFFUixTQUFPO0FBQ1I7QUFFQSxlQUFzQixjQUFjLFdBQWlCLFVBQWlCO0FBQ3JFLE1BQUk7QUFFSCxVQUFNLGVBQWUsTUFBTSxVQUFBQSxTQUFHLFNBQVMsUUFBUTtBQUMvQyxVQUFNLHNCQUFzQixNQUFNLFVBQUFBLFNBQUcsU0FBUyxTQUFTO0FBR3ZELFVBQU0scUJBQTBCLGVBQVUsWUFBWTtBQUN0RCxVQUFNLDRCQUFpQyxlQUFVLG1CQUFtQjtBQUtwRSxRQUFHLG1CQUFtQixXQUFXLEdBQUcsNEJBQWlDLFVBQUssR0FBRztBQUU1RSxhQUFPO0FBQUEsSUFDUixPQUFPO0FBQ04sYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNELFNBQVMsT0FBUDtBQUNELFlBQVEsTUFBTSwwQkFBMEIsS0FBSztBQUM3QyxXQUFPO0FBQUEsRUFDUjtBQUNEO0FBRUEsZUFBc0IsZ0JBQWdCLFVBQW9DO0FBQ3pFLE1BQUk7QUFDSCxVQUFNLFFBQVEsTUFBTSxVQUFBQSxTQUFHLEtBQUssUUFBUTtBQUNwQyxXQUFPLE1BQU0sT0FBTztBQUFBLEVBQ3JCLFNBQVMsT0FBUDtBQUNELFFBQUksU0FBUyxPQUFPLFVBQVUsWUFBWSxVQUFVLFNBQVMsTUFBTSxTQUFTLFVBQVU7QUFDckYsYUFBTztBQUFBLElBQ1I7QUFDQSxVQUFNO0FBQUEsRUFDUDtBQUNEO0FBRUEsZUFBc0IscUJBQXFCLFNBQW1DO0FBQzdFLE1BQUk7QUFDSCxVQUFNLFFBQVEsTUFBTSxVQUFBQSxTQUFHLEtBQUssT0FBTztBQUNuQyxXQUFPLE1BQU0sWUFBWTtBQUFBLEVBQzFCLFNBQVMsT0FBUDtBQUNELFFBQUksU0FBUyxPQUFPLFVBQVUsWUFBWSxVQUFVLFNBQVMsTUFBTSxTQUFTLFVBQVU7QUFDckYsYUFBTztBQUFBLElBQ1I7QUFDQSxVQUFNO0FBQUEsRUFDUDtBQUNEO0FBRUEsZUFBc0Isc0JBQXNCQyxPQUFnQztBQUMzRSxRQUFNLFVBQVUsTUFBTSxxQkFBcUJBLEtBQUk7QUFDL0MsTUFBSSxDQUFDLFNBQVM7QUFDYixVQUFNLFVBQUFELFNBQUcsTUFBTUMsT0FBSyxFQUFDLFdBQVcsS0FBSSxDQUFDO0FBQUEsRUFDdEM7QUFDQSxTQUFPO0FBQ1I7OztBRnZJQSxJQUFBQyxRQUFzQjtBQUVmLElBQU0sd0JBQU4sY0FBb0Msc0JBQU07QUFBQTtBQUFBLEVBT2hELFlBQVksS0FBa0IsUUFBbUMseUJBQW1ELG1CQUErQjtBQUVsSixVQUFNLEdBQUc7QUFGb0I7QUFBbUM7QUFBbUQ7QUFMcEgsU0FBUSxnQkFBNEQsTUFBTTtBQUFBLElBQUM7QUFHM0UsU0FBUSxpQkFBMEI7QUFLakMsU0FBSyxVQUFVLElBQUksUUFBa0MsQ0FBQyxZQUFZO0FBQ2pFLFdBQUssZ0JBQWdCO0FBQUEsSUFDdEIsQ0FBQztBQUNELFNBQUssaUJBQWlCO0FBQ3RCLFNBQUssc0JBQXNCO0FBQUEsRUFDNUI7QUFBQSxFQUVBLGFBQWEsT0FBeUIsY0FBc0IsU0FBaUIsU0FBaUIsZUFBZ0MsVUFBb0QsZ0JBQXlCLE9BQU87QUFFak4sVUFBTSxLQUFLLE1BQU0sU0FBUyxJQUFJO0FBQzlCLFFBQUcsZUFBZTtBQUNqQixTQUFHLFNBQVMsS0FBSztBQUFBLElBQ2xCO0FBR0EsT0FBRyxTQUFTLE1BQU0sRUFBRSxNQUFNLGNBQWMsS0FBSyxrQkFBa0IsQ0FBQztBQUdoRSxPQUFHLFNBQVMsTUFBTSxFQUFFLE1BQU0sU0FBUyxLQUFLLGtCQUFrQixDQUFDO0FBRzNELFVBQU0sS0FBSyxHQUFHLFNBQVMsSUFBSTtBQUMzQixVQUFNLGNBQWMsR0FBRyxTQUFTLFNBQVMsRUFBRSxLQUFLLFNBQVMsQ0FBQztBQUMxRCxVQUFNLFFBQVEsWUFBWSxTQUFTLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNoRSxRQUFHLDRCQUFrQztBQUNwQyxZQUFNLFVBQVU7QUFBQSxJQUNqQixPQUFPO0FBQ04sWUFBTSxVQUFVO0FBQUEsSUFDakI7QUFFQSxnQkFBWSxTQUFTLFFBQVEsRUFBRSxLQUFLLFNBQVMsQ0FBQztBQUc5QyxPQUFHLFNBQVMsTUFBTSxFQUFFLE1BQU0sU0FBUyxLQUFLLGtCQUFrQixDQUFDO0FBRzNELFVBQU0saUJBQWlCLFVBQVUsTUFBTTtBQUN0QyxVQUFJLFVBQVU7QUFDYixpQkFBUyxNQUFNLCtCQUErQztBQUFBLE1BQy9EO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsU0FBUztBQUNSLFFBQUk7QUFFSixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBRXRCLFVBQU0sWUFBWSxVQUFVLFVBQVUsRUFBRSxLQUFLLHVCQUF1QixDQUFDO0FBRXJFLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDakQsY0FBVSxTQUFTLEtBQUssRUFBRSxNQUFNLGlGQUFpRixDQUFDO0FBRWxILFVBQU0sUUFBUSxVQUFVLFNBQVMsT0FBTztBQUV4QyxZQUFPLEtBQUsseUJBQXdCO0FBQUEsTUFDcEM7QUFDQztBQUNBO0FBQUEsTUFDRDtBQUFBLE1BQ0E7QUFDQztBQUNBO0FBQUEsSUFDRDtBQUdBLFNBQUssYUFBYSxPQUFPLHVEQUF1RCxRQUFRLFFBQVEsZUFBZSxDQUFDLG1CQUFtQztBQUNsSixVQUFHLDZCQUFrQztBQUNwQyxhQUFLO0FBQUEsTUFDTixPQUFPO0FBQ04sYUFBSztBQUFBLE1BQ047QUFBQSxJQUNELEdBQUcsSUFBSTtBQUVQLFlBQU8sS0FBSyxtQkFBa0I7QUFBQSxNQUM5QjtBQUNDO0FBQ0E7QUFBQSxNQUNEO0FBQUEsTUFDQTtBQUNDO0FBQ0E7QUFBQSxJQUNEO0FBR0EsU0FBSyxhQUFhLE9BQU8sd0RBQXdELFNBQVMsUUFBUSxlQUFlLENBQUMsbUJBQW1DO0FBQ3BKLFVBQUcsNkJBQWtDO0FBQ3BDLGFBQUs7QUFBQSxNQUNOLE9BQU87QUFDTixhQUFLO0FBQUEsTUFDTjtBQUFBLElBQ0QsR0FBRyxJQUFJO0FBR1AsU0FBSyxhQUFhLE9BQU8sb0RBQW9ELE9BQU8saUJBQXlCLENBQUMsbUJBQW1DO0FBQ2hKLFVBQUcsNkJBQWtDO0FBQ3BDLGFBQUssaUJBQWlCO0FBQUEsTUFDdkIsT0FBTztBQUNOLGFBQUssaUJBQWlCO0FBQUEsTUFDdkI7QUFBQSxJQUNELEdBQUcsSUFBSTtBQUdQLFVBQU0sd0JBQXdCLFVBQVUsVUFBVSxFQUFDLEtBQUksaUJBQWdCLENBQUM7QUFZeEUsVUFBTSxlQUFlLHNCQUFzQixTQUFTLFVBQVU7QUFBQSxNQUM3RCxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsSUFDTixDQUFDO0FBQ0QsaUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUM1QyxXQUFLLE9BQU87QUFBQSxJQUNiLENBQUM7QUFFRCxlQUFXLE1BQU07QUFJaEIsbUJBQWEsTUFBTTtBQUFBLElBQ3BCLEdBQUcsQ0FBQztBQUFBLEVBU0w7QUFBQSxFQUVBLE1BQU0sU0FBUztBQUNkLFNBQUssY0FBYztBQUFBLE1BQ2xCLFFBQVEsS0FBSztBQUFBLE1BQ2IsT0FBTyxLQUFLO0FBQUEsTUFDWixnQkFBZ0IsS0FBSztBQUFBLElBQ3RCLENBQUM7QUFDRCxTQUFLLE1BQU07QUFBQSxFQUNaO0FBQUEsRUFFQSxVQUFVO0FBQ1QsU0FBSyxVQUFVLE1BQU07QUFDckIsU0FBSyxjQUFjLElBQUk7QUFBQSxFQUN4QjtBQUNEO0FBRU8sSUFBTSx1QkFBTixjQUFtQyxzQkFBTTtBQUFBLEVBSy9DLFlBQVksS0FBa0IsUUFBbUMsa0JBQWtDLGNBQXNCO0FBRXhILFVBQU0sR0FBRztBQUZvQjtBQUFtQztBQUFrQztBQUhuRyxTQUFRLGdCQUF5RCxNQUFNO0FBQUEsSUFBQztBQU12RSxTQUFLLFVBQVUsSUFBSSxRQUErQixDQUFDLFlBQVk7QUFDOUQsV0FBSyxnQkFBZ0I7QUFBQSxJQUN0QixDQUFDO0FBQ0QsU0FBSyxXQUFpQixZQUFZLFlBQVk7QUFBQSxFQUMvQztBQUFBLEVBRUEsU0FBUztBQUNSLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFFdEIsVUFBTSxZQUFZLFVBQVUsVUFBVSxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFFckUsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxVQUFNLFlBQVksVUFBVSxTQUFTLEdBQUc7QUFDeEMsY0FBVSxPQUFPLG1DQUFtQztBQUdwRCxVQUFNLGVBQWUsVUFBVSxTQUFTLEtBQUs7QUFBQSxNQUM1QyxNQUFNLEtBQUs7QUFBQSxNQUNYLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxpQkFBYSxpQkFBaUIsU0FBUyxDQUFDLE1BQU07QUFDN0MsUUFBRSxlQUFlO0FBRWpCLGFBQU8sUUFBUSxVQUFVLEVBQUUsT0FBTyxNQUFNLGlCQUFpQixLQUFLLGdCQUFnQjtBQUFBLElBQy9FLENBQUM7QUFFRCxjQUFVLE9BQU8sNkJBQTZCO0FBRzlDLFVBQU0sZ0JBQWdCLFVBQVUsU0FBUyxLQUFLO0FBQUEsTUFDN0MsTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLElBQ1AsQ0FBQztBQUNELGtCQUFjLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUM5QyxRQUFFLGVBQWU7QUFFakIsYUFBTyxRQUFRLFVBQVUsRUFBRSxPQUFPLE1BQU0saUJBQWlCLEtBQUssWUFBWTtBQUFBLElBQzNFLENBQUM7QUFFRCxjQUFVLE9BQU8sMENBQTBDO0FBRTNELGNBQVUsU0FBUyxLQUFJLEVBQUMsTUFBTSw4QkFBNkIsQ0FBQztBQUc1RCxVQUFNLGtCQUFrQixVQUFVLFVBQVUsRUFBQyxLQUFJLGlCQUFnQixDQUFDO0FBQ2xFLFVBQU0sYUFBYSxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDckQsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELGVBQVcsaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxXQUFLLDhCQUE2QztBQUNsRCxXQUFLLE1BQU07QUFBQSxJQUNaLENBQUM7QUFDRCxVQUFNLGtCQUFrQixnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDMUQsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELG9CQUFnQixpQkFBaUIsU0FBUyxNQUFNO0FBQy9DLFdBQUssK0JBQThDO0FBQ25ELFdBQUssTUFBTTtBQUFBLElBQ1osQ0FBQztBQUNELFVBQU0sYUFBYSxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDckQsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELGVBQVcsaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxXQUFLLDBCQUF5QztBQUM5QyxXQUFLLE1BQU07QUFBQSxJQUNaLENBQUM7QUFFRCxlQUFXLE1BQU07QUFJaEIsaUJBQVcsTUFBTTtBQUFBLElBQ2xCLEdBQUcsQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLFVBQVU7QUFDVCxTQUFLLFVBQVUsTUFBTTtBQUNyQixTQUFLLGNBQWMsSUFBSTtBQUFBLEVBQ3hCO0FBQ0Q7QUFHTyxJQUFNLDhCQUFOLGNBQTBDLHNCQUFNO0FBQUE7QUFBQSxFQUl0RCxZQUFZLEtBQWtCLFFBQW1DLHNCQUE4QjtBQUU5RixVQUFNLEdBQUc7QUFGb0I7QUFBbUM7QUFGakUsU0FBUSxnQkFBMkMsTUFBTTtBQUFBLElBQUM7QUFLekQsU0FBSyxVQUFVLElBQUksUUFBaUIsQ0FBQyxZQUFZO0FBQ2hELFdBQUssZ0JBQWdCO0FBQUEsSUFDdEIsQ0FBQztBQUFBLEVBQ0Y7QUFBQSxFQUVBLFNBQVM7QUFFUixVQUFNLDhCQUFtQyxZQUFNLEtBQUssb0JBQW9CO0FBRXhFLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFFdEIsVUFBTSxZQUFZLFVBQVUsVUFBVSxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFFckUsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxVQUFNLFlBQVksVUFBVSxTQUFTLEdBQUc7QUFDeEMsY0FBVSxPQUFPLDZDQUE2QztBQUc5RCxVQUFNLFdBQVcsVUFBVSxTQUFTLEtBQUs7QUFBQSxNQUN4QyxNQUFNLDRCQUE0QjtBQUFBLE1BQ2xDLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxhQUFTLGlCQUFpQixTQUFTLENBQUMsTUFBTTtBQUN6QyxRQUFFLGVBQWU7QUFHakIsYUFBTyxRQUFRLFVBQVUsRUFBRSxPQUFPLE1BQU0sU0FBUyxLQUFLLG9CQUFvQjtBQUFBLElBQzNFLENBQUM7QUFFRCxjQUFVLE9BQU8sd0JBQXdCO0FBRXpDLFVBQU0sa0JBQWtCLFVBQVUsVUFBVSxFQUFDLEtBQUksaUJBQWdCLENBQUM7QUFDbEUsVUFBTSxlQUFlLGdCQUFnQixTQUFTLFVBQVU7QUFBQSxNQUN2RCxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsSUFDTixDQUFDO0FBQ0QsaUJBQWEsaUJBQWlCLFNBQVMsTUFBTTtBQUM1QyxXQUFLLGNBQWMsSUFBSTtBQUN2QixXQUFLLE1BQU07QUFBQSxJQUNaLENBQUM7QUFDRCxVQUFNLGVBQWUsZ0JBQWdCLFNBQVMsVUFBVTtBQUFBLE1BQ3ZELE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNOLENBQUM7QUFDRCxpQkFBYSxpQkFBaUIsU0FBUyxNQUFNO0FBQzVDLFdBQUssY0FBYyxLQUFLO0FBQ3hCLFdBQUssTUFBTTtBQUFBLElBQ1osQ0FBQztBQUVELGVBQVcsTUFBTTtBQUloQixtQkFBYSxNQUFNO0FBQUEsSUFDcEIsR0FBRyxDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsVUFBVTtBQUNULFNBQUssVUFBVSxNQUFNO0FBQ3JCLFNBQUssY0FBYyxLQUFLO0FBQUEsRUFDekI7QUFDRDtBQUlPLElBQU0sNkJBQU4sY0FBeUMsc0JBQU07QUFBQTtBQUFBLEVBSXJELFlBQVksS0FBa0IsUUFBbUMsV0FBMkIsa0JBQWtDLGNBQWdDO0FBRTdKLFVBQU0sR0FBRztBQUZvQjtBQUFtQztBQUEyQjtBQUFrQztBQUY5SCxTQUFRLGdCQUErRCxNQUFNO0FBQUEsSUFBQztBQUs3RSxTQUFLLFVBQVUsSUFBSSxRQUFxQyxDQUFDLFlBQVk7QUFDcEUsV0FBSyxnQkFBZ0I7QUFBQSxJQUN0QixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsU0FBUztBQUNSLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFFdEIsVUFBTSxZQUFZLFVBQVUsVUFBVSxFQUFFLEtBQUssdUJBQXVCLENBQUM7QUFFckUsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxVQUFNLFlBQVksVUFBVSxTQUFTLEdBQUc7QUFDeEMsY0FBVSxPQUFPLHFDQUFxQztBQUd0RCxVQUFNLFdBQVcsVUFBVSxTQUFTLEtBQUs7QUFBQSxNQUN4QyxNQUFXLGVBQVMsS0FBSyxXQUFVLEtBQUssZ0JBQWdCO0FBQUEsTUFDeEQsTUFBTTtBQUFBLElBQ1AsQ0FBQztBQUNELGFBQVMsaUJBQWlCLFNBQVMsQ0FBQyxNQUFNO0FBQ3pDLFFBQUUsZUFBZTtBQUVqQixhQUFPLFFBQVEsVUFBVSxFQUFFLE9BQU8sTUFBTSxpQkFBaUIsS0FBSyxnQkFBZ0I7QUFBQSxJQUMvRSxDQUFDO0FBRUQsY0FBVSxPQUFPLG1DQUFtQztBQUVwRCxRQUFHLEtBQUssbUNBQXFDO0FBQzVDLGdCQUFVLFNBQVMsS0FBSSxFQUFDLE1BQU0sOE1BR3FCLENBQUM7QUFBQSxJQUNyRDtBQUVBLGNBQVUsU0FBUyxLQUFJLEVBQUMsTUFBTSxpR0FBZ0csQ0FBQztBQUcvSCxVQUFNLGtCQUFrQixVQUFVLFVBQVUsRUFBQyxLQUFJLGlCQUFnQixDQUFDO0FBQ2xFLFVBQU0sYUFBYSxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsTUFDckQsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBLElBQ04sQ0FBQztBQUNELGVBQVcsaUJBQWlCLFNBQVMsTUFBTTtBQUMxQyxXQUFLLDBCQUF5QztBQUM5QyxXQUFLLE1BQU07QUFBQSxJQUNaLENBQUM7QUFDRCxVQUFNLGFBQWEsZ0JBQWdCLFNBQVMsVUFBVTtBQUFBLE1BQ3JELE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNOLENBQUM7QUFDRCxlQUFXLGlCQUFpQixTQUFTLE1BQU07QUFDMUMsV0FBSywwQkFBeUM7QUFDOUMsV0FBSyxNQUFNO0FBQUEsSUFDWixDQUFDO0FBQ0QsVUFBTSxhQUFhLGdCQUFnQixTQUFTLFVBQVU7QUFBQSxNQUNyRCxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsSUFDTixDQUFDO0FBQ0QsZUFBVyxpQkFBaUIsU0FBUyxNQUFNO0FBQzFDLFdBQUssMEJBQXlDO0FBQzlDLFdBQUssTUFBTTtBQUFBLElBQ1osQ0FBQztBQUVELGVBQVcsTUFBTTtBQUloQixpQkFBVyxNQUFNO0FBQUEsSUFDbEIsR0FBRyxDQUFDO0FBQUEsRUFTTDtBQUFBLEVBRUEsVUFBVTtBQUNULFNBQUssVUFBVSxNQUFNO0FBQ3JCLFNBQUssY0FBYyxJQUFJO0FBQUEsRUFDeEI7QUFDRDs7O0FEdFpBLElBQUFDLGFBQStCO0FBQy9CLElBQUFDLFFBQXNCOzs7QVFqQ3RCLElBQUFDLG1CQUFrRDtBQUlsRCxJQUFBQyxRQUFzQjtBQUV0QixJQUFJLGlCQUFpQjtBQUNyQixJQUFJLGdCQUFnQjtBQUNwQixJQUFJLHdCQUF3QjtBQUc1QixJQUFJLG1CQUEyRztBQUcvRyxTQUFTLGVBQWUsT0FBc0I7QUFDMUMsTUFBSSxNQUFNLFNBQVM7QUFDZixxQkFBaUI7QUFBQSxFQUNyQjtBQUNBLE1BQUksTUFBTSxRQUFRO0FBQ2Qsb0JBQWdCO0FBQUEsRUFDcEI7QUFDSjtBQUVBLFNBQVMsYUFBYSxPQUFzQjtBQUN4QyxNQUFJLE1BQU0sUUFBUSxRQUFRO0FBQ3RCLHFCQUFpQjtBQUFBLEVBQ3JCO0FBQ0EsTUFBSSxNQUFNLFFBQVEsT0FBTztBQUNyQixvQkFBZ0I7QUFBQSxFQUNwQjtBQUNKO0FBRUEsU0FBUyxhQUFhLE9BQW1CO0FBQ3JDLE1BQUksTUFBTSxTQUFTO0FBQ2pCLHFCQUFpQjtBQUFBLEVBQ25CLE9BQU87QUFDTCxxQkFBaUI7QUFBQSxFQUNuQjtBQUNBLE1BQUksTUFBTSxRQUFRO0FBQ2hCLG9CQUFnQjtBQUFBLEVBQ2xCLE9BQU87QUFDTCxvQkFBZ0I7QUFBQSxFQUNsQjtBQUNKO0FBRUEsU0FBUyxrQkFDVDtBQUVJLFdBQVMsaUJBQWlCLFdBQVcsY0FBYztBQUNuRCxXQUFTLGlCQUFpQixTQUFTLFlBQVk7QUFDbEQsV0FBUyxpQkFBaUIsYUFBYSxjQUFjLEVBQUUsU0FBUyxLQUFLLENBQUM7QUFDbkUsMEJBQXdCO0FBQzVCO0FBRUEsU0FBUyxxQkFDVDtBQUNJLE1BQUcsdUJBQXVCO0FBQ3RCLGFBQVMsb0JBQW9CLFdBQVcsY0FBYztBQUN0RCxhQUFTLG9CQUFvQixTQUFTLFlBQVk7QUFDbEQsYUFBUyxvQkFBb0IsYUFBYSxjQUFjLEVBQUUsU0FBUyxLQUFLLENBQUM7QUFDekUsNEJBQXdCO0FBQUEsRUFDNUI7QUFDSjtBQUVBLFNBQVMsa0JBQWtCO0FBQzFCLE1BQUcsa0JBQWtCO0FBQ3BCLG1DQUFjLFVBQVUsV0FBVztBQUNuQyx1QkFBbUI7QUFBQSxFQUNwQjtBQUNEO0FBRUEsU0FBUyxjQUFjLFFBQTJCO0FBQ2pELHFCQUFtQiwrQkFBYyxVQUFVO0FBRzNDLGlDQUFjLFVBQVUsV0FBVyxlQUFlLGdCQUFxQyxNQUFhLFdBQTBDO0FBM0UvSTtBQWdGRSxVQUFNLGtCQUFnQixVQUFLLGFBQWEsTUFBbEIsbUJBQXFCLFNBQVE7QUFFbkQsUUFBRyxnQkFBZTtBQUNqQixVQUFHLGVBQWM7QUFDaEIsZUFBTyxRQUFRLFVBQVUsRUFBRSxPQUFPLE1BQU0saUJBQXNCLFdBQUssT0FBTyxXQUFVLEtBQUssSUFBSSxDQUFDO0FBQUEsTUFDL0YsT0FDSztBQUNKLGVBQU8sSUFBSSxtQkFBbUIsS0FBSyxJQUFJO0FBQUEsTUFDeEM7QUFBQSxJQUNELE9BRUE7QUFDQyxVQUFHLGtCQUFrQjtBQUNwQixlQUFPLGlCQUFpQixLQUFLLE1BQU0sTUFBTSxTQUFTO0FBQUEsTUFDbkQ7QUFBQSxJQUNEO0FBQ0EsUUFBSSxlQUFlO0FBRWxCLFdBQUssT0FBTztBQUFBLElBQ2I7QUFDQTtBQUFBLEVBQ0Q7QUFDRDs7O0FSakVBLElBQU0sbUJBQThDO0FBQUEsRUFDbkQ7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQTtBQUFBLEVBQ0EsWUFBWTtBQUFBO0FBQUEsRUFDWjtBQUFBLEVBQ0EsZ0JBQWdCO0FBQUE7QUFBQSxFQUNoQixZQUFZO0FBQUEsRUFDWixtQkFBbUI7QUFBQTtBQUFBLEVBQ25CLDRCQUE0QjtBQUFBO0FBQUEsRUFDNUIsNEJBQTRCO0FBQUE7QUFBQSxFQUM1QiwrQkFBK0I7QUFBQTtBQUFBLEVBQy9CLHVCQUF1QjtBQUFBO0FBQ3hCO0FBRUEsSUFBcUIsb0JBQXJCLGNBQStDLHdCQUFPO0FBQUEsRUFRckQsWUFBWSxLQUFVLFVBQTBCO0FBQy9DLFVBQU0sS0FBSyxRQUFRO0FBUnBCLG9CQUFzQyxFQUFDLEdBQUcsaUJBQWdCO0FBRTFELFNBQVEsd0JBQWlDO0FBQ3pDLFNBQVEsd0JBQWlDO0FBQ3pDLFNBQVEsV0FBb0M7QUFDNUMsU0FBUSxrQkFBa0MsQ0FBQztBQU0xQyxVQUFNLFVBQVUsS0FBSyxJQUFJLE1BQU07QUFDL0IsUUFBSSxFQUFFLG1CQUFtQixxQ0FBb0I7QUFDNUMsWUFBTSxJQUFJLE1BQU0sMkNBQTJDO0FBQUEsSUFDNUQ7QUFDQSxTQUFLLFlBQVksUUFBUSxZQUFZO0FBQUEsRUFDdEM7QUFBQSxFQUVBLGdCQUFnQjtBQUNmLFNBQUsseUJBQXlCO0FBRTlCLFVBQU0sV0FBNkIsQ0FBQyxlQUFlLGFBQWE7QUFDL0Qsb0JBQWMsUUFBUSxZQUFVO0FBaEZuQztBQWlGSSxhQUFHLGtCQUFPLFdBQVAsbUJBQWUsa0JBQWYsbUJBQThCLFVBQVUsU0FBUyxlQUFlO0FBQ2xFLGVBQUssc0JBQXNCO0FBQUEsUUFDN0I7QUFBQSxNQUFDLENBQUM7QUFBQSxJQUNIO0FBRUEsVUFBTSxhQUFhLFNBQVM7QUFFNUIsU0FBSyxXQUFXLElBQUksaUJBQWlCLFFBQVE7QUFFN0MsVUFBTSxTQUFTO0FBQUEsTUFDZCxXQUFXO0FBQUEsTUFDWCxTQUFTO0FBQUEsSUFDVjtBQUVBLFNBQUssU0FBUyxRQUFRLFlBQVksTUFBTTtBQUFBLEVBQ3pDO0FBQUEsRUFFQSxNQUFNLHNCQUFzQixnQ0FBMEM7QUFDckUsUUFBSSxnQ0FBZ0M7QUFDbkMsZUFBUyxpQkFBaUIsdUJBQXVCLEVBQUUsUUFBUSxDQUFDLFdBQVc7QUFDdEUsWUFBRyxPQUFPLGVBQWM7QUFBRSxpQkFBTyxjQUFjLE1BQU0sU0FBUztBQUFBLFFBQUc7QUFDakUsWUFBRyxPQUFPLGVBQWM7QUFBRSxpQkFBTyxjQUFjLE1BQU0sV0FBVztBQUFBLFFBQUc7QUFDbkUsZUFBTyxZQUFZLHVCQUF1QjtBQUFBLE1BQzNDLENBQUM7QUFBQSxJQUNGO0FBRUEsU0FBSyxnQkFBZ0IsUUFBUSxtQkFBaUI7QUFDN0MsVUFBRyxrQkFBa0I7QUFBSTtBQUN6QixZQUFNLGlCQUFpQixTQUFTLGlCQUFpQixhQUFhO0FBRTlELHFCQUFlLFFBQVEsQ0FBQyxXQUFXO0FBQ2xDLFlBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxlQUFlO0FBQUU7QUFBQSxRQUFRO0FBRWhELGVBQU8sU0FBUyxzQkFBc0I7QUFDdEMsZUFBTyxjQUFjLE1BQU0sU0FBUyxLQUFLLFNBQVMsd0JBQXdCLE1BQU07QUFDaEYsZUFBTyxjQUFjLE1BQU0sV0FBVyxLQUFLLFNBQVMsd0JBQXdCLFdBQVc7QUFBQSxNQUN4RixDQUFDO0FBQUEsSUFDRixDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsb0JBQW9CLE9BQWUsYUFBdUM7QUFFekUsVUFBTSxhQUFhLE1BQU0sUUFBUSxXQUFXO0FBRzVDLFFBQUksZUFBZSxJQUFJO0FBQ3RCLGFBQU8sQ0FBQyxPQUFPLEVBQUU7QUFBQSxJQUNsQjtBQUdBLFVBQU0sWUFBWSxNQUFNLFlBQVksV0FBVztBQUcvQyxVQUFNLHdCQUF3QixZQUFZLFlBQVk7QUFHdEQsVUFBTSxjQUFjLE1BQU0sVUFBVSxHQUFHLFVBQVU7QUFDakQsVUFBTSxZQUFZLE1BQU0sVUFBVSxxQkFBcUI7QUFFdkQsV0FBTyxDQUFDLGFBQWEsU0FBUztBQUFBLEVBQy9CO0FBQUEsRUFFQSwyQkFBMkI7QUFDMUIsVUFBTSxjQUFjO0FBQ3BCLFFBQUcsS0FBSyxTQUFTLFdBQVcsU0FBUyxXQUFXLEdBQUc7QUFDbEQsWUFBTSxDQUFDLFlBQVksUUFBUSxJQUFJLEtBQUssb0JBQW9CLEtBQUssU0FBUyxZQUFXLFdBQVc7QUFDNUYsVUFBRyxZQUFVLElBQUk7QUFDaEIsYUFBSyxrQkFBa0I7QUFBQSxVQUNyQixnQkFBZ0I7QUFBQSxRQUNqQjtBQUFBLE1BQ0YsV0FBVSxjQUFZLElBQUk7QUFDekIsYUFBSyxrQkFBa0I7QUFBQSxVQUNyQixpQ0FBaUMsZ0RBQWdEO0FBQUEsUUFDbEY7QUFBQSxNQUNGO0FBQUEsSUFDRCxPQUFPO0FBQ04sV0FBSyxrQkFBa0I7QUFBQSxRQUN0QixpQkFBaUIsS0FBSyxTQUFTLDZCQUE2QixLQUFLLFNBQVM7QUFBQSxNQUMxRTtBQUFBLElBQ0Y7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLFNBQVM7QUFFZCxVQUFNLEtBQUssYUFBYTtBQUN4QixTQUFLLGNBQWMsSUFBSSw0QkFBNEIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUdsRSxTQUFLLGNBQWM7QUFHbkIsa0JBQWMsSUFBSTtBQUVaLG9CQUFnQjtBQUd0QixTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTSxLQUFLLG1CQUFtQjtBQUFBLFFBQ3ZDLE9BQU87QUFBQSxRQUNQO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU0sS0FBSyxtQkFBbUI7QUFBQSxRQUN2QyxPQUFPO0FBQUEsUUFDUDtBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNLEtBQUssbUJBQW1CO0FBQUEsUUFDdkMsT0FBTztBQUFBLFFBQ1A7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTSxLQUFLLG1CQUFtQjtBQUFBLFFBQ3ZDLE9BQU87QUFBQSxRQUNQO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRixDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU0sS0FBSyxzQkFBc0I7QUFBQSxJQUM1QyxDQUFDO0FBdUJELFNBQUs7QUFBQTtBQUFBLE1BRUosS0FBSyxJQUFJLFVBQVUsR0FBRyxlQUFlLE9BQU8sS0FBZ0IsUUFBZ0IsU0FBMEM7QUF0UHpIO0FBd1BJLFlBQUksSUFBSTtBQUFrQjtBQUUxQixZQUFJLEVBQUUsZ0JBQWdCLGdDQUFlO0FBQ3BDLGtCQUFRLE1BQU0sa0JBQWtCO0FBQ2hDO0FBQUEsUUFDRDtBQUVBLGNBQU1DLGlCQUFnQixJQUFJO0FBQzFCLFlBQUdBLGdCQUFlO0FBRWpCO0FBQUEsUUFDRCxPQUFPO0FBRU4sY0FBSSxlQUFlO0FBQUEsUUFDcEI7QUFFQSxjQUFNLGdCQUFnQixJQUFJO0FBRzFCLGNBQU0sU0FBUSxnQ0FBSyxpQkFBTCxtQkFBbUI7QUFDakMsWUFBSSxTQUFTLE1BQU0sU0FBUyxHQUFHO0FBQzlCLGdCQUFNLEtBQUssWUFBWSxPQUFPLFFBQVEsTUFBTSxvQ0FBZ0Q7QUFBQSxRQUM3RixPQUFPO0FBQ04sa0JBQVEsTUFBTSxrQkFBa0I7QUFBQSxRQUNqQztBQUFBLE1BQ0QsQ0FBQztBQUFBLElBQ0Y7QUFFQSxTQUFLO0FBQUE7QUFBQSxNQUVKLEtBQUssSUFBSSxVQUFVLEdBQUcsZ0JBQWdCLE9BQU8sS0FBcUIsUUFBZ0IsU0FBMEM7QUFFM0gsWUFBSSxJQUFJO0FBQWtCO0FBRTFCLFlBQUksRUFBRSxnQkFBZ0IsZ0NBQWU7QUFDcEMsa0JBQVEsTUFBTSxrQkFBa0I7QUFDaEM7QUFBQSxRQUNEO0FBRUEsY0FBTSxnQkFBZ0IsSUFBSTtBQUMxQixZQUFJLGVBQWU7QUFDbEIsZ0JBQU0sUUFBUSxjQUFjO0FBRzVCLGNBQUksU0FBUyxNQUFNLFNBQVMsR0FBRztBQUM5QixnQkFBSSxlQUFlO0FBR25CLGtCQUFNLDBCQUEwQjtBQUNoQyxrQkFBTSxLQUFLLFlBQVksT0FBTyxRQUFRLE1BQU0sc0NBQWtEO0FBQUEsVUFFL0YsT0FBTztBQUFBLFVBRVA7QUFBQSxRQUNEO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUVBLFNBQUs7QUFBQSxNQUNKLEtBQUssSUFBSSxNQUFNLEdBQUcsVUFBVSxPQUFPLFNBQXdCLFlBQW9CO0FBQzlFLFlBQUcsQ0FBQyxLQUFLLFNBQVMsNEJBQTRCO0FBQUU7QUFBQSxRQUFPO0FBRXZELFlBQUcsS0FBSyx1QkFBdUI7QUFDOUIsZ0JBQU0saUJBQXNCLFlBQU0sT0FBTztBQUN6QyxjQUFHLGVBQWUsT0FBTyxPQUFPO0FBQUU7QUFBQSxVQUFPO0FBRXpDLGdCQUFNLDBCQUEwQixLQUFLLG9CQUFvQixjQUFjO0FBQ3ZFLGNBQUcsQ0FBQyx5QkFBeUI7QUFBRTtBQUFBLFVBQU87QUFFdEMsY0FBRyxNQUFZLHFCQUFxQix3QkFBd0IscUJBQXFCLEdBQUc7QUFFbkYsa0JBQU0sMEJBQTBCLEtBQUssb0JBQXlCLFlBQU0sUUFBUSxJQUFJLENBQUM7QUFDakYsZ0JBQUcsQ0FBQyx5QkFBeUI7QUFBRTtBQUFBLFlBQU87QUFFdEMsa0JBQU1DLFdBQWUsZUFBUyxLQUFLLFdBQVUsd0JBQXdCLHFCQUFxQjtBQUMxRixrQkFBTSxVQUFlLGVBQVMsS0FBSyxXQUFVLHdCQUF3QixxQkFBcUI7QUFDMUYsZ0JBQUk7QUFDSCxtQkFBSyx3QkFBd0I7QUFDN0Isb0JBQU0sS0FBSyxXQUFXQSxVQUFRLE9BQU87QUFBQSxZQUN0QyxTQUFTLE9BQVA7QUFDRCxvQkFBTSxNQUFNO0FBQ1osc0JBQVEsTUFBTSxHQUFHO0FBQ2pCLHNCQUFRLE1BQU0sK0JBQThCQSxRQUFPO0FBQ25ELHNCQUFRLE1BQU0sMEJBQXlCLE9BQU87QUFDOUMsc0JBQVEsTUFBTSxjQUFjLEtBQUs7QUFDakMsa0JBQUksd0JBQU8sTUFBSSxHQUFHO0FBQUEsWUFDbkIsVUFBRTtBQUNELG1CQUFLLHdCQUF3QjtBQUFBLFlBQzlCO0FBQUEsVUFDRDtBQUFBLFFBQ0Q7QUFBQSxNQUNELENBQUM7QUFBQSxJQUNGO0FBRUEsU0FBSztBQUFBLE1BQ0osS0FBSyxJQUFJLE1BQU0sR0FBRyxVQUFVLE9BQU8sU0FBd0I7QUFDMUQsWUFBRyxDQUFDLEtBQUssU0FBUyw0QkFBNEI7QUFBRTtBQUFBLFFBQU87QUFJdkQsWUFBRyxDQUFDLEtBQUssU0FBUyxXQUFXLFNBQVMsYUFBYSxHQUFHO0FBQUU7QUFBQSxRQUFPO0FBRS9ELFlBQUcsS0FBSyx1QkFBdUI7QUFDOUIsZ0JBQU0sY0FBbUIsWUFBTSxLQUFLLElBQUk7QUFDeEMsY0FBRyxZQUFZLE9BQU8sT0FBTztBQUFFO0FBQUEsVUFBTztBQUV0QyxnQkFBTSx1QkFBdUIsS0FBSyxvQkFBb0IsV0FBVztBQUNqRSxjQUFHLENBQUMsc0JBQXNCO0FBQUU7QUFBQSxVQUFPO0FBRW5DLGNBQUcsTUFBWSxxQkFBcUIscUJBQXFCLHFCQUFxQixHQUFHO0FBQ2hGLGtCQUFNLFFBQVEsSUFBSSw0QkFBNEIsS0FBSyxLQUFLLE1BQU0scUJBQXFCLHFCQUFxQjtBQUN4RyxrQkFBTSxLQUFLO0FBQ1gsa0JBQU0sU0FBUyxNQUFNLE1BQU07QUFDM0IsZ0JBQUksQ0FBQztBQUFRO0FBRWIsa0JBQU0sV0FBZ0IsZUFBUyxLQUFLLFdBQVUscUJBQXFCLHFCQUFxQjtBQUV4RixnQkFBSTtBQUNILG1CQUFLLHdCQUF3QjtBQUM3QixvQkFBTSxLQUFLLFVBQVUsUUFBUTtBQUFBLFlBQzlCLFNBQVMsT0FBUDtBQUNELG9CQUFNLE1BQU07QUFDWixzQkFBUSxNQUFNLE1BQU0sS0FBSyxRQUFRO0FBQ2pDLHNCQUFRLE1BQU0sY0FBYyxLQUFLO0FBQ2pDLGtCQUFJLHdCQUFPLE1BQUksR0FBRztBQUFBLFlBQ25CLFVBQUU7QUFDRCxtQkFBSyx3QkFBd0I7QUFBQSxZQUM5QjtBQUFBLFVBQ0Q7QUFBQSxRQUNEO0FBQUEsTUFDRCxDQUFDO0FBQUEsSUFDRjtBQUVBLFlBQVEsSUFBSSxtQ0FBbUM7QUFBQSxFQUNoRDtBQUFBLEVBRUEsV0FBVztBQUNKLG9CQUFnQjtBQUNoQix1QkFBbUI7QUFDekIsUUFBRyxLQUFLLFVBQVM7QUFDaEIsV0FBSyxTQUFTLFdBQVc7QUFBQSxJQUMxQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFBQSxFQUVBLE1BQU0sV0FBVyxhQUFxQixhQUFvQztBQUN6RSxRQUFJO0FBQ0gsWUFBTSxPQUFPLEtBQUssSUFBSSxNQUFNLHNCQUFzQixXQUFXO0FBQzdELFVBQUksZ0JBQWdCLGdDQUFlO0FBQ2xDLGNBQU0sS0FBSyxJQUFJLFlBQVksV0FBVyxNQUFNLFdBQVc7QUFDdkQsWUFBSSx3QkFBTyx5Q0FBeUM7QUFBQSxNQUNyRCxPQUFPO0FBQ04sWUFBSSx3QkFBTyw2REFBNkQ7QUFBQSxNQUN6RTtBQUFBLElBQ0QsU0FBUyxPQUFQO0FBQ0QsWUFBTSxNQUFNO0FBQ1osY0FBUSxNQUFNLE1BQUksS0FBSyxLQUFLO0FBQzVCLFVBQUksd0JBQU8sTUFBSSxHQUFHO0FBQUEsSUFDbkI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLFVBQVUsVUFBaUM7QUFDaEQsUUFBSTtBQUNILFlBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUMxRCxVQUFJLGdCQUFnQixnQ0FBZTtBQUNsQyxjQUFNLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxZQUFZLFFBQVE7QUFDdkQsWUFBSSx3QkFBTyx1REFBdUQ7QUFBQSxNQUNuRSxPQUFPO0FBQ04sWUFBSSx3QkFBTyw2REFBNkQ7QUFBQSxNQUN6RTtBQUFBLElBQ0QsU0FBUyxPQUFQO0FBQ0QsWUFBTSxNQUFNO0FBQ1osY0FBUSxNQUFNLE1BQUksS0FBSyxLQUFLO0FBQzVCLFVBQUksd0JBQU8sTUFBSSxHQUFHO0FBQUEsSUFDbkI7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLFlBQVksT0FBaUIsUUFBZ0IsTUFBb0IsZUFBd0IsWUFBaUM7QUFDL0gsVUFBTSxvQkFBb0IsS0FBSyxvQkFBb0I7QUFDbkQsUUFBRyxDQUFDLG1CQUFrQjtBQUFFO0FBQUEsSUFBTztBQUUvQixVQUFNLEVBQUUsdUJBQXVCLHNCQUFzQixJQUFJO0FBRXpELFFBQUk7QUFDSixRQUFJO0FBQ0osWUFBTyxZQUNQO0FBQUEsTUFDQTtBQUNDLDhCQUFvQixLQUFLLFNBQVM7QUFDbEMsa0NBQXdCLEtBQUssU0FBUztBQUN0QztBQUFBLE1BQ0Q7QUFDQyw4QkFBb0IsS0FBSyxTQUFTO0FBQ2xDLGtDQUF3QixLQUFLLFNBQVM7QUFDdEM7QUFBQSxJQUNEO0FBRUEsUUFBSSxjQUFjLEtBQUssU0FBUztBQUNoQyxVQUFNLGtCQUFrQixLQUFLLFNBQVM7QUFFdEMsUUFBSSxpQkFBaUIsb0RBQW9ELDBDQUFvQztBQUM1RyxZQUFNLFFBQVEsSUFBSSxzQkFBc0IsS0FBSyxLQUFLLE1BQU0seUJBQXlCLGVBQWU7QUFDaEcsWUFBTSxLQUFLO0FBQ1gsWUFBTSxTQUFTLE1BQU0sTUFBTTtBQUMzQixVQUFJLFVBQVU7QUFBTTtBQUNwQiw0QkFBc0IsT0FBTztBQUM3QixjQUFRLFlBQVk7QUFBQSxRQUNuQjtBQUNDLGNBQUksT0FBTyxnQkFBZ0I7QUFDMUIsaUJBQUssU0FBUyw2QkFBNkI7QUFBQSxVQUM1QztBQUNBLGVBQUssU0FBUyxpQ0FBaUM7QUFDL0M7QUFBQSxRQUNEO0FBQ0MsY0FBSSxPQUFPLGdCQUFnQjtBQUMxQixpQkFBSyxTQUFTLDRCQUE0QjtBQUFBLFVBQzNDO0FBQ0EsZUFBSyxTQUFTLGdDQUFnQztBQUM5QztBQUFBLE1BQ0Y7QUFDQSxvQkFBYyxPQUFPO0FBQ3JCLFVBQUksT0FBTyxnQkFBZ0I7QUFDMUIsYUFBSyxTQUFTLHFCQUFxQjtBQUFBLE1BQ3BDO0FBQ0EsV0FBSyxTQUFTLHlCQUF5QjtBQUN2QyxZQUFNLEtBQUssYUFBYTtBQUFBLElBQ3pCO0FBRUEsVUFBTSxVQUFXO0FBRWpCLFVBQU0saUJBQWlCO0FBQUEsTUFDdEIsT0FBTztBQUFBLE1BQ1AsUUFBUTtBQUFBLElBQ1Q7QUFFQSxTQUFLLDRCQUE0QixPQUFPLHVCQUF1Qix1QkFBdUIsUUFBUSxNQUFNLGNBQWM7QUFBQSxFQUNuSDtBQUFBLEVBRUEsb0JBQW9CLGVBQWtDLE1BQW1DO0FBQ3hGLFFBQUk7QUFFSCxVQUFHLENBQUMsY0FBYztBQUNqQix3QkFBaUIsTUFBaUI7QUFDakMsZ0JBQU0sYUFBYSxLQUFLLElBQUksVUFBVSxjQUFjO0FBQ3BELGNBQUcsY0FBWSxNQUFNO0FBQ3BCLGtCQUFNLElBQUksTUFBTSwwQ0FBMEM7QUFBQSxVQUMzRDtBQUNBLGlCQUFZLFlBQU0sV0FBVyxJQUFJO0FBQUEsUUFDbEMsR0FBRztBQUFBLE1BQ0o7QUFFQSxVQUFJLENBQUMsZ0JBQWdCLGFBQWEsUUFBUSxPQUFPO0FBQ2hELGNBQU0sSUFBSSxNQUFNLDZCQUE2QjtBQUFBLE1BQzlDO0FBRUEsVUFBRyxDQUFDLEtBQUs7QUFBVyxlQUFPO0FBRTNCLFlBQU0saUJBQXNCLFdBQUssS0FBSyxXQUFVLGFBQWEsR0FBRztBQUNoRSxZQUFNLFdBQVcsYUFBYTtBQUU5QixVQUFJLGdCQUFnQjtBQUNwQixjQUFPLEtBQUssU0FBUyxrQkFBa0I7QUFBQSxRQUN2QztBQUNDLDBCQUFnQixLQUFLO0FBQ3JCO0FBQUEsUUFDRDtBQUNDLDBCQUFnQjtBQUNoQjtBQUFBLE1BQ0Q7QUFFQSxZQUFNLGVBQWUsS0FBSyxTQUFTLFdBQVcsUUFBUSxtQkFBbUIsUUFBUTtBQUVqRixZQUFNLHdCQUE2QixXQUFLLGVBQWMsWUFBWTtBQUVsRSxhQUFPO0FBQUEsUUFDTjtBQUFBLFFBQ0EsdUJBQXVCO0FBQUEsTUFDeEI7QUFBQSxJQUNELFNBQVMsT0FBUDtBQUNELFVBQUksaUJBQWlCLE9BQU87QUFDM0IsZ0JBQVEsTUFBTSxNQUFNLE9BQU87QUFDM0IsWUFBSSx3QkFBTyxNQUFNLE9BQU87QUFBQSxNQUN6QixPQUFPO0FBRU4sZ0JBQVEsTUFBTSw4QkFBOEIsS0FBSztBQUNqRCxZQUFJLHdCQUFPLDJCQUEyQjtBQUFBLE1BQ3ZDO0FBQ0EsYUFBTztBQUFBLElBQ1I7QUFBQSxFQUNEO0FBQUEsRUFFQSxNQUFNLG1CQUFtQixnQkFBeUM7QUFDakUsVUFBTSxlQUFlLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw2QkFBWTtBQUN4RSxVQUFNLFNBQVMsNkNBQWM7QUFFN0IsUUFBRyxDQUFDLFFBQ0o7QUFDQyxZQUFNLE1BQU07QUFDWixjQUFRLE1BQU0sR0FBRztBQUNqQixVQUFJLHdCQUFPLEdBQUc7QUFDZDtBQUFBLElBQ0Q7QUFFQSxVQUFNLG9CQUFvQixLQUFLLG9CQUFvQjtBQUNuRCxRQUFHLENBQUMsbUJBQWtCO0FBQUU7QUFBQSxJQUFPO0FBRS9CLFVBQU0sRUFBRSx1QkFBdUIsdUJBQXVCLGNBQWMsSUFBSTtBQUV4RSxVQUFNLFFBQVEsU0FBUyxjQUFjLE9BQU87QUFDNUMsVUFBTSxPQUFPO0FBQ2IsVUFBTSxXQUFXO0FBRWpCLFVBQU0sV0FBVyxPQUFPLE1BQWE7QUFDcEMsWUFBTSxTQUFTLEVBQUU7QUFDakIsWUFBTSxRQUFRLE9BQU87QUFFckIsVUFBSSxTQUFTLE1BQU0sU0FBUyxHQUFHO0FBRTlCLGNBQU0sS0FBSyw0QkFBNEIsT0FBTyx1QkFBdUIsZUFBZSxRQUFRLGNBQWMsY0FBYztBQUFBLE1BQ3pILE9BQU87QUFDTixjQUFNLE1BQU07QUFDWixnQkFBUSxNQUFNLEdBQUc7QUFDakIsWUFBSSx3QkFBTyxHQUFHO0FBQUEsTUFDZjtBQUFBLElBQ0Q7QUFDQSxVQUFNLE1BQU07QUFBQSxFQUNiO0FBQUEsRUFFQSxNQUFNLDRCQUE0QixlQUF5Qix1QkFBK0IsdUJBQStCLFFBQWdCLE1BQW9CLGdCQUF5QztBQUVyTSxVQUFZLHNCQUFzQixxQkFBcUI7QUFFdkQsVUFBTSxTQUFTLE9BQU8sVUFBVTtBQUVoQyxRQUFJLGNBQWMsU0FBTyxLQUFLLEtBQUssU0FBUyxrREFBNEQ7QUFFdkcsVUFBSSxPQUFPLE9BQU8sR0FBRztBQUVwQixlQUFPLGFBQWEsTUFBTSxNQUFNO0FBRWhDLGVBQU8sVUFBVSxFQUFFLE1BQU0sT0FBTyxPQUFPLEdBQUcsSUFBSSxFQUFFLENBQUM7QUFBQSxNQUNsRDtBQUFBLElBQ0Q7QUFFQSxVQUFNLGdCQUFnQixjQUFjLFNBQU87QUFFM0MsVUFBTSxRQUFRLE1BQU0sS0FBSyxhQUFhLEVBQUUsSUFBSSxPQUFPLGlCQUFzQztBQUN4RixZQUFNLG1CQUFtQixhQUFhO0FBQ3RDLFVBQUksZUFBb0I7QUFBQSxRQUFLO0FBQUEsUUFDekIsTUFBWSxxQkFBcUIsS0FBSyxTQUFTLGdCQUFlLEtBQUssU0FBUyxZQUFXLGdCQUFnQjtBQUFBLE1BQUM7QUFHNUcsWUFBTSxlQUFlLE1BQVksZ0JBQWdCLFlBQVk7QUFFN0QsVUFBRyxnQkFBZ0IsTUFBWSxpQkFBaUIsa0JBQWlCLFlBQVksR0FBRztBQUMvRSxlQUFPO0FBQUEsTUFDUjtBQUdBLFVBQUcsQ0FBQyxLQUFLO0FBQVcsZUFBTztBQUMzQixZQUFNLFVBQVUsTUFBWSxjQUFjLEtBQUssV0FBVSxnQkFBZ0I7QUFDekUsVUFBRyxTQUNIO0FBQ0MsY0FBTSxRQUFRLElBQUksMkJBQTJCLEtBQUssS0FBSyxNQUFNLEtBQUssV0FBVyxTQUFTLGVBQWUsTUFBTTtBQUMzRyxjQUFNLEtBQUs7QUFDWCxjQUFNLFNBQVMsTUFBTSxNQUFNO0FBQzNCLFlBQUcsVUFBUSxNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFNO0FBQ2hDLGdCQUFPLFFBQVE7QUFBQSxVQUNmO0FBQ0MsbUJBQU87QUFDUDtBQUFBLFVBQ0Q7QUFDQywyQkFBZTtBQUNmO0FBQUEsVUFDRDtBQUNDLDJCQUFlO0FBQ2Y7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUdBLFVBQUksZ0JBQWdCLGVBQWUsNkJBQWlDO0FBQ25FLGNBQU0sUUFBUSxJQUFJLHFCQUFxQixLQUFLLEtBQUssTUFBTSxrQkFBa0IsWUFBWTtBQUNyRixjQUFNLEtBQUs7QUFDWCxjQUFNLFNBQVMsTUFBTSxNQUFNO0FBQzNCLFlBQUcsVUFBUSxNQUFNO0FBQUUsaUJBQU87QUFBQSxRQUFNO0FBQ2hDLGdCQUFPLFFBQVE7QUFBQSxVQUNmO0FBRUM7QUFBQSxVQUNEO0FBQ0MsMkJBQWUsTUFBWSxnQkFBZ0IsWUFBWTtBQUN2RCxnQkFBRyxnQkFBYyxNQUFNO0FBQUUscUJBQU87QUFBQSxZQUFNO0FBQ3RDO0FBQUEsVUFDRDtBQUNDLG1CQUFPO0FBQ1A7QUFBQSxRQUNEO0FBQUEsTUFDRDtBQUVBLFVBQUk7QUFDSCxnQkFBUSxlQUFlLFFBQVE7QUFBQSxVQUM5QjtBQUNDLGtCQUFNLFdBQUFDLFNBQUcsT0FBTyxrQkFBaUIsWUFBWTtBQUM3QyxtQkFBTztBQUFBLFVBQ1I7QUFDQyxrQkFBTSxXQUFBQSxTQUFHLFNBQVMsa0JBQWlCLFlBQVk7QUFDL0MsbUJBQU87QUFBQSxVQUNSO0FBQUEsVUFDQTtBQUNDLG1CQUFPO0FBQUEsUUFDVDtBQUFBLE1BQ0QsU0FBUyxPQUFQO0FBQ0QsY0FBTSxNQUFNO0FBQ1osWUFBSSx3QkFBTyxNQUFNLEdBQUc7QUFDcEIsZ0JBQVEsTUFBTyxNQUFNLEtBQUssa0JBQWtCLEtBQUs7QUFDakQsZUFBTztBQUFBLE1BQ1I7QUFBQSxJQUNELENBQUM7QUFHRCxVQUFNLFVBQVUsTUFBTSxRQUFRLElBQUksS0FBSztBQUd2QyxVQUFNLFVBQVU7QUFDaEIsWUFBUSxRQUFRLENBQUMsa0JBQWlDLFVBQWtCO0FBQ25FLFVBQUksa0JBQWtCO0FBQ3JCLGFBQUssbUJBQW1CLHVCQUF1QixrQkFBa0IsUUFBUSxNQUFNLGdCQUFnQixnQkFBZ0IsUUFBTSxJQUFJLENBQUM7QUFBQSxNQUMzSDtBQUFBLElBQ0QsQ0FBQztBQUVELFFBQUcsVUFBUSxHQUFHO0FBQ2IsVUFBSSxZQUFZO0FBQ2hCLGNBQU8sZUFBZSxRQUN0QjtBQUFBLFFBQ0E7QUFDQyxzQkFBWTtBQUNaO0FBQUEsUUFDRDtBQUNDLHNCQUFZO0FBQ1o7QUFBQSxNQUNEO0FBQ0EsVUFBSSx3QkFBTyxHQUFHLDBCQUEwQiwwQ0FBMEM7QUFBQSxJQUNuRjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sd0JBQXdCO0FBQzdCLFVBQU0sb0JBQW9CLEtBQUssb0JBQW9CO0FBQ25ELFFBQUcsQ0FBQyxtQkFBa0I7QUFBRTtBQUFBLElBQU87QUFFL0IsVUFBTSxFQUFFLHNCQUFzQixJQUFJO0FBRWxDLFFBQUcsQ0FBRSxNQUFZLHFCQUFxQixxQkFBcUIsR0FDM0Q7QUFDQyxZQUFNLE1BQUk7QUFDVixjQUFRLE1BQU0sTUFBSSxLQUFLLHFCQUFxQjtBQUM1QyxVQUFJLHdCQUFPLE1BQUksR0FBRztBQUFBLElBQ25CO0FBSUEsVUFBTSxFQUFFLE1BQU0sSUFBSSxRQUFRLFVBQVU7QUFFcEMsVUFBTSxTQUFTLGtCQUFrQixxQkFBcUI7QUFBQSxFQUN2RDtBQUFBLEVBRUEsbUJBQW1CLHVCQUErQixrQkFBMEIsUUFBZ0IsTUFBb0IsZ0JBQXlDLFNBQWlCO0FBR3pLLFVBQU0sV0FBZSxZQUFZLGdCQUFnQjtBQUVqRCxRQUFJO0FBQ0osWUFBTyxLQUFLLFNBQVMsWUFBWTtBQUFBLE1BQ2pDO0FBQ0MsdUJBQWtCLGVBQVMsdUJBQXVCLGdCQUFnQjtBQUNsRTtBQUFBLE1BQ0Q7QUFBQSxNQUNBO0FBQ0MsdUJBQWtCLGVBQVMsS0FBSyxXQUFVLGdCQUFnQjtBQUMxRDtBQUFBLElBQ0Q7QUFFQSxRQUFJLFNBQVM7QUFDYixRQUFJLFVBQVU7QUFDZCxRQUFJLGdCQUFnQjtBQUNwQixRQUFHLFVBQVEsR0FBRztBQUNiLGNBQVEsS0FBSyxTQUFTLHlCQUF5QjtBQUFBLFFBQzlDO0FBQ0MsbUJBQVM7QUFDVCxvQkFBVTtBQUNWO0FBQUEsUUFDRDtBQUNDLG1CQUFTLEdBQUc7QUFDWixvQkFBVTtBQUNWO0FBQUEsUUFDRDtBQUNDLGNBQUcsVUFBUSxHQUFFO0FBRVoscUJBQVM7QUFBQSxVQUNWO0FBQ0E7QUFBQSxNQUNGO0FBQUEsSUFDRDtBQUNBLFFBQUcsS0FBSyxTQUFTLG1CQUFtQjtBQUNuQyxzQkFBZ0IsTUFBTTtBQUFBLElBQ3ZCO0FBQ0EsUUFBRyxlQUFlLE9BQU87QUFDeEIsZUFBUyxTQUFTO0FBQUEsSUFDbkI7QUFFQSxVQUFNLFdBQVcsU0FBUyxPQUFPLGVBQWUsZ0JBQWdCLE9BQU87QUFFdkUsVUFBTSxTQUFTLE9BQU8sVUFBVTtBQUdoQyxXQUFPLGFBQWEsVUFBVSxNQUFNO0FBRXBDLFFBQUcsV0FBUyxHQUFHO0FBQ2QsVUFBRyxLQUFLLFNBQVMsbUJBQW1CO0FBRW5DLGNBQU0saUJBQWlCO0FBQUEsVUFDdEIsTUFBTSxPQUFPO0FBQUEsVUFDYixJQUFJLE9BQU8sS0FBSyxhQUFhLFNBQVMsT0FBTyxTQUFTO0FBQUEsUUFDdkQ7QUFDQSxjQUFNLGVBQWU7QUFBQSxVQUNwQixNQUFNLE9BQU87QUFBQSxVQUNiLElBQUksZUFBZSxLQUFLLFNBQVM7QUFBQSxRQUNsQztBQUdBLGVBQU8sYUFBYSxnQkFBZ0IsWUFBWTtBQUFBLE1BQ2pELE9BQU87QUFDTixjQUFNLGVBQWU7QUFBQSxVQUNyQixNQUFNLE9BQU87QUFBQSxVQUNaLElBQUksT0FBTyxLQUFLLFNBQVM7QUFBQSxRQUMxQjtBQUdBLGVBQU8sVUFBVSxZQUFZO0FBQUEsTUFDOUI7QUFBQSxJQUNELE9BQ0E7QUFDQyxZQUFNLGVBQWU7QUFBQSxRQUNyQixNQUFNLE9BQU87QUFBQSxRQUNaLElBQUksT0FBTyxLQUFLLFNBQVM7QUFBQSxNQUMxQjtBQUdBLGFBQU8sVUFBVSxZQUFZO0FBQUEsSUFDOUI7QUFBQSxFQUNEO0FBQ0Q7QUFFQSxJQUFNLDhCQUFOLGNBQTBDLGtDQUFpQjtBQUFBLEVBRzFELFlBQVksS0FBVSxRQUEyQjtBQUNoRCxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFFeEIsZ0JBQVksTUFBTTtBQUVsQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBRTlFLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFckQsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsMERBQTBELEVBQ2xFLFFBQVEsb1BBQW9QLEVBQzVQLFlBQVksY0FBWTtBQUN4QixlQUFTLHFDQUFxQyxlQUFlO0FBQzdELGVBQVMsNkJBQWlDLE1BQU07QUFDaEQsZUFBUyw2QkFBaUMsTUFBTTtBQUNoRCxlQUFTLFNBQVMsS0FBSyxPQUFPLFNBQVMsMEJBQTBCLEVBQ2hFLFNBQVMsT0FBTyxVQUFrQjtBQUNsQyxZQUFJLFNBQVMsa0JBQWtCO0FBQzlCLGVBQUssT0FBTyxTQUFTLDZCQUE2QjtBQUNsRCxjQUFHLG9DQUFvQztBQUN0QyxpQkFBSyxPQUFPLFNBQVMsaUNBQWlDO0FBQUEsVUFDdkQ7QUFDQSxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ2hDLE9BQU87QUFDTixrQkFBUSxNQUFNLCtCQUErQixLQUFLO0FBQUEsUUFDbkQ7QUFBQSxNQUNGLENBQUM7QUFBQSxJQUFDLENBQUM7QUFFSixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSx5REFBeUQsRUFDakUsUUFBUSxpUEFBaVAsRUFDelAsWUFBWSxjQUFZO0FBQ3hCLGVBQVMscUNBQXFDLGVBQWU7QUFDN0QsZUFBUyw2QkFBaUMsTUFBTTtBQUNoRCxlQUFTLDZCQUFpQyxNQUFNO0FBQ2hELGVBQVMsU0FBUyxLQUFLLE9BQU8sU0FBUyx5QkFBeUIsRUFDL0QsU0FBUyxPQUFPLFVBQWtCO0FBQ2xDLFlBQUksU0FBUyxrQkFBa0I7QUFDOUIsZUFBSyxPQUFPLFNBQVMsNEJBQTRCO0FBQ2pELGNBQUcsb0NBQW9DO0FBQ3RDLGlCQUFLLE9BQU8sU0FBUyxnQ0FBZ0M7QUFBQSxVQUN0RDtBQUNBLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsT0FBTztBQUNOLGtCQUFRLE1BQU0sK0JBQStCLEtBQUs7QUFBQSxRQUNuRDtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLDJCQUEyQixFQUNuQyxRQUFRLHFQQUFxUCxFQUM3UCxZQUFZLGNBQVk7QUFDeEIsZUFBUyxxQ0FBK0IsZUFBZTtBQUN2RCxlQUFTLDJCQUEwQixLQUFLO0FBQ3hDLGVBQVMseUJBQXlCLElBQUk7QUFDdEMsZUFBUyxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUN4RCxTQUFTLE9BQU8sVUFBa0I7QUFDbEMsWUFBSSxPQUFPLE9BQU8sVUFBVSxFQUFFLFNBQVMsS0FBbUIsR0FBRztBQUM1RCxlQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsY0FBRyxvQ0FBOEI7QUFDaEMsaUJBQUssT0FBTyxTQUFTLHlCQUF5QjtBQUFBLFVBQy9DO0FBQ0EsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxPQUFPO0FBQ04sa0JBQVEsTUFBTSw2QkFBNkIsS0FBSztBQUFBLFFBQ2pEO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFBQyxDQUFDO0FBRUosUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsMkJBQTJCLEVBQ25DLFFBQVEsNkdBQTZHLEVBQ3JILFlBQVksY0FBWTtBQUN4QixlQUFTLHFDQUE2QyxlQUFlO0FBQ3JFLGVBQVMscUNBQTZDLGVBQWU7QUFDckUsZUFBUyxpQ0FBMkMsUUFBUTtBQUM1RCxlQUFTLFNBQVMsS0FBSyxPQUFPLFNBQVMsdUJBQXVCLEVBQzdELFNBQVMsT0FBTyxVQUFrQjtBQUNsQyxZQUFJLE9BQU8sT0FBTyx3QkFBd0IsRUFBRSxTQUFTLEtBQWlDLEdBQUc7QUFDeEYsZUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsT0FBTztBQUNOLGtCQUFRLE1BQU0sNkJBQTZCLEtBQUs7QUFBQSxRQUNqRDtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLGtEQUFrRCxFQUMxRCxRQUFRLGtIQUFrSCxFQUMxSCxVQUFVLFlBQVUsT0FDbkIsU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsRUFDL0MsU0FBUyxPQUFPLFVBQW1CO0FBQ25DLFdBQUssT0FBTyxTQUFTLG9CQUFvQjtBQUN6QyxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBRUgsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUV0RSxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSx1Q0FBdUMsRUFDL0MsUUFBUSxxREFBcUQsRUFDN0QsWUFBWSxjQUFZO0FBQ3hCLGVBQVMsK0JBQWtDLGNBQWM7QUFDekQsZUFBUyw2QkFBaUMsNkJBQTZCO0FBQ3ZFLGVBQVMsU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsRUFDdEQsU0FBUyxPQUFPLFVBQWtCO0FBQ2xDLFlBQUksT0FBTyxPQUFPLGdCQUFnQixFQUFFLFNBQVMsS0FBeUIsR0FBRztBQUN4RSxlQUFLLE9BQU8sU0FBUyxtQkFBbUI7QUFDeEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNoQyxPQUFPO0FBQ04sa0JBQVEsTUFBTSw2QkFBNkIsS0FBSztBQUFBLFFBQ2pEO0FBQUEsTUFDRixDQUFDO0FBQUEsSUFBQyxDQUFDO0FBRUosUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsc0ZBQXNGLEVBQzlGLFFBQVEsa0dBQWtHLEVBQzFHLFFBQVEsVUFBUTtBQUNoQixXQUFLLGVBQWUsbUJBQW1CO0FBQ3ZDLFdBQUssU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVO0FBQzdDLFdBQUssU0FBUyxPQUFPLFVBQWtCO0FBQ3RDLGFBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUMvQixhQUFLLE9BQU8seUJBQXlCO0FBQ3JDLGNBQU0sS0FBSyxPQUFPLHNCQUFzQixJQUFJO0FBQUEsTUFDOUMsQ0FBQztBQUFBLElBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLHlCQUF5QixFQUNqQyxRQUFRLDBEQUEwRCxFQUNsRSxZQUFZLGNBQVk7QUFDeEIsZUFBUyxxQ0FBK0IsaURBQWtEO0FBQzFGLGVBQVMscUNBQStCLGtEQUFtRDtBQUMzRixlQUFTLFNBQVMsS0FBSyxPQUFPLFNBQVMsVUFBVSxFQUNoRCxTQUFTLE9BQU8sVUFBa0I7QUFDbEMsWUFBSSxPQUFPLE9BQU8sVUFBVSxFQUFFLFNBQVMsS0FBbUIsR0FBRztBQUM1RCxlQUFLLE9BQU8sU0FBUyxhQUFhO0FBQ2xDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDaEMsT0FBTztBQUNOLGtCQUFRLE1BQU0sNkJBQTZCLEtBQUs7QUFBQSxRQUNqRDtBQUFBLE1BQ0YsQ0FBQztBQUFBLElBQUMsQ0FBQztBQUVKLFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLG1DQUFtQyxFQUMzQyxRQUFRLGVBQWUsQ0FBQyxTQUFTO0FBQ2pDLFdBQUssV0FBVyw4RkFBOEY7QUFDOUcsV0FBSyxTQUFTLElBQUksRUFDakIsU0FBUyxNQUFLLEVBQUMsTUFBTSxnREFBK0MsQ0FBQyxFQUNyRSxTQUFTLE1BQUssRUFBQyxNQUFNLCtCQUE4QixDQUFDLEVBQ3BELFNBQVMsTUFBSyxFQUFDLE1BQU0sc0RBQXFELENBQUMsRUFDM0UsU0FBUyxNQUFLLEVBQUMsTUFBTSw2Q0FBNEMsQ0FBQztBQUFBLElBQ3BFLENBQUMsQ0FBQyxFQUNELFFBQVEsVUFBUTtBQUNoQixXQUFLLGVBQWUsdUJBQXVCO0FBQzNDLFdBQUssU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjO0FBQ2pELFdBQUssU0FBUyxPQUFPLFVBQWtCO0FBQ3RDLFlBQUcsTUFBTSxLQUFLLEtBQUcsSUFBSTtBQUNwQixrQkFBUTtBQUFBLFFBQ1Q7QUFDQSxhQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUFDLENBQUM7QUFFSixRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsZUFBZSxDQUFDLFNBQVM7QUFDaEMsV0FBSyxXQUFXLG1DQUFtQztBQUNuRCxXQUFLLFNBQVMsS0FBSztBQUFBLFFBQ2xCLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxNQUNQLENBQUM7QUFDRCxXQUFLLFdBQVcsVUFBVTtBQUFBLElBQUMsQ0FBQyxDQUFDLEVBQzlCLFFBQVEsVUFBUTtBQUNoQixXQUFLLGVBQWUsbUJBQW1CO0FBQ3ZDLFdBQUssU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVO0FBQzdDLFdBQUssU0FBUyxPQUFPLFVBQWtCO0FBQ3RDLGFBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsY0FBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLE1BQ2pDLENBQUM7QUFBQSxJQUFDLENBQUM7QUFFSixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRTVELFFBQUkseUJBQVEsV0FBVyxFQUNyQixRQUFRLGtGQUFrRixFQUMxRixRQUFRLHFPQUNpRyxFQUN6RyxVQUFVLFlBQVUsT0FDbkIsU0FBUyxLQUFLLE9BQU8sU0FBUywwQkFBMEIsRUFDeEQsU0FBUyxPQUFPLFVBQW1CO0FBQ25DLFdBQUssT0FBTyxTQUFTLDZCQUE2QjtBQUNsRCxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDakMsQ0FBQyxDQUFDO0FBRUgsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsb0ZBQW9GLEVBQzVGLFFBQVEsMFFBRXlGLEVBQ2pHLFVBQVUsWUFBVSxPQUNuQixTQUFTLEtBQUssT0FBTyxTQUFTLDBCQUEwQixFQUN4RCxTQUFTLE9BQU8sVUFBbUI7QUFDbkMsV0FBSyxPQUFPLFNBQVMsNkJBQTZCO0FBQ2xELFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNqQyxDQUFDLENBQUM7QUFFSCxRQUFJLHlCQUFRLFdBQVcsRUFDckIsUUFBUSx5REFBeUQsRUFDakUsUUFBUSxrRkFBa0YsRUFDMUYsVUFBVSxZQUFVLE9BQ25CLFNBQVMsS0FBSyxPQUFPLFNBQVMsNkJBQTZCLEVBQzNELFNBQVMsT0FBTyxVQUFtQjtBQUNuQyxXQUFLLE9BQU8sU0FBUyxnQ0FBZ0M7QUFDckQsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ2pDLENBQUMsQ0FBQztBQUVILGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFcEUsUUFBSSx5QkFBUSxXQUFXLEVBQ3JCLFFBQVEsMEJBQTBCLEVBQ2xDLFFBQVEsc0VBQXNFLEVBQzlFLFVBQVUsWUFBVSxPQUNuQixTQUFTLEtBQUssT0FBTyxTQUFTLHFCQUFxQixFQUNuRCxTQUFTLE9BQU8sVUFBbUI7QUFDbkMsV0FBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFDL0IsWUFBTSxLQUFLLE9BQU8sc0JBQXNCLElBQUk7QUFBQSxJQUM5QyxDQUFDLENBQUM7QUFBQSxFQUNKO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJJbXBvcnRBY3Rpb25UeXBlIiwgIlllc05vVHlwZXMiLCAiTXVsdGlwbGVGaWxlc0ltcG9ydFR5cGVzIiwgIlJlbGF0aXZlTG9jYXRpb24iLCAiTGlua0Zvcm1hdCIsICJjcnlwdG8iLCAiZnMiLCAicGF0aCIsICJwYXRoIiwgImltcG9ydF9mcyIsICJwYXRoIiwgImltcG9ydF9vYnNpZGlhbiIsICJwYXRoIiwgImFsdEtleVByZXNzZWQiLCAib2xkUGF0aCIsICJmcyJdCn0K
